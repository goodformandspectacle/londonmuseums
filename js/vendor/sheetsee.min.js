!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"undefined"==typeof window.Sheetsee&&(window.Sheetsee={}),window.Sheetsee=a("sheetsee-core");var d=a("lodash.assign");d(window.Sheetsee,a("sheetsee-maps"),a("sheetsee-charts"),a("sheetsee-tables")),b.exports=Sheetsee},{"lodash.assign":3,"sheetsee-charts":28,"sheetsee-core":31,"sheetsee-maps":32,"sheetsee-tables":59}],2:[function(a,b,c){!function(){var a=function(){function g(a){return String(a).replace(/&(?!\w+;)|[<>"']/g,function(a){return f[a]||a})}var a=Object.prototype.toString;Array.isArray=Array.isArray||function(b){return"[object Array]"==a.call(b)};var c,b=String.prototype.trim;if(b)c=function(a){return null==a?"":b.call(a)};else{var d,e;/\S/.test("Â ")?(d=/^[\s\xA0]+/,e=/[\s\xA0]+$/):(d=/^\s+/,e=/\s+$/),c=function(a){return null==a?"":a.toString().replace(d,"").replace(e,"")}}var f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},h={},i=function(){};return i.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":!0},context:{},render:function(a,b,c,d){if(d||(this.context=b,this.buffer=[]),!this.includes("",a))return d?a:void this.send(a);a=this.render_pragmas(a);var e=this.render_section(a,b,c);return e===!1&&(e=this.render_tags(a,b,c,d)),d?e:void this.sendLines(e)},send:function(a){""!==a&&this.buffer.push(a)},sendLines:function(a){if(a)for(var b=a.split("\n"),c=0;c<b.length;c++)this.send(b[c])},render_pragmas:function(a){if(!this.includes("%",a))return a;var b=this,c=this.getCachedRegex("render_pragmas",function(a,b){return new RegExp(a+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+b,"g")});return a.replace(c,function(a,c,d){if(!b.pragmas_implemented[c])throw{message:"This implementation of mustache doesn't understand the '"+c+"' pragma"};if(b.pragmas[c]={},d){var e=d.split("=");b.pragmas[c][e[0]]=e[1]}return""})},render_partial:function(a,b,d){if(a=c(a),!d||void 0===d[a])throw{message:"unknown_partial '"+a+"'"};return b&&"object"==typeof b[a]?this.render(d[a],b[a],d,!0):this.render(d[a],b,d,!0)},render_section:function(a,b,c){if(!this.includes("#",a)&&!this.includes("^",a))return!1;var d=this,e=this.getCachedRegex("render_section",function(a,b){return new RegExp("^([\\s\\S]*?)"+a+"(\\^|\\#)\\s*(.+)\\s*"+b+"\n*([\\s\\S]*?)"+a+"\\/\\s*\\3\\s*"+b+"\\s*([\\s\\S]*)$","g")});return a.replace(e,function(a,e,f,g,h,i){var l,j=e?d.render_tags(e,b,c,!0):"",k=i?d.render(i,b,c,!0):"",m=d.find(g,b);return"^"===f?l=!m||Array.isArray(m)&&0===m.length?d.render(h,b,c,!0):"":"#"===f&&(l=Array.isArray(m)?d.map(m,function(a){return d.render(h,d.create_context(a),c,!0)}).join(""):d.is_object(m)?d.render(h,d.create_context(m),c,!0):"function"==typeof m?m.call(b,h,function(a){return d.render(a,b,c,!0)}):m?d.render(h,b,c,!0):""),j+l+k})},render_tags:function(a,b,c,d){for(var e=this,f=function(){return e.getCachedRegex("render_tags",function(a,b){return new RegExp(a+"(=|!|>|&|\\{|%)?([^#\\^]+?)\\1?"+b+"+","g")})},h=f(),i=function(a,d,i){switch(d){case"!":return"";case"=":return e.set_delimiters(i),h=f(),"";case">":return e.render_partial(i,b,c);case"{":case"&":return e.find(i,b);default:return g(e.find(i,b))}},j=a.split("\n"),k=0;k<j.length;k++)j[k]=j[k].replace(h,i,this),d||this.send(j[k]);if(d)return j.join("\n")},set_delimiters:function(a){var b=a.split(" ");this.otag=this.escape_regex(b[0]),this.ctag=this.escape_regex(b[1])},escape_regex:function(a){if(!arguments.callee.sRE){var b=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];arguments.callee.sRE=new RegExp("(\\"+b.join("|\\")+")","g")}return a.replace(arguments.callee.sRE,"\\$1")},find:function(a,b){function d(a){return a===!1||0===a||a}a=c(a);var e;if(a.match(/([a-z_]+)\./gi)){var f=this.walk_context(a,b);d(f)&&(e=f)}else d(b[a])?e=b[a]:d(this.context[a])&&(e=this.context[a]);return"function"==typeof e?e.apply(b):void 0!==e?e:""},walk_context:function(a,b){for(var c=a.split("."),d=void 0!=b[c[0]]?b:this.context,e=d[c.shift()];void 0!=e&&c.length>0;)d=e,e=e[c.shift()];return"function"==typeof e?e.apply(d):e},includes:function(a,b){return b.indexOf(this.otag+a)!=-1},create_context:function(a){if(this.is_object(a))return a;var b=".";this.pragmas["IMPLICIT-ITERATOR"]&&(b=this.pragmas["IMPLICIT-ITERATOR"].iterator);var c={};return c[b]=a,c},is_object:function(a){return a&&"object"==typeof a},map:function(a,b){if("function"==typeof a.map)return a.map(b);for(var c=[],d=a.length,e=0;e<d;e++)c.push(b(a[e]));return c},getCachedRegex:function(a,b){var c=h[this.otag];c||(c=h[this.otag]={});var d=c[this.ctag];d||(d=c[this.ctag]={});var e=d[a];return e||(e=d[a]=b(this.otag,this.ctag)),e}},{name:"mustache.js",version:"0.4.0",to_html:function(a,b,c,d){var e=new i;if(d&&(e.send=d),e.render(a,b||{},c),!d)return e.buffer.join("\n")}}}();!function(){function d(a){return"".trim?a.trim():a.replace(/^\s+/,"").replace(/\s+$/,"")}var e=this,f={VERSION:"0.10.2",templates:{},$:"undefined"!=typeof window?window.jQuery||window.Zepto||null:null,addTemplate:function(b,c){if("object"!=typeof b)f[b]?console.error("Invalid name: "+b+"."):f.templates[b]?console.error('Template "'+b+'  " exists'):(f.templates[b]=c,f[b]=function(c,e){c=c||{};var g=a.to_html(f.templates[b],c,f.templates);return f.$&&!e?f.$(d(g)):g});else for(var e in b)this.addTemplate(e,b[e])},clearAll:function(){for(var a in f.templates)delete f[a];f.templates={}},refresh:function(){f.clearAll(),f.grabTemplates()},grabTemplates:function(){var a,b,e,c=document.getElementsByTagName("script"),g=[];for(a=0,b=c.length;a<b;a++)e=c[a],e&&e.innerHTML&&e.id&&("text/html"===e.type||"text/x-icanhaz"===e.type)&&(f.addTemplate(e.id,d(e.innerHTML)),g.unshift(e));for(a=0,b=g.length;a<b;a++)g[a].parentNode.removeChild(g[a])}};"undefined"!=typeof c?("undefined"!=typeof b&&b.exports&&(c=b.exports=f),c.ich=f):e.ich=f,"undefined"!=typeof document&&(f.$?f.$(function(){f.grabTemplates()}):document.addEventListener("DOMContentLoaded",function(){f.grabTemplates()},!0))}()}()},{}],3:[function(a,b,c){var d=a("lodash._basecreatecallback"),e=a("lodash.keys"),f=a("lodash._objecttypes"),g=function(a,b,c){var g,h=a,i=h;if(!h)return i;var j=arguments,k=0,l="number"==typeof c?2:j.length;if(l>3&&"function"==typeof j[l-2])var m=d(j[--l-1],j[l--],2);else l>2&&"function"==typeof j[l-1]&&(m=j[--l]);for(;++k<l;)if(h=j[k],h&&f[typeof h])for(var n=-1,o=f[typeof h]&&e(h),p=o?o.length:0;++n<p;)g=o[n],i[g]=m?m(i[g],h[g]):h[g];return i};b.exports=g},{"lodash._basecreatecallback":4,"lodash._objecttypes":23,"lodash.keys":24}],4:[function(a,b,c){function k(a,b,c){if("function"!=typeof a)return e;if("undefined"==typeof b)return a;var k=a.__bindData__||g.funcNames&&!a.name;if("undefined"==typeof k){var l=i&&j.call(a);g.funcNames||!l||h.test(l)||(k=!0),!g.funcNames&&k||(k=!g.funcDecomp||i.test(l),f(a,k))}if(k!==!0&&k&&1&k[1])return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return d(a,b)}var d=a("lodash.bind"),e=a("lodash.identity"),f=a("lodash._setbinddata"),g=a("lodash.support"),h=/^function[ \n\r\t]+\w/,i=/\bthis\b/,j=Function.prototype.toString;b.exports=k},{"lodash._setbinddata":5,"lodash.bind":13,"lodash.identity":20,"lodash.support":21}],5:[function(a,b,c){var d=a("lodash._getobject"),e=a("lodash._noop"),f=a("lodash._renative"),g=a("lodash._releaseobject"),i=(Object.prototype,function(){try{var a={},b=f.test(b=Object.defineProperty)&&b,c=b(a,a,a)&&b}catch(a){}return c}()),j=i?function(a,b){var c=d();c.value=b,i(a,"__bindData__",c),g(c)}:e;b.exports=j},{"lodash._getobject":6,"lodash._noop":8,"lodash._releaseobject":9,"lodash._renative":12}],6:[function(a,b,c){function e(){return d.pop()||{array:null,cache:null,configurable:!1,criteria:null,enumerable:!1,false:!1,index:0,leading:!1,maxWait:0,null:!1,number:null,object:null,push:null,string:null,trailing:!1,true:!1,undefined:!1,value:null,writable:!1}}var d=a("lodash._objectpool");b.exports=e},{"lodash._objectpool":7}],7:[function(a,b,c){var d=[];b.exports=d},{}],8:[function(a,b,c){function d(){}b.exports=d},{}],9:[function(a,b,c){function f(a){var b=a.cache;b&&f(b),a.array=a.cache=a.criteria=a.object=a.number=a.string=a.value=null,e.length<d&&e.push(a)}var d=a("lodash._maxpoolsize"),e=a("lodash._objectpool");b.exports=f},{"lodash._maxpoolsize":10,"lodash._objectpool":11}],10:[function(a,b,c){var d=40;b.exports=d},{}],11:[function(a,b,c){b.exports=a(7)},{}],12:[function(a,b,c){var d=Object.prototype,e=RegExp("^"+String(d.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$");b.exports=e},{}],13:[function(a,b,c){function h(a,b){return arguments.length>2?d(a,17,g.call(arguments,2),null,b):d(a,1,null,null,b)}var d=a("lodash._createbound"),f=(a("lodash._renative"),[]),g=f.slice;b.exports=h},{"lodash._createbound":14,"lodash._renative":19}],14:[function(a,b,c){function q(a,b,c,g,j,k){var m=1&b,r=2&b,s=4&b,t=8&b,u=16&b,v=32&b,w=a;if(!r&&!e(a))throw new TypeError;u&&!c.length&&(b&=-17,u=c=!1),v&&!g.length&&(b&=-33,v=g=!1);var x=a&&a.__bindData__;if(x)return!m||1&x[1]||(x[4]=j),!m&&1&x[1]&&(b|=8),!s||4&x[1]||(x[5]=k),u&&l.apply(x[2]||(x[2]=[]),c),v&&l.apply(x[3]||(x[3]=[]),g),x[1]|=b,q.apply(null,x);if(m&&!(r||s||v)&&(i.fastBind||o&&u)){if(u){var y=[j];l.apply(y,c)}var z=u?o.apply(a,y):o.call(a,j)}else z=function(){var e=arguments,h=m?j:this;if((s||u||v)&&(e=p.call(e),u&&n.apply(e,c),v&&l.apply(e,g),s&&e.length<k))return b|=16,q(a,t?b:b&-4,e,null,j,k);if(r&&(a=h[w]),this instanceof z){h=d(a.prototype);var i=a.apply(h,e);return f(i)?i:h}return a.apply(h,e)};return h(z,p.call(arguments)),z}var d=a("lodash._createobject"),e=a("lodash.isfunction"),f=a("lodash.isobject"),g=a("lodash._renative"),h=a("lodash._setbinddata"),i=a("lodash.support"),j=[],k=Object.prototype,l=j.push,m=k.toString,n=j.unshift,o=g.test(o=m.bind)&&o,p=j.slice;b.exports=q},{"lodash._createobject":15,"lodash._renative":19,"lodash._setbinddata":5,"lodash.isfunction":17,"lodash.isobject":18,"lodash.support":21}],15:[function(a,b,c){function i(a){return d(a)?h(a):{}}var d=a("lodash.isobject"),f=(a("lodash._noop"),a("lodash._renative")),h=(Object.prototype,f.test(h=Object.create)&&h);b.exports=i},{"lodash._noop":16,"lodash._renative":19,"lodash.isobject":18}],16:[function(a,b,c){b.exports=a(8)},{}],17:[function(a,b,c){function d(a){return"function"==typeof a}b.exports=d},{}],18:[function(a,b,c){function e(a){return!(!a||!d[typeof a])}var d=a("lodash._objecttypes");b.exports=e},{"lodash._objecttypes":23}],19:[function(a,b,c){b.exports=a(12)},{}],20:[function(a,b,c){function d(a){return a}b.exports=d},{}],21:[function(a,b,c){var d="undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e=a("lodash._renative"),f=/\bthis\b/,g=Object.prototype,h=g.toString,i=e.test(i=h.bind)&&i,j=e.test(d.attachEvent),k=i&&!/\n|true/.test(i+j),l={};l.fastBind=i&&!k,l.funcDecomp=!e.test(d.WinRTError)&&f.test(function(){return this}),l.funcNames="string"==typeof Function.name,b.exports=l},{"lodash._renative":22}],22:[function(a,b,c){b.exports=a(12)},{}],23:[function(a,b,c){var d={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1};b.exports=d},{}],24:[function(a,b,c){var d=a("lodash.isobject"),e=a("lodash._renative"),f=a("lodash._shimkeys"),h=(Object.prototype,e.test(h=Object.keys)&&h),i=h?function(a){return d(a)?h(a):[]}:f;b.exports=i},{"lodash._renative":25,"lodash._shimkeys":26,"lodash.isobject":27}],25:[function(a,b,c){b.exports=a(12)},{}],26:[function(a,b,c){var d=a("lodash._objecttypes"),e=Object.prototype,f=e.hasOwnProperty,g=function(a){var b,c=a,e=[];if(!c)return e;if(!d[typeof a])return e;for(b in c)f.call(c,b)&&e.push(b);return e};b.exports=g},{"lodash._objecttypes":23}],27:[function(a,b,c){b.exports=a(18)},{"lodash._objecttypes":23}],28:[function(a,b,c){var d=a("d3");b.exports.d3=d,b.exports.d3BarChart=function(a,b){var a=a.map(function(a){var c=b.labels,d=b.units;return{units:a[d],labels:a[c],hexcolor:a.hexcolor}}),c=b.m,e=b.w-c[1]-c[3],f=b.h-(c[0]+c[2]),g=d.format(",.0f"),h=d.scale.linear().range([0,e]),i=d.scale.ordinal().rangeRoundBands([0,f],.1),j=d.svg.axis().scale(h).orient("top").tickSize(-f).tickFormat(d.format("1s")),l=(d.svg.axis().scale(i).orient("left").tickSize(0),d.select(b.div).append("svg").attr("width",e+c[1]+c[3]).attr("height",f+c[0]+c[2]).append("g").attr("transform","translate("+c[3]+","+c[0]+")"));h.domain([0,d.max(a,function(a){return a.units})]),i.domain(a.map(function(a){return a.labels}));var m=function(){var a=d.select(this),c=a.attr("index_value"),e=".rect-"+c,f=d.selectAll(e);f.style("fill",b.hiColor);var g=".value-"+c,h=d.selectAll(g);h.style("fill",b.hiColor);var i=".labels-"+c,j=d.selectAll(i);j.style("fill",b.hiColor)},n=function(){var a=d.select(this),b=a.attr("index_value"),c=".rect-"+b,e=d.selectAll(c);e.style("fill",function(a){return a.hexcolor});var f=".value-"+b,g=d.selectAll(f);g.style("fill","#333333");var h=".labels-"+b,i=d.selectAll(h);i.style("fill","#333")},o=l.selectAll("g.bar").data(a).enter().append("g").attr("class","bar").attr("transform",function(a){return"translate(0,"+i(a.labels)+")"});o.append("text").attr("x",function(a){return h(a.units)}).attr("y",i.rangeBand()/2).attr("dx",12).attr("dy",".35em").attr("text-anchor","end").attr("index_value",function(a,b){return"index-"+b}).text(function(a){return g(a.units)}).attr("class",function(a,b){return"value-index-"+b}).on("mouseover",m).on("mouseout",n),o.append("text").attr("x",-5).attr("y",i.rangeBand()/2).attr("dx",0).attr("dy",".35em").attr("text-anchor","end").attr("index_value",function(a,b){return"index-"+b}).text(function(a){return a.labels}).attr("class",function(a,b){return"value-index-"+b}).on("mouseover",m).on("mouseout",n),o.append("rect").attr("width",function(a){return h(a.units)}).attr("height",i.rangeBand()).attr("index_value",function(a,b){return"index-"+b}).style("fill",function(a){return a.hexcolor}).on("mouseover",m).on("mouseout",n).attr("class",function(a,b){return"rect-index-"+b}),l.append("g").attr("class","x axis").call(j).append("text").attr("y",-20).attr("x",c[1]).attr("class","xLabel").style("text-anchor","end").text(function(){if(b.xaxis)return b.xaxis})},b.exports.d3PieChart=function(a,b){function k(a){d.select(this).select("path").transition().duration(500).attr("d",h);var c=d.select(this),e=c.attr("index_value"),f=".path-"+e,g=d.selectAll(f);g.style("fill",b.hiColor);var i=".labels-"+e,j=d.selectAll(i);j.transition().duration(150).style("font-size","12px").style("font-weight","bold").style("fill",b.hiColor),j.attr("class",function(a,b){return"labels-"+e+" bigg"})}function l(a){d.select(this).select("path").transition().duration(150).attr("d",g);var b=d.select(this),c=b.attr("index_value"),e=".path-"+c,f=d.selectAll(e);f.style("fill",function(a){return a.data.hexcolor});var h=".labels-"+c,i=d.selectAll(h);i.transition().duration(200).style("font-size","10px").style("font-weight","normal").style("fill",function(a){return a.hexcolor})}var a=a.map(function(a){var c=b.labels,d=b.units;return{units:a[d],labels:a[c],hexcolor:a.hexcolor}}),c=b.w,e=b.h,f=Math.min(c,e)/2.3,g=d.svg.arc().outerRadius(f-10).innerRadius(0),h=d.svg.arc().outerRadius(f+.1),i=d.layout.pie().sort(null).value(function(a){return a.units}),j=d.select(b.div).append("svg").attr("width",c).attr("height",e).append("g").attr("transform","translate("+c/3+","+e/2+")"),a=a;a.forEach(function(a){a.units=+a.units});var m=j.selectAll(".arc").data(i(a)).enter().append("g").attr("index_value",function(a,b){return"index-"+b}).attr("class",function(a,b){return"slice-index-"+b+" slice arc"}).on("mouseover",k).on("mouseout",l);m.append("path").attr("d",g).attr("index_value",function(a,b){return"index-"+b}).attr("class",function(a,b){return"path-index-"+b}).style("fill",function(a){return a.data.hexcolor}).attr("fill",function(a){return a.data.hexcolor});j.selectAll("g.labels").data(a).enter().append("g").append("text").attr("text-anchor","start").attr("x",c/2.5).attr("y",function(b,c){return e/2-c*(20*a.length)}).attr("dx",0).attr("dy","-140px").text(function(a){return a.labels+", "+a.units}).style("fill",function(a){return a.hexcolor}).attr("index_value",function(a,b){return"index-"+b}).attr("class",function(a,b){return"labels-index-"+b+" aLabel "}).on("mouseover",k).on("mouseout",l)},b.exports.d3LineChart=function(a,b){var a=a.map(function(a){var c=b.labels,d=b.units;return{units:a[d],labels:a[c],hexcolor:a.hexcolor}}),c=b.m,e=b.w-c[1]-c[3],f=b.h-c[0]-c[2],a=a,g=d.scale.ordinal().rangeRoundBands([0,e],1);g.domain(a.map(function(a){return a.labels}));var h=d.scale.linear().range([0,f]);h.domain([d.max(a,function(a){return a.units})+2,0]);var i=d.svg.line().x(function(a,b){return g(b)}).y(function(a){return h(a)}),j=d.select(b.div).append("svg:svg").attr("width",e+c[1]+c[3]).attr("height",f+c[0]+c[2]).append("svg:g").attr("transform","translate("+c[3]+","+c[0]+")"),k=d.select(b.div).append("div").attr("class","tooltip").style("opacity",0),l=d.svg.axis().scale(g).tickSize(-f).tickSubdivide(!0);j.append("svg:g").attr("class","x axis").attr("transform","translate(0,"+f+")").call(l).selectAll("text").style("text-anchor","end").attr("dy","-.5em").attr("dx","-1em").attr("transform","rotate(-80)").call(l);var m=d.svg.axis().scale(h).ticks(4).tickSize(-e).tickSubdivide(!0).orient("left");j.append("svg:g").attr("class","y axis").attr("dx","25").attr("transform","translate(0,0)").call(m).append("text").attr("transform","rotate(-90)").attr("y",-40).attr("dy",0).style("text-anchor","end").text(function(){if(b.yaxis)return b.yaxis});var n=a.map(function(a){return a.units});j.append("svg:path").attr("d",i(n)).attr("class","chartLine").attr("index_value",function(a,b){return b}),j.selectAll("dot").data(a).enter().append("circle").attr("r",3.5).attr("fill",b.hiColor).attr("cx",function(a){return g(a.labels)}).attr("cy",function(a){return h(a.units)}).on("mouseover",function(a){k.transition().duration(200).style("opacity",.9),k.html(a.labels+", "+a.units).style("left",d.event.pageX+"px").style("top",d.event.pageY-28+"px")}).on("mouseout",function(a){k.transition().duration(500).style("opacity",0)})}},{d3:30}],29:[function(a,b,c){d3=function(){function j(a){return null!=a&&!isNaN(a)}function l(a){return a.length}function m(a){for(var b=1;a*b%1;)b*=10;return b}function n(a,b){try{for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}catch(c){a.prototype=b}}function o(){}function r(){}function s(a,b,c){return function(){var d=c.apply(b,arguments);return d===b?a:d}}function t(a,b){if(b in a)return b;b=b.charAt(0).toUpperCase()+b.substring(1);for(var c=0,d=u.length;c<d;++c){var e=u[c]+b;if(e in a)return e}}function w(a){for(var b=a.length,c=new Array(b);b--;)c[b]=a[b];return c}function x(a){return Array.prototype.slice.call(a)}function y(){}function z(){}function A(a){function d(){for(var f,c=b,d=-1,e=c.length;++d<e;)(f=c[d].on)&&f.apply(this,arguments);return a}var b=[],c=new o;return d.on=function(d,e){var g,f=c.get(d);return arguments.length<2?f&&f.on:(f&&(f.on=null,b=b.slice(0,g=b.indexOf(f)).concat(b.slice(g+1)),c.remove(d)),e&&b.push(c.set(d,{on:e})),a)},d}function B(){a.event.preventDefault()}function C(){for(var c,b=a.event;c=b.sourceEvent;)b=c;return b}function D(b){for(var c=new z,d=0,e=arguments.length;++d<e;)c[arguments[d]]=A(c);return c.of=function(d,e){return function(f){try{var g=f.sourceEvent=a.event;f.target=b,a.event=f,c[f.type].apply(d,e)}finally{a.event=g}}},c}function G(a){return F(a,L),a}function M(a){return"function"==typeof a?a:function(){return H(a,this)}}function N(a){return"function"==typeof a?a:function(){return I(a,this)}}function P(b,c){function d(){this.removeAttribute(b)}function e(){this.removeAttributeNS(b.space,b.local)}function f(){this.setAttribute(b,c)}function g(){this.setAttributeNS(b.space,b.local,c)}function h(){var a=c.apply(this,arguments);null==a?this.removeAttribute(b):this.setAttribute(b,a)}function i(){var a=c.apply(this,arguments);null==a?this.removeAttributeNS(b.space,b.local):this.setAttributeNS(b.space,b.local,a)}return b=a.ns.qualify(b),null==c?b.local?e:d:"function"==typeof c?b.local?i:h:b.local?g:f}function Q(a){return a.trim().replace(/\s+/g," ")}function R(b){return new RegExp("(?:^|\\s+)"+a.requote(b)+"(?:\\s+|$)","g")}function S(a,b){function d(){for(var d=-1;++d<c;)a[d](this,b)}function e(){for(var d=-1,e=b.apply(this,arguments);++d<c;)a[d](this,e)}a=a.trim().split(/\s+/).map(T);var c=a.length;return"function"==typeof b?e:d}function T(a){var b=R(a);return function(c,d){if(e=c.classList)return d?e.add(a):e.remove(a);var e=c.getAttribute("class")||"";d?(b.lastIndex=0,b.test(e)||c.setAttribute("class",Q(e+" "+a))):c.setAttribute("class",Q(e.replace(b," ")))}}function U(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function f(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"==typeof b?f:e}function V(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}return null==b?c:"function"==typeof b?e:d}function W(c){return"function"==typeof c?c:(c=a.ns.qualify(c)).local?function(){return b.createElementNS(c.space,c.local)}:function(){return b.createElementNS(this.namespaceURI,c)}}function X(a){return{__data__:a}}function Y(a){return function(){return K(this,a)}}function Z(b){return arguments.length||(b=a.ascending),function(a,c){return a&&c?b(a.__data__,c.__data__):!a-!c}}function $(a,b){for(var c=0,d=a.length;c<d;c++)for(var h,e=a[c],f=0,g=e.length;f<g;f++)(h=e[f])&&b(h,f,c);return a}function _(a){return F(a,aa),a}function ba(a){var b,c;return function(d,e,f){var i,g=a[f].update,h=g.length;for(f!=c&&(c=f,b=0),e>=b&&(b=e+1);!(i=g[b])&&++b<h;);return i}}function da(b,c,d){function i(){var a=this[e];a&&(this.removeEventListener(b,a,a.$),delete this[e])}function j(){var a=g(c,v(arguments));i.call(this),this.addEventListener(b,this[e]=a,a.$=d),a._=c}function k(){var d,c=new RegExp("^__on([^.]+)"+a.requote(b)+"$");for(var e in this)if(d=e.match(c)){var f=this[e];this.removeEventListener(d[1],f,f.$),delete this[e]}}var e="__on"+b,f=b.indexOf("."),g=fa;f>0&&(b=b.substring(0,f));var h=ea.get(b);return h&&(b=h,g=ga),f?c?j:i:c?y:k}function fa(b,c){return function(d){var e=a.event;a.event=d,c[0]=this.__data__;try{b.apply(this,c)}finally{a.event=e}}}function ga(a,b){var c=fa(a,b);return function(a){var b=this,d=a.relatedTarget;d&&(d===b||8&d.compareDocumentPosition(b))||c.call(b,a)}}function ja(){var b=".dragsuppress-"+ ++ia,e="touchmove"+b,f="selectstart"+b,g="dragstart"+b,h="click"+b,i=a.select(d).on(e,B).on(f,B).on(g,B),j=c.style,k=j[ha];return j[ha]="none",function(a){function c(){i.on(h,null)}i.on(b,null),j[ha]=k,a&&(i.on(h,function(){B(),c()},!0),setTimeout(c,0))}}function la(b,c){var e=b.ownerSVGElement||b;if(e.createSVGPoint){var f=e.createSVGPoint();if(ka<0&&(d.scrollX||d.scrollY)){e=a.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var g=e[0][0].getScreenCTM();ka=!(g.f||g.e),e.remove()}return ka?(f.x=c.pageX,f.y=c.pageY):(f.x=c.clientX,f.y=c.clientY),f=f.matrixTransform(b.getScreenCTM().inverse()),[f.x,f.y]}var h=b.getBoundingClientRect();return[c.clientX-h.left-b.clientLeft,c.clientY-h.top-b.clientTop]}function pa(){}function qa(a,b,c){return new ra(a,b,c)}function ra(a,b,c){this.h=a,this.s=b,this.l=c}function ta(a,b,c){function f(a){return a>360?a-=360:a<0&&(a+=360),a<60?d+(e-d)*a/60:a<180?e:a<240?d+(e-d)*(240-a)/60:d}function g(a){return Math.round(255*f(a))}var d,e;return a=isNaN(a)?0:(a%=360)<0?a+360:a,b=isNaN(b)?0:b<0?0:b>1?1:b,c=c<0?0:c>1?1:c,e=c<=.5?c*(1+b):c+b-c*b,d=2*c-e,Xa(g(a+120),g(a),g(a-120))}function za(a){return a>0?1:a<0?-1:0}function Aa(a){return a>1?0:a<-1?ua:Math.acos(a)}function Ba(a){return a>1?ua/2:a<-1?-ua/2:Math.asin(a)}function Ca(a){return(Math.exp(a)-Math.exp(-a))/2}function Da(a){return(Math.exp(a)+Math.exp(-a))/2}function Ea(a){return(a=Math.sin(a/2))*a}function Fa(a,b,c){return new Ga(a,b,c)}function Ga(a,b,c){this.h=a,this.c=b,this.l=c}function Ia(a,b,c){return isNaN(a)&&(a=0),isNaN(b)&&(b=0),Ja(c,Math.cos(a*=xa)*b,Math.sin(a)*b)}function Ja(a,b,c){return new Ka(a,b,c)}function Ka(a,b,c){this.l=a,this.a=b,this.b=c}function Qa(a,b,c){var d=(a+16)/116,e=d+b/500,f=d-c/200;return e=Sa(e)*Ma,d=Sa(d)*Na,f=Sa(f)*Oa,Xa(Ua(3.2404542*e-1.5371385*d-.4985314*f),Ua(-.969266*e+1.8760108*d+.041556*f),Ua(.0556434*e-.2040259*d+1.0572252*f))}function Ra(a,b,c){return a>0?Fa(Math.atan2(c,b)*ya,Math.sqrt(b*b+c*c),a):Fa(NaN,NaN,a)}function Sa(a){return a>.206893034?a*a*a:(a-4/29)/7.787037}function Ta(a){return a>.008856?Math.pow(a,1/3):7.787037*a+4/29}function Ua(a){return Math.round(255*(a<=.00304?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}function Va(a){return Xa(a>>16,a>>8&255,255&a)}function Wa(a){return Va(a)+""}function Xa(a,b,c){return new Ya(a,b,c)}function Ya(a,b,c){this.r=a,this.g=b,this.b=c}function $a(a){return a<16?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function _a(a,b,c){var g,h,i,d=0,e=0,f=0;if(g=/([a-z]+)\((.*)\)/i.exec(a))switch(h=g[2].split(","),g[1]){case"hsl":return c(parseFloat(h[0]),parseFloat(h[1])/100,parseFloat(h[2])/100);case"rgb":return b(db(h[0]),db(h[1]),db(h[2]))}return(i=eb.get(a))?b(i.r,i.g,i.b):(null!=a&&"#"===a.charAt(0)&&(4===a.length?(d=a.charAt(1),d+=d,e=a.charAt(2),e+=e,f=a.charAt(3),f+=f):7===a.length&&(d=a.substring(1,3),e=a.substring(3,5),f=a.substring(5,7)),d=parseInt(d,16),e=parseInt(e,16),f=parseInt(f,16)),b(d,e,f))}function ab(a,b,c){var g,h,d=Math.min(a/=255,b/=255,c/=255),e=Math.max(a,b,c),f=e-d,i=(e+d)/2;return f?(h=i<.5?f/(e+d):f/(2-e-d),g=a==e?(b-c)/f+(b<c?6:0):b==e?(c-a)/f+2:(a-b)/f+4,g*=60):(g=NaN,h=i>0&&i<1?0:g),qa(g,h,i)}function bb(a,b,c){a=cb(a),b=cb(b),c=cb(c);var d=Ta((.4124564*a+.3575761*b+.1804375*c)/Ma),e=Ta((.2126729*a+.7151522*b+.072175*c)/Na),f=Ta((.0193339*a+.119192*b+.9503041*c)/Oa);return Ja(116*e-16,500*(d-e),200*(e-f))}function cb(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function db(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function fb(a){return"function"==typeof a?a:function(){return a}}function gb(a){return a}function hb(a){return function(b,c,d){return 2===arguments.length&&"function"==typeof c&&(d=c,c=null),ib(b,c,a,d)}}function ib(b,c,e,f){function l(){var b,a=j.status;if(!a&&j.responseText||a>=200&&a<300||304===a){try{b=e.call(g,j)}catch(a){return void h.error.call(g,a)}h.load.call(g,b)}else h.error.call(g,j)}var g={},h=a.dispatch("progress","load","error"),i={},j=new XMLHttpRequest,k=null;return!d.XDomainRequest||"withCredentials"in j||!/^(http(s)?:)?\/\//.test(b)||(j=new XDomainRequest),"onload"in j?j.onload=j.onerror=l:j.onreadystatechange=function(){j.readyState>3&&l()},j.onprogress=function(b){var c=a.event;a.event=b;try{h.progress.call(g,j)}finally{a.event=c}},g.header=function(a,b){return a=(a+"").toLowerCase(),arguments.length<2?i[a]:(null==b?delete i[a]:i[a]=b+"",g)},g.mimeType=function(a){return arguments.length?(c=null==a?null:a+"",g):c},g.responseType=function(a){return arguments.length?(k=a,g):k},g.response=function(a){return e=a,g},["get","post"].forEach(function(a){g[a]=function(){return g.send.apply(g,[a].concat(v(arguments)))}}),g.send=function(a,d,e){if(2===arguments.length&&"function"==typeof d&&(e=d,d=null),j.open(a,b,!0),null==c||"accept"in i||(i.accept=c+",*/*"),j.setRequestHeader)for(var f in i)j.setRequestHeader(f,i[f]);return null!=c&&j.overrideMimeType&&j.overrideMimeType(c),null!=k&&(j.responseType=k),null!=e&&g.on("error",e).on("load",function(a){e(null,a)}),j.send(null==d?null:d),g},g.abort=function(){return j.abort(),g},a.rebind(g,h,"on"),null==f?g:g.get(jb(f))}function jb(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function qb(){var a=sb(),b=tb()-a;b>24?(isFinite(b)&&(clearTimeout(nb),nb=setTimeout(qb,b)),mb=0):(mb=1,pb(qb))}function rb(a,b,c){var d=arguments.length;d<2&&(b=0),d<3&&(c=Date.now()),ob.callback=a,ob.time=c+b}function sb(){var a=Date.now();for(ob=kb;ob;)a>=ob.time&&(ob.flush=ob.callback(a-ob.time)),ob=ob.next;return a}function tb(){for(var a,b=kb,c=1/0;b;)b.flush?b=a?a.next=b.next:kb=b.next:(b.time<c&&(c=b.time),b=(a=b).next);return lb=a,c}function zb(a,b){var c=Math.pow(10,3*Math.abs(8-b));return{scale:b>8?function(a){return a/c}:function(a){return a*c},symbol:a}}function Cb(a,b){return b-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function Db(a){return a+""}function Gb(){}function Ib(a,b,c){var d=c.s=a+b,e=d-a,f=d-e;c.t=a-f+(b-e)}function Jb(a,b){a&&Lb.hasOwnProperty(a.type)&&Lb[a.type](a,b)}function Mb(a,b,c){var f,d=-1,e=a.length-c;for(b.lineStart();++d<e;)f=a[d],b.point(f[0],f[1]);b.lineEnd()}function Nb(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;)Mb(a[c],b,1);b.polygonEnd()}function Rb(){function f(a,b){a*=xa,b=b*xa/2+ua/4;var f=a-c,g=Math.cos(b),h=Math.sin(b),i=e*h,j=d*g+i*Math.cos(f),k=i*Math.sin(f);Pb.add(Math.atan2(k,j)),c=a,d=g,e=h}var a,b,c,d,e;Qb.point=function(g,h){Qb.point=f,c=(a=g)*xa,d=Math.cos(h=(b=h)*xa/2+ua/4),e=Math.sin(h)},Qb.lineEnd=function(){f(a,b)}}function Sb(a){var b=a[0],c=a[1],d=Math.cos(c);return[d*Math.cos(b),d*Math.sin(b),Math.sin(c)]}function Tb(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function Ub(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function Vb(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function Wb(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function Xb(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b,a[1]/=b,a[2]/=b}function Yb(a){return[Math.atan2(a[1],a[0]),Ba(a[2])]}function Zb(a,b){return Math.abs(a[0]-b[0])<va&&Math.abs(a[1]-b[1])<va}function kc(a,b){a*=xa;var c=Math.cos(b*=xa);lc(c*Math.cos(a),c*Math.sin(a),Math.sin(b))}function lc(a,b,c){++$b,ac+=(a-ac)/$b,bc+=(b-bc)/$b,cc+=(c-cc)/$b}function mc(){function d(d,e){d*=xa;var f=Math.cos(e*=xa),g=f*Math.cos(d),h=f*Math.sin(d),i=Math.sin(e),j=Math.atan2(Math.sqrt((j=b*i-c*h)*j+(j=c*g-a*i)*j+(j=a*h-b*g)*j),a*g+b*h+c*i);_b+=j,dc+=j*(a+(a=g)),ec+=j*(b+(b=h)),fc+=j*(c+(c=i)),lc(a,b,c)}var a,b,c;jc.point=function(e,f){e*=xa;var g=Math.cos(f*=xa);a=g*Math.cos(e),b=g*Math.sin(e),c=Math.sin(f),jc.point=d,lc(a,b,c)}}function nc(){jc.point=kc}function oc(){function f(a,b){a*=xa;var f=Math.cos(b*=xa),g=f*Math.cos(a),h=f*Math.sin(a),i=Math.sin(b),j=d*i-e*h,k=e*g-c*i,l=c*h-d*g,m=Math.sqrt(j*j+k*k+l*l),n=c*g+d*h+e*i,o=m&&-Aa(n)/m,p=Math.atan2(m,n);gc+=o*j,hc+=o*k,ic+=o*l,_b+=p,dc+=p*(c+(c=g)),ec+=p*(d+(d=h)),fc+=p*(e+(e=i)),lc(c,d,e)}var a,b,c,d,e;jc.point=function(g,h){a=g,b=h,jc.point=f,g*=xa;var i=Math.cos(h*=xa);c=i*Math.cos(g),d=i*Math.sin(g),e=Math.sin(h),lc(c,d,e)},jc.lineEnd=function(){f(a,b),jc.lineEnd=nc,jc.point=kc}}function pc(){return!0}function qc(a,b,c,d,e){var f=[],g=[];if(a.forEach(function(a){if(!((b=a.length-1)<=0)){var b,c=a[0],d=a[b];if(Zb(c,d)){e.lineStart();for(var h=0;h<b;++h)e.point((c=a[h])[0],c[1]);return void e.lineEnd()}var i={point:c,points:a,other:null,visited:!1,entry:!0,subject:!0},j={point:c,points:[c],other:i,visited:!1,entry:!1,subject:!1};i.other=j,f.push(i),g.push(j),i={point:d,points:[d],other:null,visited:!1,entry:!1,subject:!0},j={point:d,points:[d],other:i,visited:!1,entry:!0,subject:!1},i.other=j,f.push(i),g.push(j)}}),g.sort(b),rc(f),rc(g),f.length){if(c)for(var h=1,i=!c(g[0].point),j=g.length;h<j;++h)g[h].entry=i=!i;for(var l,m,n,k=f[0];;){for(l=k;l.visited;)if((l=l.next)===k)return;m=l.points,e.lineStart();do{if(l.visited=l.other.visited=!0,l.entry){if(l.subject)for(var h=0;h<m.length;h++)e.point((n=m[h])[0],n[1]);else d(l.point,l.next.point,1,e);
l=l.next}else{if(l.subject){m=l.prev.points;for(var h=m.length;--h>=0;)e.point((n=m[h])[0],n[1])}else d(l.point,l.prev.point,-1,e);l=l.prev}l=l.other,m=l.points}while(!l.visited);e.lineEnd()}}}function rc(a){if(b=a.length){for(var b,e,c=0,d=a[0];++c<b;)d.next=e=a[c],e.prev=d,d=e;d.next=e=a[0],e.prev=d}}function sc(b,c,d,e){return function(f){function i(a,c){b(a,c)&&f.point(a,c)}function j(a,b){g.point(a,b)}function k(){h.point=j,g.lineStart()}function l(){h.point=i,g.lineEnd()}function r(a,b){o.point(a,b),q.push([a,b])}function s(){o.lineStart(),q=[]}function t(){r(q[0][0],q[0][1]),o.lineEnd();var c,a=o.clean(),b=n.buffer(),d=b.length;if(q.pop(),p.push(q),q=null,d){if(1&a){c=b[0];var g,d=c.length-1,e=-1;for(f.lineStart();++e<d;)f.point((g=c[e])[0],g[1]);return void f.lineEnd()}d>1&&2&a&&b.push(b.pop().concat(b.shift())),m.push(b.filter(tc))}}var m,p,q,g=c(f),h={point:i,lineStart:k,lineEnd:l,polygonStart:function(){h.point=r,h.lineStart=s,h.lineEnd=t,m=[],p=[],f.polygonStart()},polygonEnd:function(){h.point=i,h.lineStart=k,h.lineEnd=l,m=a.merge(m),m.length?qc(m,vc,null,d,f):e(p)&&(f.lineStart(),d(null,null,1,f),f.lineEnd()),f.polygonEnd(),m=p=null},sphere:function(){f.polygonStart(),f.lineStart(),d(null,null,1,f),f.lineEnd(),f.polygonEnd()}},n=uc(),o=c(n);return h}}function tc(a){return a.length>1}function uc(){var b,a=[];return{lineStart:function(){a.push(b=[])},point:function(a,c){b.push([a,c])},lineEnd:y,buffer:function(){var c=a;return a=[],b=null,c},rejoin:function(){a.length>1&&a.push(a.pop().concat(a.shift()))}}}function vc(a,b){return((a=a.point)[0]<0?a[1]-ua/2-va:ua/2-a[1])-((b=b.point)[0]<0?b[1]-ua/2-va:ua/2-b[1])}function wc(a,b){var c=a[0],d=a[1],e=[Math.sin(c),-Math.cos(c),0],f=0,g=!1,h=!1,i=0;Pb.reset();for(var j=0,k=b.length;j<k;++j){var l=b[j],m=l.length;if(m){for(var n=l[0],o=n[0],p=n[1]/2+ua/4,q=Math.sin(p),r=Math.cos(p),s=1;;){s===m&&(s=0),a=l[s];var t=a[0],u=a[1]/2+ua/4,v=Math.sin(u),w=Math.cos(u),x=t-o,y=Math.abs(x)>ua,z=q*v;if(Pb.add(Math.atan2(z*Math.sin(x),r*w+z*Math.cos(x))),Math.abs(u)<va&&(h=!0),f+=y?x+(x>=0?2:-2)*ua:x,y^o>=c^t>=c){var A=Ub(Sb(n),Sb(a));Xb(A);var B=Ub(e,A);Xb(B);var C=(y^x>=0?-1:1)*Ba(B[2]);d>C&&(i+=y^x>=0?1:-1)}if(!s++)break;o=t,q=v,r=w,n=a}Math.abs(f)>va&&(g=!0)}}return(!h&&!g&&Pb<0||f<-va)^1&i}function yc(a){var e,b=NaN,c=NaN,d=NaN;return{lineStart:function(){a.lineStart(),e=1},point:function(f,g){var h=f>0?ua:-ua,i=Math.abs(f-b);Math.abs(i-ua)<va?(a.point(b,c=(c+g)/2>0?ua/2:-ua/2),a.point(d,c),a.lineEnd(),a.lineStart(),a.point(h,c),a.point(f,c),e=0):d!==h&&i>=ua&&(Math.abs(b-d)<va&&(b-=d*va),Math.abs(f-h)<va&&(f-=h*va),c=zc(b,c,f,g),a.point(d,c),a.lineEnd(),a.lineStart(),a.point(h,c),e=0),a.point(b=f,c=g),d=h},lineEnd:function(){a.lineEnd(),b=c=NaN},clean:function(){return 2-e}}}function zc(a,b,c,d){var e,f,g=Math.sin(a-c);return Math.abs(g)>va?Math.atan((Math.sin(b)*(f=Math.cos(d))*Math.sin(c)-Math.sin(d)*(e=Math.cos(b))*Math.sin(a))/(e*f*g)):(b+d)/2}function Ac(a,b,c,d){var e;if(null==a)e=c*ua/2,d.point(-ua,e),d.point(0,e),d.point(ua,e),d.point(ua,0),d.point(ua,-e),d.point(0,-e),d.point(-ua,-e),d.point(-ua,0),d.point(-ua,e);else if(Math.abs(a[0]-b[0])>va){var f=(a[0]<b[0]?1:-1)*ua;e=c*f/2,d.point(-f,e),d.point(0,e),d.point(f,e)}else d.point(b[0],b[1])}function Cc(a){return wc(Bc,a)}function Dc(a){function g(a,c){return Math.cos(a)*Math.cos(c)>b}function h(a){var b,d,f,h,k;return{lineStart:function(){h=f=!1,k=1},point:function(l,m){var o,n=[l,m],p=g(l,m),q=c?p?0:j(l,m):p?j(l+(l<0?ua:-ua),m):0;if(!b&&(h=f=p)&&a.lineStart(),p!==f&&(o=i(b,n),(Zb(b,o)||Zb(n,o))&&(n[0]+=va,n[1]+=va,p=g(n[0],n[1]))),p!==f)k=0,p?(a.lineStart(),o=i(n,b),a.point(o[0],o[1])):(o=i(b,n),a.point(o[0],o[1]),a.lineEnd()),b=o;else if(e&&b&&c^p){var r;q&d||!(r=i(n,b,!0))||(k=0,c?(a.lineStart(),a.point(r[0][0],r[0][1]),a.point(r[1][0],r[1][1]),a.lineEnd()):(a.point(r[1][0],r[1][1]),a.lineEnd(),a.lineStart(),a.point(r[0][0],r[0][1])))}!p||b&&Zb(b,n)||a.point(n[0],n[1]),b=n,f=p,d=q},lineEnd:function(){f&&a.lineEnd(),b=null},clean:function(){return k|(h&&f)<<1}}}function i(a,c,d){var e=Sb(a),f=Sb(c),g=[1,0,0],h=Ub(e,f),i=Tb(h,h),j=h[0],k=i-j*j;if(!k)return!d&&a;var l=b*i/k,m=-b*j/k,n=Ub(g,h),o=Wb(g,l),p=Wb(h,m);Vb(o,p);var q=n,r=Tb(o,q),s=Tb(q,q),t=r*r-s*(Tb(o,o)-1);if(!(t<0)){var u=Math.sqrt(t),v=Wb(q,(-r-u)/s);if(Vb(v,o),v=Yb(v),!d)return v;var A,w=a[0],x=c[0],y=a[1],z=c[1];x<w&&(A=w,w=x,x=A);var B=x-w,C=Math.abs(B-ua)<va,D=C||B<va;if(!C&&z<y&&(A=y,y=z,z=A),D?C?y+z>0^v[1]<(Math.abs(v[0]-w)<va?y:z):y<=v[1]&&v[1]<=z:B>ua^(w<=v[0]&&v[0]<=x)){var E=Wb(q,(-r+u)/s);return Vb(E,o),[v,Yb(E)]}}}function j(b,d){var e=c?a:ua-a,f=0;return b<-e?f|=1:b>e&&(f|=2),d<-e?f|=4:d>e&&(f|=8),f}function k(a){return wc(d,a)}var b=Math.cos(a),c=b>0,d=[a,0],e=Math.abs(b)>va,f=kd(a,6*xa);return sc(g,h,f,k)}function Fc(b,c,d,e){function f(a,e){return Math.abs(a[0]-b)<va?e>0?0:3:Math.abs(a[0]-d)<va?e>0?2:1:Math.abs(a[1]-c)<va?e>0?1:0:e>0?3:2}function g(a,b){return h(a.point,b.point)}function h(a,b){var c=f(a,1),d=f(b,1);return c!==d?c-d:0===c?b[1]-a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}function i(a,f){var g=f[0]-a[0],h=f[1]-a[1],i=[0,1];return Math.abs(g)<va&&Math.abs(h)<va?b<=a[0]&&a[0]<=d&&c<=a[1]&&a[1]<=e:!!(Gc(b-a[0],g,i)&&Gc(a[0]-d,-g,i)&&Gc(c-a[1],h,i)&&Gc(a[1]-e,-h,i))&&(i[1]<1&&(f[0]=a[0]+i[1]*g,f[1]=a[1]+i[1]*h),i[0]>0&&(a[0]+=i[0]*g,a[1]+=i[0]*h),!0)}return function(j){function q(a){var g=f(a,-1),h=r([0===g||3===g?b:d,g>1?e:c]);return h}function r(a){for(var b=0,c=n.length,d=a[1],e=0;e<c;++e)for(var j,f=1,g=n[e],h=g.length,i=g[0];f<h;++f)j=g[f],i[1]<=d?j[1]>d&&s(i,j,a)>0&&++b:j[1]<=d&&s(i,j,a)<0&&--b,i=j;return 0!==b}function s(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(c[0]-a[0])*(b[1]-a[1])}function t(a,g,i,j){var k=0,l=0;if(null==a||(k=f(a,i))!==(l=f(g,i))||h(a,g)<0^i>0){do j.point(0===k||3===k?b:d,k>1?e:c);while((k=(k+i+4)%4)!==l)}else j.point(g[0],g[1])}function u(a,f){return b<=a&&a<=d&&c<=f&&f<=e}function v(a,b){u(a,b)&&j.point(a,b)}function D(){p.point=F,n&&n.push(o=[]),C=!0,B=!1,z=A=NaN}function E(){m&&(F(w,x),y&&B&&l.rejoin(),m.push(l.buffer())),p.point=v,B&&j.lineEnd()}function F(a,b){a=Math.max(-Ec,Math.min(Ec,a)),b=Math.max(-Ec,Math.min(Ec,b));var c=u(a,b);if(n&&o.push([a,b]),C)w=a,x=b,y=c,C=!1,c&&(j.lineStart(),j.point(a,b));else if(c&&B)j.point(a,b);else{var d=[z,A],e=[a,b];i(d,e)?(B||(j.lineStart(),j.point(d[0],d[1])),j.point(e[0],e[1]),c||j.lineEnd()):c&&(j.lineStart(),j.point(a,b))}z=a,A=b,B=c}var m,n,o,w,x,y,z,A,B,C,k=j,l=uc(),p={point:v,lineStart:D,lineEnd:E,polygonStart:function(){j=l,m=[],n=[]},polygonEnd:function(){j=k,(m=a.merge(m)).length?(j.polygonStart(),qc(m,g,q,t,j),j.polygonEnd()):r([b,c])&&(j.polygonStart(),j.lineStart(),t(null,null,1,j),j.lineEnd(),j.polygonEnd()),m=n=o=null}};return p}}function Gc(a,b,c){if(Math.abs(b)<va)return a<=0;var d=a/b;if(b>0){if(d>c[1])return!1;d>c[0]&&(c[0]=d)}else{if(d<c[0])return!1;d<c[1]&&(c[1]=d)}return!0}function Hc(a,b){function c(c,d){return c=a(c,d),b(c[0],c[1])}return a.invert&&b.invert&&(c.invert=function(c,d){return c=b.invert(c,d),c&&a.invert(c[0],c[1])}),c}function Ic(a){var b=0,c=ua/3,d=dd(a),e=d(b,c);return e.parallels=function(a){return arguments.length?d(b=a[0]*ua/180,c=a[1]*ua/180):[b/ua*180,c/ua*180]},e}function Jc(a,b){function g(a,b){var c=Math.sqrt(e-2*d*Math.sin(b))/d;return[c*Math.sin(a*=d),f-c*Math.cos(a)]}var c=Math.sin(a),d=(c+Math.sin(b))/2,e=1+c*(2*d-c),f=Math.sqrt(e)/d;return g.invert=function(a,b){var c=f-b;return[Math.atan2(a,c)/d,Ba((e-(a*a+c*c)*d*d)/(2*d))]},g}function Nc(){function e(a,b){Lc+=d*a-c*b,c=a,d=b}var a,b,c,d;Mc.point=function(f,g){Mc.point=e,a=c=f,b=d=g},Mc.lineEnd=function(){e(a,b)}}function Tc(a,b){a<Oc&&(Oc=a),a>Qc&&(Qc=a),b<Pc&&(Pc=b),b>Rc&&(Rc=b)}function Uc(){function d(c,d){b.push("M",c,",",d,a)}function e(a,d){b.push("M",a,",",d),c.point=f}function f(a,c){b.push("L",a,",",c)}function g(){c.point=d}function h(){b.push("Z")}var a=Vc(4.5),b=[],c={point:d,lineStart:function(){c.point=e},lineEnd:g,polygonStart:function(){c.lineEnd=h},polygonEnd:function(){c.lineEnd=g,c.point=d},pointRadius:function(b){return a=Vc(b),c},result:function(){if(b.length){var a=b.join("");return b=[],a}}};return c}function Vc(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Xc(a,b){ac+=a,bc+=b,++cc}function Yc(){function c(c,d){var e=c-a,f=d-b,g=Math.sqrt(e*e+f*f);dc+=g*(a+c)/2,ec+=g*(b+d)/2,fc+=g,Xc(a=c,b=d)}var a,b;Wc.point=function(d,e){Wc.point=c,Xc(a=d,b=e)}}function Zc(){Wc.point=Xc}function $c(){function e(a,b){var e=a-c,f=b-d,g=Math.sqrt(e*e+f*f);dc+=g*(c+a)/2,ec+=g*(d+b)/2,fc+=g,g=d*a-c*b,gc+=g*(c+a),hc+=g*(d+b),ic+=3*g,Xc(c=a,d=b)}var a,b,c,d;Wc.point=function(f,g){Wc.point=e,Xc(a=c=f,b=d=g)},Wc.lineEnd=function(){e(a,b)}}function _c(a){function d(c,d){a.moveTo(c,d),a.arc(c,d,b,0,2*ua)}function e(b,d){a.moveTo(b,d),c.point=f}function f(b,c){a.lineTo(b,c)}function g(){c.point=d}function h(){a.closePath()}var b=4.5,c={point:d,lineStart:function(){c.point=e},lineEnd:g,polygonStart:function(){c.lineEnd=h},polygonEnd:function(){c.lineEnd=g,c.point=d},pointRadius:function(a){return b=a,c},result:y};return c}function ad(a){function e(b){function s(c,d){c=a(c,d),b.point(c[0],c[1])}function t(){m=NaN,r.point=u,b.lineStart()}function u(c,e){var g=Sb([c,e]),h=a(c,e);f(m,n,l,o,p,q,m=h[0],n=h[1],l=c,o=g[0],p=g[1],q=g[2],d,b),b.point(m,n)}function v(){r.point=s,b.lineEnd()}function w(){t(),r.point=x,r.lineEnd=y}function x(a,b){u(c=a,e=b),g=m,h=n,i=o,j=p,k=q,r.point=u}function y(){f(m,n,l,o,p,q,g,h,c,i,j,k,d,b),r.lineEnd=v,v()}var c,e,g,h,i,j,k,l,m,n,o,p,q,r={point:s,lineStart:t,lineEnd:v,polygonStart:function(){b.polygonStart(),r.lineStart=w},polygonEnd:function(){b.polygonEnd(),r.lineStart=t}};return r}function f(d,e,g,h,i,j,k,l,m,n,o,p,q,r){var s=k-d,t=l-e,u=s*s+t*t;if(u>4*b&&q--){var v=h+n,w=i+o,x=j+p,y=Math.sqrt(v*v+w*w+x*x),z=Math.asin(x/=y),A=Math.abs(Math.abs(x)-1)<va?(g+m)/2:Math.atan2(w,v),B=a(A,z),C=B[0],D=B[1],E=C-d,F=D-e,G=t*E-s*F;(G*G/u>b||Math.abs((s*E+t*F)/u-.5)>.3||h*n+i*o+j*p<c)&&(f(d,e,g,h,i,j,C,D,A,v/=y,w/=y,x,q,r),r.point(C,D),f(C,D,A,v,w,x,k,l,m,n,o,p,q,r))}}var b=.5,c=Math.cos(30*xa),d=16;return e.precision=function(a){return arguments.length?(d=(b=a*a)>0&&16,e):Math.sqrt(b)},e}function bd(a){var b=ad(function(b,c){return a([b*ya,c*ya])});return function(a){return a=b(a),{point:function(b,c){a.point(b*xa,c*xa)},sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}}function cd(a){return dd(function(){return a})()}function dd(b){function v(a){return a=e(a[0]*xa,a[1]*xa),[a[0]*g+o,p-a[1]*g]}function w(a){return a=e.invert((a[0]-o)/g,(p-a[1])/g),a&&[a[0]*ya,a[1]*ya]}function x(){e=Hc(d=gd(l,m,n),c);var a=c(j,k);return o=h-a[0]*g,p=i+a[1]*g,y()}function y(){return u&&(u.valid=!1,u=null),v}var c,d,e,o,p,u,f=ad(function(a,b){return a=c(a,b),[a[0]*g+o,p-a[1]*g]}),g=150,h=480,i=250,j=0,k=0,l=0,m=0,n=0,q=xc,r=gb,s=null,t=null;return v.stream=function(a){return u&&(u.valid=!1),u=ed(d,q(f(r(a)))),u.valid=!0,u},v.clipAngle=function(a){return arguments.length?(q=null==a?(s=a,xc):Dc((s=+a)*xa),y()):s},v.clipExtent=function(a){return arguments.length?(t=a,r=null==a?gb:Fc(a[0][0],a[0][1],a[1][0],a[1][1]),y()):t},v.scale=function(a){return arguments.length?(g=+a,x()):g},v.translate=function(a){return arguments.length?(h=+a[0],i=+a[1],x()):[h,i]},v.center=function(a){return arguments.length?(j=a[0]%360*xa,k=a[1]%360*xa,x()):[j*ya,k*ya]},v.rotate=function(a){return arguments.length?(l=a[0]%360*xa,m=a[1]%360*xa,n=a.length>2?a[2]%360*xa:0,x()):[l*ya,m*ya,n*ya]},a.rebind(v,f,"precision"),function(){return c=b.apply(this,arguments),v.invert=c.invert&&w,x()}}function ed(a,b){return{point:function(c,d){d=a(c*xa,d*xa),c=d[0],b.point(c>ua?c-2*ua:c<-ua?c+2*ua:c,d[1])},sphere:function(){b.sphere()},lineStart:function(){b.lineStart()},lineEnd:function(){b.lineEnd()},polygonStart:function(){b.polygonStart()},polygonEnd:function(){b.polygonEnd()}}}function fd(a,b){return[a,b]}function gd(a,b,c){return a?b||c?Hc(id(a),jd(b,c)):id(a):b||c?jd(b,c):fd}function hd(a){return function(b,c){return b+=a,[b>ua?b-2*ua:b<-ua?b+2*ua:b,c]}}function id(a){var b=hd(a);return b.invert=hd(-a),b}function jd(a,b){function g(a,b){var g=Math.cos(b),h=Math.cos(a)*g,i=Math.sin(a)*g,j=Math.sin(b),k=j*c+h*d;return[Math.atan2(i*e-k*f,h*c-j*d),Ba(k*e+i*f)]}var c=Math.cos(a),d=Math.sin(a),e=Math.cos(b),f=Math.sin(b);return g.invert=function(a,b){var g=Math.cos(b),h=Math.cos(a)*g,i=Math.sin(a)*g,j=Math.sin(b),k=j*e-i*f;return[Math.atan2(i*e+j*f,h*c+k*d),Ba(k*c-h*d)]},g}function kd(a,b){var c=Math.cos(a),d=Math.sin(a);return function(e,f,g,h){null!=e?(e=ld(c,e),f=ld(c,f),(g>0?e<f:e>f)&&(e+=2*g*ua)):(e=a+2*g*ua,f=a);for(var i,j=g*b,k=e;g>0?k>f:k<f;k-=j)h.point((i=Yb([c,-d*Math.cos(k),-d*Math.sin(k)]))[0],i[1])}}function ld(a,b){var c=Sb(b);c[0]-=a,Xb(c);var d=Aa(-c[1]);return((-c[2]<0?-d:d)+2*Math.PI-va)%(2*Math.PI)}function md(b,c,d){var e=a.range(b,c-va,d).concat(c);return function(a){return e.map(function(b){return[a,b]})}}function nd(b,c,d){var e=a.range(b,c-va,d).concat(c);return function(a){return e.map(function(b){return[b,a]})}}function od(a){return a.source}function pd(a){return a.target}function qd(a,b,c,d){var e=Math.cos(b),f=Math.sin(b),g=Math.cos(d),h=Math.sin(d),i=e*Math.cos(a),j=e*Math.sin(a),k=g*Math.cos(c),l=g*Math.sin(c),m=2*Math.asin(Math.sqrt(Ea(d-b)+e*g*Ea(c-a))),n=1/Math.sin(m),o=m?function(a){var b=Math.sin(a*=m)*n,c=Math.sin(m-a)*n,d=c*i+b*k,e=c*j+b*l,g=c*f+b*h;return[Math.atan2(e,d)*ya,Math.atan2(g,Math.sqrt(d*d+e*e))*ya]}:function(){return[a*ya,b*ya]};return o.distance=m,o}function td(){function d(d,e){var f=Math.sin(e*=xa),g=Math.cos(e),h=Math.abs((d*=xa)-a),i=Math.cos(h);rd+=Math.atan2(Math.sqrt((h=g*Math.sin(h))*h+(h=c*f-b*g*i)*h),b*f+c*g*i),a=d,b=f,c=g}var a,b,c;sd.point=function(e,f){a=e*xa,b=Math.sin(f*=xa),c=Math.cos(f),sd.point=d},sd.lineEnd=function(){sd.point=sd.lineEnd=y}}function ud(a,b){function c(b,c){var d=Math.cos(b),e=Math.cos(c),f=a(d*e);return[f*e*Math.sin(b),f*Math.sin(c)]}return c.invert=function(a,c){var d=Math.sqrt(a*a+c*c),e=b(d),f=Math.sin(e),g=Math.cos(e);return[Math.atan2(a*f,d*g),Math.asin(d&&c*f/d)]},c}function xd(a,b){function g(a,b){var c=Math.abs(Math.abs(b)-ua/2)<va?0:f/Math.pow(d(b),e);return[c*Math.sin(e*a),f-c*Math.cos(e*a)]}var c=Math.cos(a),d=function(a){return Math.tan(ua/4+a/2)},e=a===b?Math.sin(a):Math.log(c/Math.cos(b))/Math.log(d(b)/d(a)),f=c*Math.pow(d(a),e)/e;return e?(g.invert=function(a,b){var c=f-b,d=za(e)*Math.sqrt(a*a+c*c);return[Math.atan2(a,c)/e,2*Math.atan(Math.pow(f/d,1/e))-ua/2]},g):Ad}function yd(a,b){function f(a,b){var c=e-b;return[c*Math.sin(d*a),e-c*Math.cos(d*a)]}var c=Math.cos(a),d=a===b?Math.sin(a):(c-Math.cos(b))/(b-a),e=c/d+a;return Math.abs(d)<va?fd:(f.invert=function(a,b){var c=e-b;return[Math.atan2(a,c)/d,e-za(d)*Math.sqrt(a*a+c*c)]},f)}function Ad(a,b){return[a,Math.log(Math.tan(ua/4+b/2))]}function Bd(a){var f,b=cd(a),c=b.scale,d=b.translate,e=b.clipExtent;return b.scale=function(){var a=c.apply(b,arguments);return a===b?f?b.clipExtent(null):b:a},b.translate=function(){var a=d.apply(b,arguments);return a===b?f?b.clipExtent(null):b:a},b.clipExtent=function(a){var g=e.apply(b,arguments);if(g===b){if(f=null==a){var h=ua*c(),i=d();e([[i[0]-h,i[1]-h],[i[0]+h,i[1]+h]])}}else f&&(g=null);return g},b.clipExtent(null)}function Ed(a,b){var c=Math.cos(b)*Math.sin(a);return[Math.log((1+c)/(1-c))/2,Math.atan2(Math.tan(b),Math.cos(a))]}function Fd(a){function h(f){function o(){h.push("M",e(a(i),g))}for(var l,h=[],i=[],j=-1,k=f.length,m=fb(b),n=fb(c);++j<k;)d.call(this,l=f[j],j)?i.push([+m.call(this,l,j),+n.call(this,l,j)]):i.length&&(o(),i=[]);return i.length&&o(),h.length?h.join(""):null}var b=Gd,c=Hd,d=pc,e=Jd,f=e.key,g=.7;return h.x=function(a){return arguments.length?(b=a,h):b},h.y=function(a){return arguments.length?(c=a,h):c},h.defined=function(a){return arguments.length?(d=a,h):d},h.interpolate=function(a){return arguments.length?(f="function"==typeof a?e=a:(e=Id.get(a)||Jd).key,h):f},h.tension=function(a){return arguments.length?(g=a,h):g},h}function Gd(a){return a[0]}function Hd(a){return a[1]}function Jd(a){return a.join("L")}function Kd(a){return Jd(a)+"Z"}function Ld(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d[0]+(d=a[b])[0])/2,"V",d[1]);return c>1&&e.push("H",d[0]),e.join("")}function Md(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function Nd(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function Od(a,b){return a.length<4?Jd(a):a[1]+Rd(a.slice(1,a.length-1),Sd(a,b))}function Pd(a,b){return a.length<3?Jd(a):a[0]+Rd((a.push(a[0]),a),Sd([a[a.length-2]].concat(a,[a[1]]),b))}function Qd(a,b){return a.length<3?Jd(a):a[0]+Rd(a,Sd(a,b))}function Rd(a,b){if(b.length<1||a.length!=b.length&&a.length!=b.length+2)return Jd(a);var c=a.length!=b.length,d="",e=a[0],f=a[1],g=b[0],h=g,i=1;if(c&&(d+="Q"+(f[0]-2*g[0]/3)+","+(f[1]-2*g[1]/3)+","+f[0]+","+f[1],e=a[1],i=2),b.length>1){h=b[1],f=a[i],i++,d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1];for(var j=2;j<b.length;j++,i++)f=a[i],h=b[j],d+="S"+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1]}if(c){var k=a[i];d+="Q"+(f[0]+2*h[0]/3)+","+(f[1]+2*h[1]/3)+","+k[0]+","+k[1]}return d}function Sd(a,b){for(var e,c=[],d=(1-b)/2,f=a[0],g=a[1],h=1,i=a.length;++h<i;)e=f,f=g,g=a[h],c.push([d*(g[0]-e[0]),d*(g[1]-e[1])]);return c}function Td(a){if(a.length<3)return Jd(a);var b=1,c=a.length,d=a[0],e=d[0],f=d[1],g=[e,e,e,(d=a[1])[0]],h=[f,f,f,d[1]],i=[e,",",f,"L",Xd($d,g),",",Xd($d,h)];for(a.push(a[c-1]);++b<=c;)d=a[b],g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),_d(i,g,h);return a.pop(),i.push("L",d),i.join("")}function Ud(a){if(a.length<4)return Jd(a);for(var e,b=[],c=-1,d=a.length,f=[0],g=[0];++c<3;)e=a[c],f.push(e[0]),g.push(e[1]);for(b.push(Xd($d,f)+","+Xd($d,g)),--c;++c<d;)e=a[c],f.shift(),f.push(e[0]),g.shift(),g.push(e[1]),_d(b,f,g);return b.join("")}function Vd(a){for(var b,f,c=-1,d=a.length,e=d+4,g=[],h=[];++c<4;)f=a[c%d],g.push(f[0]),h.push(f[1]);for(b=[Xd($d,g),",",Xd($d,h)],--c;++c<e;)f=a[c%d],g.shift(),g.push(f[0]),h.shift(),h.push(f[1]),_d(b,g,h);return b.join("")}function Wd(a,b){var c=a.length-1;if(c)for(var i,j,d=a[0][0],e=a[0][1],f=a[c][0]-d,g=a[c][1]-e,h=-1;++h<=c;)i=a[h],j=h/c,i[0]=b*i[0]+(1-b)*(d+j*f),i[1]=b*i[1]+(1-b)*(e+j*g);return Td(a)}function Xd(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function _d(a,b,c){a.push("C",Xd(Yd,b),",",Xd(Yd,c),",",Xd(Zd,b),",",Xd(Zd,c),",",Xd($d,b),",",Xd($d,c))}function ae(a,b){return(b[1]-a[1])/(b[0]-a[0])}function be(a){for(var b=0,c=a.length-1,d=[],e=a[0],f=a[1],g=d[0]=ae(e,f);++b<c;)d[b]=(g+(g=ae(e=f,f=a[b+1])))/2;return d[b]=g,d}function ce(a){for(var c,d,e,f,b=[],g=be(a),h=-1,i=a.length-1;++h<i;)c=ae(a[h],a[h+1]),Math.abs(c)<1e-6?g[h]=g[h+1]=0:(d=g[h]/c,e=g[h+1]/c,f=d*d+e*e,f>9&&(f=3*c/Math.sqrt(f),g[h]=f*d,g[h+1]=f*e));for(h=-1;++h<=i;)f=(a[Math.min(i,h+1)][0]-a[Math.max(0,h-1)][0])/(6*(1+g[h]*g[h])),b.push([f||0,g[h]*f||0]);return b}function de(a){return a.length<3?Jd(a):a[0]+Rd(a,ce(a))}function ee(a,b,c,d){var e,f,g,h,i,j,k;return e=d[a],f=e[0],g=e[1],e=d[b],h=e[0],i=e[1],e=d[c],j=e[0],k=e[1],(k-g)*(h-f)-(i-g)*(j-f)>0}function ge(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function he(a,b,c,d){var e=a[0],f=c[0],g=b[0]-e,h=d[0]-f,i=a[1],j=c[1],k=b[1]-i,l=d[1]-j,m=(h*(i-j)-l*(e-f))/(l*g-h*k);return[e+m*g,i+m*k]}function ie(a){var b=a[0],c=a[a.length-1];return!(b[0]-c[0]||b[1]-c[1])}function ke(a,b){var c={list:a.map(function(a,b){return{index:b,x:a[0],y:a[1]}}).sort(function(a,b){return a.y<b.y?-1:a.y>b.y?1:a.x<b.x?-1:a.x>b.x?1:0}),bottomSite:null},d={list:[],leftEnd:null,rightEnd:null,init:function(){d.leftEnd=d.createHalfEdge(null,"l"),d.rightEnd=d.createHalfEdge(null,"l"),d.leftEnd.r=d.rightEnd,d.rightEnd.l=d.leftEnd,d.list.unshift(d.leftEnd,d.rightEnd)},createHalfEdge:function(a,b){return{edge:a,side:b,vertex:null,l:null,r:null}},insert:function(a,b){b.l=a,b.r=a.r,a.r.l=b,a.r=b},leftBound:function(a){var b=d.leftEnd;do b=b.r;while(b!=d.rightEnd&&e.rightOf(b,a));return b=b.l},del:function(a){a.l.r=a.r,a.r.l=a.l,a.edge=null},right:function(a){return a.r},left:function(a){return a.l},leftRegion:function(a){return null==a.edge?c.bottomSite:a.edge.region[a.side]},rightRegion:function(a){return null==a.edge?c.bottomSite:a.edge.region[je[a.side]]}},e={bisect:function(a,b){var c={region:{l:a,r:b},ep:{l:null,r:null}},d=b.x-a.x,e=b.y-a.y,f=d>0?d:-d,g=e>0?e:-e;return c.c=a.x*d+a.y*e+.5*(d*d+e*e),f>g?(c.a=1,c.b=e/d,c.c/=d):(c.b=1,c.a=d/e,c.c/=e),c},intersect:function(a,b){var c=a.edge,d=b.edge;if(!c||!d||c.region.r==d.region.r)return null;var e=c.a*d.b-c.b*d.a;if(Math.abs(e)<1e-10)return null;var j,k,f=(c.c*d.b-d.c*c.b)/e,g=(d.c*c.a-c.c*d.a)/e,h=c.region.r,i=d.region.r;h.y<i.y||h.y==i.y&&h.x<i.x?(j=a,k=c):(j=b,k=d);var l=f>=k.region.r.x;return l&&"l"===j.side||!l&&"r"===j.side?null:{x:f,y:g}},rightOf:function(a,b){var c=a.edge,d=c.region.r,e=b.x>d.x;if(e&&"l"===a.side)return 1;if(!e&&"r"===a.side)return 0;if(1===c.a){var f=b.y-d.y,g=b.x-d.x,h=0,i=0;if(!e&&c.b<0||e&&c.b>=0?i=h=f>=c.b*g:(i=b.x+b.y*c.b>c.c,c.b<0&&(i=!i),i||(h=1)),!h){var j=d.x-c.region.l.x;i=c.b*(g*g-f*f)<j*f*(1+2*g/j+c.b*c.b),c.b<0&&(i=!i)}}else{var k=c.c-c.a*b.x,l=b.y-k,m=b.x-d.x,n=k-d.y;i=l*l>m*m+n*n}return"l"===a.side?i:!i},endPoint:function(a,c,d){a.ep[c]=d,a.ep[je[c]]&&b(a)},distance:function(a,b){var c=a.x-b.x,d=a.y-b.y;return Math.sqrt(c*c+d*d)}},f={list:[],insert:function(a,b,c){a.vertex=b,a.ystar=b.y+c;for(var d=0,e=f.list,g=e.length;d<g;d++){var h=e[d];if(!(a.ystar>h.ystar||a.ystar==h.ystar&&b.x>h.vertex.x))break}e.splice(d,0,a)},del:function(a){for(var b=0,c=f.list,d=c.length;b<d&&c[b]!=a;++b);c.splice(b,1)},empty:function(){return 0===f.list.length},nextEvent:function(a){for(var b=0,c=f.list,d=c.length;b<d;++b)if(c[b]==a)return c[b+1];return null},min:function(){var a=f.list[0];return{x:a.vertex.x,y:a.ystar}},extractMin:function(){return f.list.shift()}};d.init(),c.bottomSite=c.list.shift();for(var h,i,j,k,l,m,n,o,p,q,r,s,t,g=c.list.shift();;)if(f.empty()||(h=f.min()),g&&(f.empty()||g.y<h.y||g.y==h.y&&g.x<h.x))i=d.leftBound(g),j=d.right(i),n=d.rightRegion(i),s=e.bisect(n,g),m=d.createHalfEdge(s,"l"),d.insert(i,m),q=e.intersect(i,m),q&&(f.del(i),f.insert(i,q,e.distance(q,g))),i=m,m=d.createHalfEdge(s,"r"),d.insert(i,m),q=e.intersect(m,j),q&&f.insert(m,q,e.distance(q,g)),g=c.list.shift();else{if(f.empty())break;i=f.extractMin(),k=d.left(i),j=d.right(i),l=d.right(j),n=d.leftRegion(i),o=d.rightRegion(j),r=i.vertex,e.endPoint(i.edge,i.side,r),e.endPoint(j.edge,j.side,r),d.del(i),f.del(j),d.del(j),t="l",n.y>o.y&&(p=n,n=o,o=p,t="r"),s=e.bisect(n,o),m=d.createHalfEdge(s,t),d.insert(k,m),e.endPoint(s,je[t],r),q=e.intersect(k,m),q&&(f.del(k),f.insert(k,q,e.distance(q,n))),q=e.intersect(m,l),q&&f.insert(m,q,e.distance(q,n))}for(i=d.right(d.leftEnd);i!=d.rightEnd;i=d.right(i))b(i.edge)}function le(a){return a.x}function me(a){return a.y}function ne(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function oe(a,b,c,d,e,f){if(!a(b,c,d,e,f)){var g=.5*(c+e),h=.5*(d+f),i=b.nodes;i[0]&&oe(a,i[0],c,d,g,h),i[1]&&oe(a,i[1],g,d,e,h),i[2]&&oe(a,i[2],c,h,g,f),i[3]&&oe(a,i[3],g,h,e,f)}}function pe(b,c){b=a.rgb(b),c=a.rgb(c);var d=b.r,e=b.g,f=b.b,g=c.r-d,h=c.g-e,i=c.b-f;return function(a){return"#"+$a(Math.round(d+g*a))+$a(Math.round(e+h*a))+$a(Math.round(f+i*a))}}function qe(a,b){var e,c={},d={};for(e in a)e in b?c[e]=ue(a[e],b[e]):d[e]=a[e];for(e in b)e in a||(d[e]=b[e]);return function(a){for(e in c)d[e]=c[e](a);return d}}function re(a,b){return b-=a=+a,function(c){return a+b*c}}function se(a,b){var c,d,e,j,k,f=0,g=0,h=[],i=[];for(a+="",b+="",te.lastIndex=0,d=0;c=te.exec(b);++d)c.index&&h.push(b.substring(f,g=c.index)),i.push({i:h.length,x:c[0]}),h.push(null),f=te.lastIndex;for(f<b.length&&h.push(b.substring(f)),d=0,j=i.length;(c=te.exec(a))&&d<j;++d)if(k=i[d],k.x==c[0]){if(k.i)if(null==h[k.i+1])for(h[k.i-1]+=k.x,h.splice(k.i,1),e=d+1;e<j;++e)i[e].i--;else for(h[k.i-1]+=k.x+h[k.i+1],h.splice(k.i,2),e=d+1;e<j;++e)i[e].i-=2;else if(null==h[k.i+1])h[k.i]=k.x;else for(h[k.i]=k.x+h[k.i+1],h.splice(k.i+1,1),e=d+1;e<j;++e)i[e].i--;i.splice(d,1),j--,d--}else k.x=re(parseFloat(c[0]),parseFloat(k.x));for(;d<j;)k=i.pop(),null==h[k.i+1]?h[k.i]=k.x:(h[k.i]=k.x+h[k.i+1],h.splice(k.i+1,1)),j--;return 1===h.length?null==h[0]?(k=i[0].x,function(a){return k(a)+""}):function(){return b}:function(a){for(d=0;d<j;++d)h[(k=i[d]).i]=k.x(a);return h.join("")}}function ue(b,c){for(var e,d=a.interpolators.length;--d>=0&&!(e=a.interpolators[d](b,c)););return e}function ve(a,b){var h,c=[],d=[],e=a.length,f=b.length,g=Math.min(a.length,b.length);for(h=0;h<g;++h)c.push(ue(a[h],b[h]));for(;h<e;++h)d[h]=a[h];for(;h<f;++h)d[h]=b[h];return function(a){for(h=0;h<g;++h)d[h]=c[h](a);return d}}function ze(a){return function(b){return b<=0?0:b>=1?1:a(b)}}function Ae(a){return function(b){return 1-a(1-b)}}function Be(a){return function(b){return.5*(b<.5?a(2*b):2-a(2-2*b))}}function Ce(a){return a*a}function De(a){return a*a*a}function Ee(a){if(a<=0)return 0;if(a>=1)return 1;var b=a*a,c=b*a;return 4*(a<.5?c:3*(a-b)+c-.75)}function Fe(a){return function(b){return Math.pow(b,a)}}function Ge(a){return 1-Math.cos(a*ua/2)}function He(a){return Math.pow(2,10*(a-1))}function Ie(a){return 1-Math.sqrt(1-a*a)}function Je(a,b){var c;return arguments.length<2&&(b=.45),arguments.length?c=b/(2*ua)*Math.asin(1/a):(a=1,c=b/4),function(d){return 1+a*Math.pow(2,10*-d)*Math.sin(2*(d-c)*ua/b)}}function Ke(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}}function Le(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function Me(b,c){b=a.hcl(b),c=a.hcl(c);var d=b.h,e=b.c,f=b.l,g=c.h-d,h=c.c-e,i=c.l-f;return isNaN(h)&&(h=0,e=isNaN(e)?c.c:e),isNaN(g)?(g=0,d=isNaN(d)?c.h:d):g>180?g-=360:g<-180&&(g+=360),function(a){return Ia(d+g*a,e+h*a,f+i*a)+""}}function Ne(b,c){b=a.hsl(b),c=a.hsl(c);var d=b.h,e=b.s,f=b.l,g=c.h-d,h=c.s-e,i=c.l-f;return isNaN(h)&&(h=0,e=isNaN(e)?c.s:e),isNaN(g)?(g=0,d=isNaN(d)?c.h:d):g>180?g-=360:g<-180&&(g+=360),function(a){return ta(d+g*a,e+h*a,f+i*a)+""}}function Oe(b,c){b=a.lab(b),c=a.lab(c);var d=b.l,e=b.a,f=b.b,g=c.l-d,h=c.a-e,i=c.b-f;return function(a){return Qa(d+g*a,e+h*a,f+i*a)+""}}function Pe(a,b){return b-=a,function(c){return Math.round(a+b*c)}}function Qe(a){var b=[a.a,a.b],c=[a.c,a.d],d=Se(b),e=Re(b,c),f=Se(Te(c,b,-e))||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,e*=-1),this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*ya,this.translate=[a.e,a.f],this.scale=[d,f],this.skew=f?Math.atan2(e,f)*ya:0}function Re(a,b){return a[0]*b[0]+a[1]*b[1]}function Se(a){var b=Math.sqrt(Re(a,a));return b&&(a[0]/=b,a[1]/=b),b}function Te(a,b,c){return a[0]+=c*b[0],a[1]+=c*b[1],a}function Ve(b,c){var f,d=[],e=[],g=a.transform(b),h=a.transform(c),i=g.translate,j=h.translate,k=g.rotate,l=h.rotate,m=g.skew,n=h.skew,o=g.scale,p=h.scale;return i[0]!=j[0]||i[1]!=j[1]?(d.push("translate(",null,",",null,")"),e.push({i:1,x:re(i[0],j[0])},{i:3,x:re(i[1],j[1])})):j[0]||j[1]?d.push("translate("+j+")"):d.push(""),k!=l?(k-l>180?l+=360:l-k>180&&(k+=360),e.push({i:d.push(d.pop()+"rotate(",null,")")-2,x:re(k,l)})):l&&d.push(d.pop()+"rotate("+l+")"),m!=n?e.push({i:d.push(d.pop()+"skewX(",null,")")-2,x:re(m,n)}):n&&d.push(d.pop()+"skewX("+n+")"),o[0]!=p[0]||o[1]!=p[1]?(f=d.push(d.pop()+"scale(",null,",",null,")"),e.push({i:f-4,x:re(o[0],p[0])},{i:f-2,x:re(o[1],p[1])})):1==p[0]&&1==p[1]||d.push(d.pop()+"scale("+p+")"),f=e.length,function(a){for(var c,b=-1;++b<f;)d[(c=e[b]).i]=c.x(a);return d.join("")}}function We(a,b){return b=b-(a=+a)?1/(b-a):0,function(c){return(c-a)*b}}function Xe(a,b){return b=b-(a=+a)?1/(b-a):0,function(c){return Math.max(0,Math.min(1,(c-a)*b))}}function Ye(a){for(var b=a.source,c=a.target,d=$e(b,c),e=[b];b!==d;)b=b.parent,e.push(b);for(var f=e.length;c!==d;)e.splice(f,0,c),c=c.parent;return e}function Ze(a){for(var b=[],c=a.parent;null!=c;)b.push(a),a=c,c=c.parent;return b.push(a),b}function $e(a,b){if(a===b)return a;for(var c=Ze(a),d=Ze(b),e=c.pop(),f=d.pop(),g=null;e===f;)g=e,e=c.pop(),f=d.pop();return g}function _e(a){a.fixed|=2}function af(a){a.fixed&=-7}function bf(a){a.fixed|=4,a.px=a.x,a.py=a.y}function cf(a){a.fixed&=-5}function df(a,b,c){var d=0,e=0;if(a.charge=0,!a.leaf)for(var i,f=a.nodes,g=f.length,h=-1;++h<g;)i=f[h],null!=i&&(df(i,b,c),a.charge+=i.charge,d+=i.charge*i.cx,e+=i.charge*i.cy);if(a.point){a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5);var j=b*c[a.point.index];a.charge+=a.pointCharge=j,d+=j*a.point.x,e+=j*a.point.y}a.cx=d/a.charge,a.cy=e/a.charge}function gf(b,c){return a.rebind(b,c,"sort","children","value"),b.nodes=b,b.links=lf,b}function hf(a){return a.children}function jf(a){return a.value}function kf(a,b){return b.value-a.value}function lf(b){return a.merge(b.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function nf(a){return a.x}function of(a){return a.y}function pf(a,b,c){a.y0=b,a.y=c}function sf(b){return a.range(b.length)}function tf(a){for(var b=-1,c=a[0].length,d=[];++b<c;)d[b]=0;return d}function uf(a){for(var e,b=1,c=0,d=a[0][1],f=a.length;b<f;++b)(e=a[b][1])>d&&(c=b,d=e);return c}function vf(a){return a.reduce(wf,0)}function wf(a,b){return a+b[1]}function xf(a,b){return yf(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function yf(a,b){for(var c=-1,d=+a[0],e=(a[1]-d)/b,f=[];++c<=b;)f[c]=e*c+d;return f}function zf(b){return[a.min(b),a.max(b)]}function Af(a,b){return a.parent==b.parent?1:2}function Bf(a){var b=a.children;return b&&b.length?b[0]:a._tree.thread}function Cf(a){var c,b=a.children;return b&&(c=b.length)?b[c-1]:a._tree.thread}function Df(a,b){var c=a.children;if(c&&(e=c.length))for(var d,e,f=-1;++f<e;)b(d=Df(c[f],b),a)>0&&(a=d);return a}function Ef(a,b){return a.x-b.x}function Ff(a,b){return b.x-a.x}function Gf(a,b){return a.depth-b.depth}function Hf(a,b){function c(a,d){var e=a.children;if(e&&(i=e.length))for(var f,i,g=null,h=-1;++h<i;)f=e[h],c(f,g),g=f;b(a,d)}c(a,null)}function If(a){for(var f,b=0,c=0,d=a.children,e=d.length;--e>=0;)f=d[e]._tree,f.prelim+=b,f.mod+=b,b+=f.shift+(c+=f.change)}function Jf(a,b,c){a=a._tree,b=b._tree;var d=c/(b.number-a.number);a.change+=d,b.change-=d,b.shift+=c,b.prelim+=c,b.mod+=c}function Kf(a,b,c){return a._tree.ancestor.parent==b.parent?a._tree.ancestor:c}function Lf(a,b){return a.value-b.value}function Mf(a,b){var c=a._pack_next;a._pack_next=b,b._pack_prev=a,b._pack_next=c,c._pack_prev=b}function Nf(a,b){a._pack_next=b,b._pack_prev=a}function Of(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return.999*e*e>c*c+d*d}function Pf(a){function n(a){c=Math.min(a.x-a.r,c),d=Math.max(a.x+a.r,d),e=Math.min(a.y-a.r,e),f=Math.max(a.y+a.r,f)}if((b=a.children)&&(m=b.length)){var b,g,h,i,j,k,l,m,c=1/0,d=-(1/0),e=1/0,f=-(1/0);if(b.forEach(Qf),g=b[0],g.x=-g.r,g.y=0,n(g),m>1&&(h=b[1],h.x=h.r,h.y=0,n(h),m>2))for(i=b[2],Tf(g,h,i),n(i),Mf(g,i),g._pack_prev=i,Mf(i,h),h=g._pack_next,j=3;j<m;j++){Tf(g,h,i=b[j]);var o=0,p=1,q=1;for(k=h._pack_next;k!==h;k=k._pack_next,p++)if(Of(k,i)){o=1;break}if(1==o)for(l=g._pack_prev;l!==k._pack_prev&&!Of(l,i);l=l._pack_prev,q++);o?(p<q||p==q&&h.r<g.r?Nf(g,h=k):Nf(g=l,h),j--):(Mf(g,i),h=i,n(i))}var r=(c+d)/2,s=(e+f)/2,t=0;for(j=0;j<m;j++)i=b[j],i.x-=r,i.y-=s,t=Math.max(t,i.r+Math.sqrt(i.x*i.x+i.y*i.y));a.r=t,b.forEach(Rf)}}function Qf(a){a._pack_next=a._pack_prev=a}function Rf(a){delete a._pack_next,delete a._pack_prev}function Sf(a,b,c,d){var e=a.children;if(a.x=b+=d*a.x,a.y=c+=d*a.y,a.r*=d,e)for(var f=-1,g=e.length;++f<g;)Sf(e[f],b,c,d)}function Tf(a,b,c){var d=a.r+c.r,e=b.x-a.x,f=b.y-a.y;if(d&&(e||f)){var g=b.r+c.r,h=e*e+f*f;g*=g,d*=d;var i=.5+(d-g)/(2*h),j=Math.sqrt(Math.max(0,2*g*(d+h)-(d-=h)*d-g*g))/(2*h);c.x=a.x+i*e+j*f,c.y=a.y+i*f-j*e}else c.x=a.x+d,
c.y=a.y}function Uf(b){return 1+a.max(b,function(a){return a.y})}function Vf(a){return a.reduce(function(a,b){return a+b.x},0)/a.length}function Wf(a){var b=a.children;return b&&b.length?Wf(b[0]):a}function Xf(a){var c,b=a.children;return b&&(c=b.length)?Xf(b[c-1]):a}function Yf(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function Zf(a,b){var c=a.x+b[3],d=a.y+b[0],e=a.dx-b[1]-b[3],f=a.dy-b[0]-b[2];return e<0&&(c+=e/2,e=0),f<0&&(d+=f/2,f=0),{x:c,y:d,dx:e,dy:f}}function $f(a){var b=a[0],c=a[a.length-1];return b<c?[b,c]:[c,b]}function _f(a){return a.rangeExtent?a.rangeExtent():$f(a.range())}function ag(a,b,c,d){var e=c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}function bg(a,b){var g,c=0,d=a.length-1,e=a[c],f=a[d];return f<e&&(g=c,c=d,d=g,g=e,e=f,f=g),a[c]=b.floor(e),a[d]=b.ceil(f),a}function cg(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:dg}function eg(b,c,d,e){var f=[],g=[],h=0,i=Math.min(b.length,c.length)-1;for(b[i]<b[0]&&(b=b.slice().reverse(),c=c.slice().reverse());++h<=i;)f.push(d(b[h-1],b[h])),g.push(e(c[h-1],c[h]));return function(c){var d=a.bisect(b,c,1,i)-1;return g[d](f[d](c))}}function fg(a,b,c,d){function g(){var g=Math.min(a.length,b.length)>2?eg:ag,i=d?Xe:We;return e=g(a,b,i,c),f=g(b,a,i,ue),h}function h(a){return e(a)}var e,f;return h.invert=function(a){return f(a)},h.domain=function(b){return arguments.length?(a=b.map(Number),g()):a},h.range=function(a){return arguments.length?(b=a,g()):b},h.rangeRound=function(a){return h.range(a).interpolate(Pe)},h.clamp=function(a){return arguments.length?(d=a,g()):d},h.interpolate=function(a){return arguments.length?(c=a,g()):c},h.ticks=function(b){return kg(a,b)},h.tickFormat=function(b,c){return lg(a,b,c)},h.nice=function(b){return hg(a,b),g()},h.copy=function(){return fg(a,b,c,d)},g()}function gg(b,c){return a.rebind(b,c,"range","rangeRound","interpolate","clamp")}function hg(a,b){return bg(a,cg(b?jg(a,b)[2]:ig(a)))}function ig(a){var b=$f(a),c=b[1]-b[0];return Math.pow(10,Math.round(Math.log(c)/Math.LN10)-1)}function jg(a,b){var c=$f(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),f=b/d*e;return f<=.15?e*=10:f<=.35?e*=5:f<=.75&&(e*=2),c[0]=Math.ceil(c[0]/e)*e,c[1]=Math.floor(c[1]/e)*e+.5*e,c[2]=e,c}function kg(b,c){return a.range.apply(a,jg(b,c))}function lg(b,c,d){var e=-Math.floor(Math.log(jg(b,c)[2])/Math.LN10+.01);return a.format(d?d.replace(Ab,function(a,b,c,d,f,g,h,i,j,k){return[b,c,d,f,g,h,i,j||"."+(e-2*("%"===k)),k].join("")}):",."+e+"f")}function mg(b,c,d,e){function f(a){return(d?Math.log(a<0?0:a):-Math.log(a>0?0:-a))/Math.log(c)}function g(a){return d?Math.pow(c,a):-Math.pow(c,-a)}function h(a){return b(f(a))}return h.invert=function(a){return g(b.invert(a))},h.domain=function(a){return arguments.length?(d=a[0]>=0,b.domain((e=a.map(Number)).map(f)),h):e},h.base=function(a){return arguments.length?(c=+a,b.domain(e.map(f)),h):c},h.nice=function(){var a=bg(e.map(f),d?Math:og);return b.domain(a),e=a.map(g),h},h.ticks=function(){var a=$f(e),b=[],h=a[0],i=a[1],j=Math.floor(f(h)),k=Math.ceil(f(i)),l=c%1?2:c;if(isFinite(k-j)){if(d){for(;j<k;j++)for(var m=1;m<l;m++)b.push(g(j)*m);b.push(g(j))}else for(b.push(g(j));j++<k;)for(var m=l-1;m>0;m--)b.push(g(j)*m);for(j=0;b[j]<h;j++);for(k=b.length;b[k-1]>i;k--);b=b.slice(j,k)}return b},h.tickFormat=function(b,c){if(!arguments.length)return ng;arguments.length<2?c=ng:"function"!=typeof c&&(c=a.format(c));var j,e=Math.max(.1,b/h.ticks().length),i=d?(j=1e-12,Math.ceil):(j=-1e-12,Math.floor);return function(a){return a/g(i(f(a)+j))<=e?c(a):""}},h.copy=function(){return mg(b.copy(),c,d,e)},gg(h,b)}function pg(a,b,c){function f(b){return a(d(b))}var d=qg(b),e=qg(1/b);return f.invert=function(b){return e(a.invert(b))},f.domain=function(b){return arguments.length?(a.domain((c=b.map(Number)).map(d)),f):c},f.ticks=function(a){return kg(c,a)},f.tickFormat=function(a,b){return lg(c,a,b)},f.nice=function(a){return f.domain(hg(c,a))},f.exponent=function(g){return arguments.length?(d=qg(b=g),e=qg(1/b),a.domain(c.map(d)),f):b},f.copy=function(){return pg(a.copy(),b,c)},gg(f,a)}function qg(a){return function(b){return b<0?-Math.pow(-b,a):Math.pow(b,a)}}function rg(b,c){function g(a){return e[((d.get(a)||d.set(a,b.push(a)))-1)%e.length]}function h(c,d){return a.range(b.length).map(function(a){return c+d*a})}var d,e,f;return g.domain=function(a){if(!arguments.length)return b;b=[],d=new o;for(var h,e=-1,f=a.length;++e<f;)d.has(h=a[e])||d.set(h,b.push(h));return g[c.t].apply(g,c.a)},g.range=function(a){return arguments.length?(e=a,f=0,c={t:"range",a:arguments},g):e},g.rangePoints=function(a,d){arguments.length<2&&(d=0);var i=a[0],j=a[1],k=(j-i)/(Math.max(1,b.length-1)+d);return e=h(b.length<2?(i+j)/2:i+k*d/2,k),f=0,c={t:"rangePoints",a:arguments},g},g.rangeBands=function(a,d,i){arguments.length<2&&(d=0),arguments.length<3&&(i=d);var j=a[1]<a[0],k=a[j-0],l=a[1-j],m=(l-k)/(b.length-d+2*i);return e=h(k+m*i,m),j&&e.reverse(),f=m*(1-d),c={t:"rangeBands",a:arguments},g},g.rangeRoundBands=function(a,d,i){arguments.length<2&&(d=0),arguments.length<3&&(i=d);var j=a[1]<a[0],k=a[j-0],l=a[1-j],m=Math.floor((l-k)/(b.length-d+2*i)),n=l-k-(b.length-d)*m;return e=h(k+Math.round(n/2),m),j&&e.reverse(),f=Math.round(m*(1-d)),c={t:"rangeRoundBands",a:arguments},g},g.rangeBand=function(){return f},g.rangeExtent=function(){return $f(c.a[0])},g.copy=function(){return rg(b,c)},g.domain(b)}function wg(b,c){function e(){var e=0,g=c.length;for(d=[];++e<g;)d[e-1]=a.quantile(b,e/g);return f}function f(b){if(!isNaN(b=+b))return c[a.bisect(d,b)]}var d;return f.domain=function(c){return arguments.length?(b=c.filter(function(a){return!isNaN(a)}).sort(a.ascending),e()):b},f.range=function(a){return arguments.length?(c=a,e()):c},f.quantiles=function(){return d},f.invertExtent=function(a){return a=c.indexOf(a),a<0?[NaN,NaN]:[a>0?d[a-1]:b[0],a<d.length?d[a]:b[b.length-1]]},f.copy=function(){return wg(b,c)},e()}function xg(a,b,c){function f(b){return c[Math.max(0,Math.min(e,Math.floor(d*(b-a))))]}function g(){return d=c.length/(b-a),e=c.length-1,f}var d,e;return f.domain=function(c){return arguments.length?(a=+c[0],b=+c[c.length-1],g()):[a,b]},f.range=function(a){return arguments.length?(c=a,g()):c},f.invertExtent=function(b){return b=c.indexOf(b),b=b<0?NaN:b/d+a,[b,b+1/d]},f.copy=function(){return xg(a,b,c)},g()}function yg(b,c){function d(d){if(d<=d)return c[a.bisect(b,d)]}return d.domain=function(a){return arguments.length?(b=a,d):b},d.range=function(a){return arguments.length?(c=a,d):c},d.invertExtent=function(a){return a=c.indexOf(a),[b[a-1],b[a]]},d.copy=function(){return yg(b,c)},d}function zg(a){function b(a){return+a}return b.invert=b,b.domain=b.range=function(c){return arguments.length?(a=c.map(b),b):a},b.ticks=function(b){return kg(a,b)},b.tickFormat=function(b,c){return lg(a,b,c)},b.copy=function(){return zg(a)},b}function Cg(a){return a.innerRadius}function Dg(a){return a.outerRadius}function Eg(a){return a.startAngle}function Fg(a){return a.endAngle}function Gg(a){for(var b,e,f,c=-1,d=a.length;++c<d;)b=a[c],e=b[0],f=b[1]+Ag,b[0]=e*Math.cos(f),b[1]=e*Math.sin(f);return a}function Hg(a){function l(h){function x(){l.push("M",g(a(n),k),j,i(a(m.reverse()),k),"Z")}for(var q,v,w,l=[],m=[],n=[],o=-1,p=h.length,r=fb(b),s=fb(d),t=b===c?function(){return v}:fb(c),u=d===e?function(){return w}:fb(e);++o<p;)f.call(this,q=h[o],o)?(m.push([v=+r.call(this,q,o),w=+s.call(this,q,o)]),n.push([+t.call(this,q,o),+u.call(this,q,o)])):m.length&&(x(),m=[],n=[]);return m.length&&x(),l.length?l.join(""):null}var b=Gd,c=Gd,d=0,e=Hd,f=pc,g=Jd,h=g.key,i=g,j="L",k=.7;return l.x=function(a){return arguments.length?(b=c=a,l):c},l.x0=function(a){return arguments.length?(b=a,l):b},l.x1=function(a){return arguments.length?(c=a,l):c},l.y=function(a){return arguments.length?(d=e=a,l):e},l.y0=function(a){return arguments.length?(d=a,l):d},l.y1=function(a){return arguments.length?(e=a,l):e},l.defined=function(a){return arguments.length?(f=a,l):f},l.interpolate=function(a){return arguments.length?(h="function"==typeof a?g=a:(g=Id.get(a)||Jd).key,i=g.reverse||g,j=g.closed?"M":"L",l):h},l.tension=function(a){return arguments.length?(k=a,l):k},l}function Ig(a){return a.radius}function Jg(a){return[a.x,a.y]}function Kg(a){return function(){var b=a.apply(this,arguments),c=b[0],d=b[1]+Ag;return[c*Math.cos(d),c*Math.sin(d)]}}function Lg(){return 64}function Mg(){return"circle"}function Ng(a){var b=Math.sqrt(a/ua);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+"Z"}function Rg(a,b){return F(a,Sg),a.id=b,a}function Wg(a,b,c,d){var e=a.id;return $(a,"function"==typeof c?function(a,f,g){a.__transition__[e].tween.set(b,d(c.call(a,a.__data__,f,g)))}:(c=d(c),function(a){a.__transition__[e].tween.set(b,c)}))}function Xg(a){return null==a&&(a=""),function(){this.textContent=a}}function Yg(b,c,d,e){var f=b.__transition__||(b.__transition__={active:0,count:0}),g=f[d];if(!g){var h=e.time;g=f[d]={tween:new o,time:h,ease:e.ease,delay:e.delay,duration:e.duration},++f.count,a.timer(function(a){function m(a){return f.active>d?o():(f.active=d,g.event&&g.event.start.call(b,e,c),g.tween.forEach(function(a,d){(d=d.call(b,e,c))&&l.push(d)}),n(a)?1:void rb(n,0,h))}function n(a){if(f.active!==d)return o();for(var h=(a-j)/k,m=i(h),n=l.length;n>0;)l[--n].call(b,m);return h>=1?(o(),g.event&&g.event.end.call(b,e,c),1):void 0}function o(){return--f.count?delete f[d]:delete b.__transition__,1}var e=b.__data__,i=g.ease,j=g.delay,k=g.duration,l=[];return j<=a?m(a):void rb(m,j,h)},0,h)}}function _g(a,b){a.attr("transform",function(a){return"translate("+b(a)+",0)"})}function ah(a,b){a.attr("transform",function(a){return"translate(0,"+b(a)+")"})}function bh(a,b,c){if(e=[],c&&b.length>1){for(var e,i,j,d=$f(a.domain()),f=-1,g=b.length,h=(b[1]-b[0])/++c;++f<g;)for(i=c;--i>0;)(j=+b[f]-i*h)>=d[0]&&e.push(j);for(--f,i=0;++i<c&&(j=+b[f]+i*h)<d[1];)e.push(j)}return e}function gh(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function ph(a,b,c){function d(b){var c=a(b),d=f(c,1);return b-c<d-b?c:d}function e(c){return b(c=a(new eh(c-1)),1),c}function f(a,c){return b(a=new eh(+a),c),a}function g(a,d,f){var g=e(a),h=[];if(f>1)for(;g<d;)c(g)%f||h.push(new Date(+g)),b(g,1);else for(;g<d;)h.push(new Date(+g)),b(g,1);return h}function h(a,b,c){try{eh=gh;var d=new gh;return d._=a,g(d,b,c)}finally{eh=Date}}a.floor=a,a.round=d,a.ceil=e,a.offset=f,a.range=g;var i=a.utc=qh(a);return i.floor=i,i.round=qh(d),i.ceil=qh(e),i.offset=qh(f),i.range=h,a}function qh(a){return function(b,c){try{eh=gh;var d=new gh;return d._=b,a(d,c)._}finally{eh=Date}}}function rh(a,b,c,d){for(var e,f,g=0,h=b.length,i=c.length;g<h;){if(d>=i)return-1;if(e=b.charCodeAt(g++),37===e){if(f=Gh[b.charAt(g++)],!f||(d=f(a,c,d))<0)return-1}else if(e!=c.charCodeAt(d++))return-1}return d}function sh(b){return new RegExp("^(?:"+b.map(a.requote).join("|")+")","i")}function th(a){for(var b=new o,c=-1,d=a.length;++c<d;)b.set(a[c].toLowerCase(),c);return b}function uh(a,b,c){var d=a<0?"-":"",e=(d?-a:a)+"",f=e.length;return d+(f<c?new Array(c-f+1).join(b)+e:e)}function Hh(a,b,c){xh.lastIndex=0;var d=xh.exec(b.substring(c));return d?(a.w=yh.get(d[0].toLowerCase()),c+d[0].length):-1}function Ih(a,b,c){vh.lastIndex=0;var d=vh.exec(b.substring(c));return d?(a.w=wh.get(d[0].toLowerCase()),c+d[0].length):-1}function Jh(a,b,c){_h.lastIndex=0;var d=_h.exec(b.substring(c,c+1));return d?(a.w=+d[0],c+d[0].length):-1}function Kh(a,b,c){_h.lastIndex=0;var d=_h.exec(b.substring(c));return d?(a.U=+d[0],c+d[0].length):-1}function Lh(a,b,c){_h.lastIndex=0;var d=_h.exec(b.substring(c));return d?(a.W=+d[0],c+d[0].length):-1}function Mh(a,b,c){Bh.lastIndex=0;var d=Bh.exec(b.substring(c));return d?(a.m=Ch.get(d[0].toLowerCase()),c+d[0].length):-1}function Nh(a,b,c){zh.lastIndex=0;var d=zh.exec(b.substring(c));return d?(a.m=Ah.get(d[0].toLowerCase()),c+d[0].length):-1}function Oh(a,b,c){return rh(a,Fh.c.toString(),b,c)}function Ph(a,b,c){return rh(a,Fh.x.toString(),b,c)}function Qh(a,b,c){return rh(a,Fh.X.toString(),b,c)}function Rh(a,b,c){_h.lastIndex=0;var d=_h.exec(b.substring(c,c+4));return d?(a.y=+d[0],c+d[0].length):-1}function Sh(a,b,c){_h.lastIndex=0;var d=_h.exec(b.substring(c,c+2));return d?(a.y=Th(+d[0]),c+d[0].length):-1}function Th(a){return a+(a>68?1900:2e3)}function Uh(a,b,c){_h.lastIndex=0;var d=_h.exec(b.substring(c,c+2));return d?(a.m=d[0]-1,c+d[0].length):-1}function Vh(a,b,c){_h.lastIndex=0;var d=_h.exec(b.substring(c,c+2));return d?(a.d=+d[0],c+d[0].length):-1}function Wh(a,b,c){_h.lastIndex=0;var d=_h.exec(b.substring(c,c+3));return d?(a.j=+d[0],c+d[0].length):-1}function Xh(a,b,c){_h.lastIndex=0;var d=_h.exec(b.substring(c,c+2));return d?(a.H=+d[0],c+d[0].length):-1}function Yh(a,b,c){_h.lastIndex=0;var d=_h.exec(b.substring(c,c+2));return d?(a.M=+d[0],c+d[0].length):-1}function Zh(a,b,c){_h.lastIndex=0;var d=_h.exec(b.substring(c,c+2));return d?(a.S=+d[0],c+d[0].length):-1}function $h(a,b,c){_h.lastIndex=0;var d=_h.exec(b.substring(c,c+3));return d?(a.L=+d[0],c+d[0].length):-1}function ai(a,b,c){var d=bi.get(b.substring(c,c+=2).toLowerCase());return null==d?-1:(a.p=d,c)}function ci(a){var b=a.getTimezoneOffset(),c=b>0?"-":"+",d=~~(Math.abs(b)/60),e=Math.abs(b)%60;return c+uh(d,"0",2)+uh(e,"0",2)}function di(a,b,c){Dh.lastIndex=0;var d=Dh.exec(b.substring(c,c+1));return d?c+d[0].length:-1}function fi(a){return a.toISOString()}function gi(b,c,d){function e(a){return b(a)}return e.invert=function(a){return hi(b.invert(a))},e.domain=function(a){return arguments.length?(b.domain(a),e):b.domain().map(hi)},e.nice=function(a){return e.domain(bg(e.domain(),a))},e.ticks=function(d,f){var g=$f(e.domain());if("function"!=typeof d){var h=g[1]-g[0],i=h/d,j=a.bisect(li,i);if(j==li.length)return c.year(g,d);if(!j)return b.ticks(d).map(hi);i/li[j-1]<li[j]/i&&--j,d=c[j],f=d[1],d=d[0].range}return d(g[0],new Date(+g[1]+1),f)},e.tickFormat=function(){return d},e.copy=function(){return gi(b.copy(),c,d)},gg(e,b)}function hi(a){return new Date(a)}function ii(a){return function(b){for(var c=a.length-1,d=a[c];!d[1](b);)d=a[--c];return d[0](b)}}function ji(a){var b=new Date(a,0,1);return b.setFullYear(a),b}function ki(a){var b=a.getFullYear(),c=ji(b),d=ji(b+1);return b+(a-c)/(d-c)}function ti(a){var b=new Date(Date.UTC(a,0,1));return b.setUTCFullYear(a),b}function ui(a){var b=a.getUTCFullYear(),c=ti(b),d=ti(b+1);return b+(a-c)/(d-c)}function vi(a){return JSON.parse(a.responseText)}function wi(a){var c=b.createRange();return c.selectNode(b.body),c.createContextualFragment(a.responseText)}var a={version:"3.2.8"};Date.now||(Date.now=function(){return+new Date});var b=document,c=b.documentElement,d=window;try{b.createElement("div").style.setProperty("opacity",0,"")}catch(a){var e=d.Element.prototype,f=e.setAttribute,g=e.setAttributeNS,h=d.CSSStyleDeclaration.prototype,i=h.setProperty;e.setAttribute=function(a,b){f.call(this,a,b+"")},e.setAttributeNS=function(a,b,c){g.call(this,a,b,c+"")},h.setProperty=function(a,b,c){i.call(this,a,b+"",c)}}a.ascending=function(a,b){return a<b?-1:a>b?1:a>=b?0:NaN},a.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN},a.min=function(a,b){var e,f,c=-1,d=a.length;if(1===arguments.length){for(;++c<d&&!(null!=(e=a[c])&&e<=e);)e=void 0;for(;++c<d;)null!=(f=a[c])&&e>f&&(e=f)}else{for(;++c<d&&!(null!=(e=b.call(a,a[c],c))&&e<=e);)e=void 0;for(;++c<d;)null!=(f=b.call(a,a[c],c))&&e>f&&(e=f)}return e},a.max=function(a,b){var e,f,c=-1,d=a.length;if(1===arguments.length){for(;++c<d&&!(null!=(e=a[c])&&e<=e);)e=void 0;for(;++c<d;)null!=(f=a[c])&&f>e&&(e=f)}else{for(;++c<d&&!(null!=(e=b.call(a,a[c],c))&&e<=e);)e=void 0;for(;++c<d;)null!=(f=b.call(a,a[c],c))&&f>e&&(e=f)}return e},a.extent=function(a,b){var e,f,g,c=-1,d=a.length;if(1===arguments.length){for(;++c<d&&!(null!=(e=g=a[c])&&e<=e);)e=g=void 0;for(;++c<d;)null!=(f=a[c])&&(e>f&&(e=f),g<f&&(g=f))}else{for(;++c<d&&!(null!=(e=g=b.call(a,a[c],c))&&e<=e);)e=void 0;for(;++c<d;)null!=(f=b.call(a,a[c],c))&&(e>f&&(e=f),g<f&&(g=f))}return[e,g]},a.sum=function(a,b){var e,c=0,d=a.length,f=-1;if(1===arguments.length)for(;++f<d;)isNaN(e=+a[f])||(c+=e);else for(;++f<d;)isNaN(e=+b.call(a,a[f],f))||(c+=e);return c},a.mean=function(a,b){var d,c=a.length,e=0,f=-1,g=0;if(1===arguments.length)for(;++f<c;)j(d=a[f])&&(e+=(d-e)/++g);else for(;++f<c;)j(d=b.call(a,a[f],f))&&(e+=(d-e)/++g);return g?e:void 0},a.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=+a[d-1],f=c-d;return f?e+f*(a[d]-e):e},a.median=function(b,c){return arguments.length>1&&(b=b.map(c)),b=b.filter(j),b.length?a.quantile(b.sort(a.ascending),.5):void 0},a.bisector=function(a){return{left:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);d<e;){var f=d+e>>>1;a.call(b,b[f],f)<c?d=f+1:e=f}return d},right:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);d<e;){var f=d+e>>>1;c<a.call(b,b[f],f)?e=f:d=f+1}return d}}};var k=a.bisector(function(a){return a});a.bisectLeft=k.left,a.bisect=a.bisectRight=k.right,a.shuffle=function(a){for(var c,d,b=a.length;b;)d=Math.random()*b--|0,c=a[b],a[b]=a[d],a[d]=c;return a},a.permute=function(a,b){for(var c=b.length,d=new Array(c);c--;)d[c]=a[b[c]];return d},a.zip=function(){if(!(f=arguments.length))return[];for(var b=-1,c=a.min(arguments,l),d=new Array(c);++b<c;)for(var f,e=-1,g=d[b]=new Array(f);++e<f;)g[e]=arguments[e][b];return d},a.transpose=function(b){return a.zip.apply(a,b)},a.keys=function(a){var b=[];for(var c in a)b.push(c);return b},a.values=function(a){var b=[];for(var c in a)b.push(a[c]);return b},a.entries=function(a){var b=[];for(var c in a)b.push({key:c,value:a[c]});return b},a.merge=function(a){return Array.prototype.concat.apply([],a)},a.range=function(a,b,c){if(arguments.length<3&&(c=1,arguments.length<2&&(b=a,a=0)),(b-a)/c===1/0)throw new Error("infinite range");var g,d=[],e=m(Math.abs(c)),f=-1;if(a*=e,b*=e,c*=e,c<0)for(;(g=a+c*++f)>b;)d.push(g/e);else for(;(g=a+c*++f)<b;)d.push(g/e);return d},a.map=function(a){var b=new o;if(a instanceof o)a.forEach(function(a,c){b.set(a,c)});else for(var c in a)b.set(c,a[c]);return b},n(o,{has:function(a){return p+a in this},get:function(a){return this[p+a]},set:function(a,b){return this[p+a]=b},remove:function(a){return a=p+a,a in this&&delete this[a]},keys:function(){var a=[];return this.forEach(function(b){a.push(b)}),a},values:function(){var a=[];return this.forEach(function(b,c){a.push(c)}),a},entries:function(){var a=[];return this.forEach(function(b,c){a.push({key:b,value:c})}),a},forEach:function(a){for(var b in this)b.charCodeAt(0)===q&&a.call(this,b.substring(1),this[b])}});var p="\0",q=p.charCodeAt(0);a.nest=function(){function g(a,d,h){if(h>=c.length)return f?f.call(b,d):e?d.sort(e):d;for(var l,m,n,q,i=-1,j=d.length,k=c[h++],p=new o;++i<j;)(q=p.get(l=k(m=d[i])))?q.push(m):p.set(l,[m]);return a?(m=a(),n=function(b,c){m.set(b,g(a,c,h))}):(m={},n=function(b,c){m[b]=g(a,c,h)}),p.forEach(n),m}function h(a,b){if(b>=c.length)return a;var e=[],f=d[b++];return a.forEach(function(a,c){e.push({key:a,values:h(c,b)})}),f?e.sort(function(a,b){return f(a.key,b.key)}):e}var e,f,b={},c=[],d=[];return b.map=function(a,b){return g(b,a,0)},b.entries=function(b){return h(g(a.map,b,0),0)},b.key=function(a){return c.push(a),b},b.sortKeys=function(a){return d[c.length-1]=a,b},b.sortValues=function(a){return e=a,b},b.rollup=function(a){return f=a,b},b},a.set=function(a){var b=new r;if(a)for(var c=0,d=a.length;c<d;++c)b.add(a[c]);return b},n(r,{has:function(a){return p+a in this},add:function(a){return this[p+a]=!0,a},remove:function(a){return a=p+a,a in this&&delete this[a]},values:function(){var a=[];return this.forEach(function(b){a.push(b)}),a},forEach:function(a){for(var b in this)b.charCodeAt(0)===q&&a.call(this,b.substring(1))}}),a.behavior={},a.rebind=function(a,b){for(var e,c=1,d=arguments.length;++c<d;)a[e=arguments[c]]=s(a,b,b[e]);return a};var u=["webkit","ms","moz","Moz","o","O"],v=x;try{v(c.childNodes)[0].nodeType}catch(a){v=w}a.dispatch=function(){for(var a=new z,b=-1,c=arguments.length;++b<c;)a[arguments[b]]=A(a);return a},z.prototype.on=function(a,b){var c=a.indexOf("."),d="";if(c>=0&&(d=a.substring(c+1),a=a.substring(0,c)),a)return arguments.length<2?this[a].on(d):this[a].on(d,b);if(2===arguments.length){if(null==b)for(a in this)this.hasOwnProperty(a)&&this[a].on(d,null);return this}},a.event=null,a.requote=function(a){return a.replace(E,"\\$&")};var E=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,F={}.__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]},H=function(a,b){return b.querySelector(a)},I=function(a,b){return b.querySelectorAll(a)},J=c[t(c,"matchesSelector")],K=function(a,b){return J.call(a,b)};"function"==typeof Sizzle&&(H=function(a,b){return Sizzle(a,b)[0]||null},I=function(a,b){return Sizzle.uniqueSort(Sizzle(a,b))},K=Sizzle.matchesSelector),a.selection=function(){return ca};var L=a.selection.prototype=[];L.select=function(a){var c,d,e,f,b=[];a=M(a);for(var g=-1,h=this.length;++g<h;){b.push(c=[]),c.parentNode=(e=this[g]).parentNode;for(var i=-1,j=e.length;++i<j;)(f=e[i])?(c.push(d=a.call(f,f.__data__,i,g)),d&&"__data__"in f&&(d.__data__=f.__data__)):c.push(null)}return G(b)},L.selectAll=function(a){var c,d,b=[];a=N(a);for(var e=-1,f=this.length;++e<f;)for(var g=this[e],h=-1,i=g.length;++h<i;)(d=g[h])&&(b.push(c=v(a.call(d,d.__data__,h,e))),c.parentNode=d);return G(b)};var O={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};a.ns={prefix:O,qualify:function(a){var b=a.indexOf(":"),c=a;return b>=0&&(c=a.substring(0,b),a=a.substring(b+1)),O.hasOwnProperty(c)?{space:O[c],local:a}:a}},L.attr=function(b,c){if(arguments.length<2){if("string"==typeof b){var d=this.node();return b=a.ns.qualify(b),b.local?d.getAttributeNS(b.space,b.local):d.getAttribute(b)}for(c in b)this.each(P(c,b[c]));return this}return this.each(P(b,c))},L.classed=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node(),d=(a=a.trim().split(/^|\s+/g)).length,e=-1;if(b=c.classList){for(;++e<d;)if(!b.contains(a[e]))return!1}else for(b=c.getAttribute("class");++e<d;)if(!R(a[e]).test(b))return!1;return!0}for(b in a)this.each(S(b,a[b]));return this}return this.each(S(a,b))},L.style=function(a,b,c){var e=arguments.length;if(e<3){if("string"!=typeof a){e<2&&(b="");for(c in a)this.each(U(c,a[c],b));return this}if(e<2)return d.getComputedStyle(this.node(),null).getPropertyValue(a);c=""}return this.each(U(a,b,c))},L.property=function(a,b){if(arguments.length<2){if("string"==typeof a)return this.node()[a];for(b in a)this.each(V(b,a[b]));return this}return this.each(V(a,b))},L.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent},L.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML},L.append=function(a){return a=W(a),this.select(function(){return this.appendChild(a.apply(this,arguments))})},L.insert=function(a,b){return a=W(a),b=M(b),this.select(function(){return this.insertBefore(a.apply(this,arguments),b.apply(this,arguments))})},L.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})},L.data=function(a,b){function g(a,c){var d,n,p,e=a.length,f=c.length,g=Math.min(e,f),k=new Array(f),l=new Array(f),m=new Array(e);if(b){var t,q=new o,r=new o,s=[];for(d=-1;++d<e;)t=b.call(n=a[d],n.__data__,d),q.has(t)?m[d]=n:q.set(t,n),s.push(t);for(d=-1;++d<f;)t=b.call(c,p=c[d],d),(n=q.get(t))?(k[d]=n,n.__data__=p):r.has(t)||(l[d]=X(p)),r.set(t,p),q.remove(t);for(d=-1;++d<e;)q.has(s[d])&&(m[d]=a[d])}else{for(d=-1;++d<g;)n=a[d],p=c[d],n?(n.__data__=p,k[d]=n):l[d]=X(p);for(;d<f;++d)l[d]=X(c[d]);for(;d<e;++d)m[d]=a[d]}l.update=k,l.parentNode=k.parentNode=m.parentNode=a.parentNode,h.push(l),i.push(k),j.push(m)}var e,f,c=-1,d=this.length;if(!arguments.length){for(a=new Array(d=(e=this[0]).length);++c<d;)(f=e[c])&&(a[c]=f.__data__);return a}var h=_([]),i=G([]),j=G([]);if("function"==typeof a)for(;++c<d;)g(e=this[c],a.call(e,e.parentNode.__data__,c));else for(;++c<d;)g(e=this[c],a);return i.enter=function(){return h},i.exit=function(){return j},i},L.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")},L.filter=function(a){var c,d,e,b=[];"function"!=typeof a&&(a=Y(a));for(var f=0,g=this.length;f<g;f++){b.push(c=[]),c.parentNode=(d=this[f]).parentNode;for(var h=0,i=d.length;h<i;h++)(e=d[h])&&a.call(e,e.__data__,h)&&c.push(e)}return G(b)},L.order=function(){for(var a=-1,b=this.length;++a<b;)for(var f,c=this[a],d=c.length-1,e=c[d];--d>=0;)(f=c[d])&&(e&&e!==f.nextSibling&&e.parentNode.insertBefore(f,e),e=f);return this},L.sort=function(a){a=Z.apply(this,arguments);for(var b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()},L.each=function(a){return $(this,function(b,c,d){a.call(b,b.__data__,c,d)})},L.call=function(a){var b=v(arguments);return a.apply(b[0]=this,b),this},L.empty=function(){return!this.node()},L.node=function(){for(var a=0,b=this.length;a<b;a++)for(var c=this[a],d=0,e=c.length;d<e;d++){var f=c[d];if(f)return f}return null},L.size=function(){var a=0;return this.each(function(){++a}),a};var aa=[];a.selection.enter=_,a.selection.enter.prototype=aa,aa.append=L.append,aa.empty=L.empty,aa.node=L.node,aa.call=L.call,aa.size=L.size,aa.select=function(a){for(var c,d,e,f,g,b=[],h=-1,i=this.length;++h<i;){e=(f=this[h]).update,b.push(c=[]),c.parentNode=f.parentNode;for(var j=-1,k=f.length;++j<k;)(g=f[j])?(c.push(e[j]=d=a.call(f.parentNode,g.__data__,j,h)),d.__data__=g.__data__):c.push(null)}return G(b)},aa.insert=function(a,b){return arguments.length<2&&(b=ba(this)),L.insert.call(this,a,b)},L.transition=function(){for(var c,d,a=Ug||++Tg,b=[],e=Vg||{time:Date.now(),ease:Ee,delay:0,duration:250},f=-1,g=this.length;++f<g;){b.push(c=[]);for(var h=this[f],i=-1,j=h.length;++i<j;)(d=h[i])&&Yg(d,i,a,e),c.push(d)}return Rg(b,a)},a.select=function(a){var d=["string"==typeof a?H(a,b):a];return d.parentNode=c,G([d])},a.selectAll=function(a){var d=v("string"==typeof a?I(a,b):a);return d.parentNode=c,G([d])};var ca=a.select(c);L.on=function(a,b,c){var d=arguments.length;if(d<3){if("string"!=typeof a){d<2&&(b=!1);for(c in a)this.each(da(c,a[c],b));return this}if(d<2)return(d=this.node()["__on"+a])&&d._;c=!1}return this.each(da(a,b,c))};var ea=a.map({mouseenter:"mouseover",mouseleave:"mouseout"});ea.forEach(function(a){"on"+a in b&&ea.remove(a)});var ha=t(c.style,"userSelect"),ia=0;a.mouse=function(a){return la(a,C())};var ka=/WebKit/.test(d.navigator.userAgent)?-1:0;a.touches=function(a,b){return arguments.length<2&&(b=C().touches),b?v(b).map(function(b){var c=la(a,b);return c.identifier=b.identifier,c}):[]},a.behavior.drag=function(){function g(){this.on("mousedown.drag",e).on("touchstart.drag",f)}function h(){return a.event.changedTouches[0].identifier}function i(b,c){return a.touches(b).filter(function(a){return a.identifier===c})[0]}function j(e,f,g,h){return function(){function t(){if(!j)return u();var a=f(j,m),b=a[0]-o[0],c=a[1]-o[1];p|=b|c,o=a,k({type:"drag",x:a[0]+q[0],y:a[1]+q[1],dx:b,dy:c})}function u(){r.on(g+"."+n,null).on(h+"."+n,null),s(p&&a.event.target===l),k({type:"dragend"})}var q,i=this,j=i.parentNode,k=b.of(i,arguments),l=a.event.target,m=e(),n=null==m?"drag":"drag-"+m,o=f(j,m),p=0,r=a.select(d).on(g+"."+n,t).on(h+"."+n,u),s=ja();c?(q=c.apply(i,arguments),q=[q.x-o[0],q.y-o[1]]):q=[0,0],k({type:"dragstart"})}}var b=D(g,"drag","dragstart","dragend"),c=null,e=j(y,a.mouse,"mousemove","mouseup"),f=j(h,i,"touchmove","touchend");return g.origin=function(a){return arguments.length?(c=a,g):c},a.rebind(g,b,"on")},a.behavior.zoom=function(){function s(){this.on(g,z).on(oa+".zoom",C).on(h,E).on("dblclick.zoom",F).on(j,A)}function t(a){return[(a[0]-b[0])/e,(a[1]-b[1])/e]}function u(a){return[a[0]*e+b[0],a[1]*e+b[1]]}function v(a){e=Math.max(f[0],Math.min(f[1],a))}function w(a,c){c=u(c),b[0]+=a[0]-c[0],b[1]+=a[1]-c[1]}function x(){p&&p.domain(o.range().map(function(a){return(a-b[0])/e}).map(o.invert)),r&&r.domain(q.range().map(function(a){return(a-b[1])/e}).map(q.invert))}function y(a){x(),a({type:"zoom",scale:e,translate:b})}function z(){function l(){f=1,w(a.mouse(b),j),y(c)}function m(){g.on(h,d===b?E:null).on(i,null),k(f&&a.event.target===e)}var b=this,c=n.of(b,arguments),e=a.event.target,f=0,g=a.select(d).on(h,l).on(i,m),j=t(a.mouse(b)),k=ja()}function A(){function r(){var c=a.touches(b);return i=e,f={},c.forEach(function(a){f[a.identifier]=t(a)}),c}function s(){var a=Date.now(),b=r();if(1===b.length){if(a-m<500){var d=b[0],g=f[d.identifier];v(2*e),w(d,g),B(),y(c)}m=a}else if(b.length>1){var d=b[0],i=b[1],j=d[0]-i[0],k=d[1]-i[1];h=j*j+k*k}}function u(){var d=a.touches(b),e=d[0],g=f[e.identifier];if(j=d[1]){var j,k=f[j.identifier],l=a.event.scale;if(null==l){var n=(n=j[0]-e[0])*n+(n=j[1]-e[1])*n;l=h&&Math.sqrt(n/h)}e=[(e[0]+j[0])/2,(e[1]+j[1])/2],g=[(g[0]+k[0])/2,(g[1]+k[1])/2],v(l*i)}m=null,w(e,g),y(c)}function x(){a.event.touches.length?r():(o.on(k,null).on(l,null),p.on(g,z).on(j,A),q())}var f,i,b=this,c=n.of(b,arguments),h=0,o=a.select(d).on(k,u).on(l,x),p=a.select(b).on(g,null).on(j,s),q=ja();s()}function C(){B(),c||(c=t(a.mouse(this))),v(Math.pow(2,.002*na())*e),w(a.mouse(this),c),y(n.of(this,arguments))}function E(){c=null}function F(){var b=a.mouse(this),c=t(b),d=Math.log(e)/Math.LN2;v(Math.pow(2,a.event.shiftKey?Math.ceil(d)-1:Math.floor(d)+1)),w(b,c),y(n.of(this,arguments))}var c,m,o,p,q,r,b=[0,0],e=1,f=ma,g="mousedown.zoom",h="mousemove.zoom",i="mouseup.zoom",j="touchstart.zoom",k="touchmove.zoom",l="touchend.zoom",n=D(s,"zoom");return s.translate=function(a){return arguments.length?(b=a.map(Number),x(),s):b},s.scale=function(a){return arguments.length?(e=+a,x(),s):e},s.scaleExtent=function(a){return arguments.length?(f=null==a?ma:a.map(Number),s):f},s.x=function(a){return arguments.length?(p=a,o=a.copy(),b=[0,0],e=1,s):p},s.y=function(a){return arguments.length?(r=a,q=a.copy(),b=[0,0],e=1,s):r},a.rebind(s,n,"on")};var na,ma=[0,1/0],oa="onwheel"in b?(na=function(){return-a.event.deltaY*(a.event.deltaMode?120:1)},"wheel"):"onmousewheel"in b?(na=function(){return a.event.wheelDelta},"mousewheel"):(na=function(){return-a.event.detail},"MozMousePixelScroll");pa.prototype.toString=function(){return this.rgb()+""},a.hsl=function(a,b,c){return 1===arguments.length?a instanceof ra?qa(a.h,a.s,a.l):_a(""+a,ab,qa):qa(+a,+b,+c)};var sa=ra.prototype=new pa;sa.brighter=function(a){return a=Math.pow(.7,arguments.length?a:1),qa(this.h,this.s,this.l/a)},sa.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),qa(this.h,this.s,a*this.l)},sa.rgb=function(){return ta(this.h,this.s,this.l)};var ua=Math.PI,va=1e-6,wa=va*va,xa=ua/180,ya=180/ua;a.hcl=function(b,c,d){return 1===arguments.length?b instanceof Ga?Fa(b.h,b.c,b.l):b instanceof Ka?Ra(b.l,b.a,b.b):Ra((b=bb((b=a.rgb(b)).r,b.g,b.b)).l,b.a,b.b):Fa(+b,+c,+d)};var Ha=Ga.prototype=new pa;Ha.brighter=function(a){return Fa(this.h,this.c,Math.min(100,this.l+La*(arguments.length?a:1)))},Ha.darker=function(a){return Fa(this.h,this.c,Math.max(0,this.l-La*(arguments.length?a:1)))},Ha.rgb=function(){return Ia(this.h,this.c,this.l).rgb()},a.lab=function(b,c,d){return 1===arguments.length?b instanceof Ka?Ja(b.l,b.a,b.b):b instanceof Ga?Ia(b.l,b.c,b.h):bb((b=a.rgb(b)).r,b.g,b.b):Ja(+b,+c,+d)};var La=18,Ma=.95047,Na=1,Oa=1.08883,Pa=Ka.prototype=new pa;Pa.brighter=function(a){return Ja(Math.min(100,this.l+La*(arguments.length?a:1)),this.a,this.b)},Pa.darker=function(a){return Ja(Math.max(0,this.l-La*(arguments.length?a:1)),this.a,this.b)},Pa.rgb=function(){return Qa(this.l,this.a,this.b);
},a.rgb=function(a,b,c){return 1===arguments.length?a instanceof Ya?Xa(a.r,a.g,a.b):_a(""+a,Xa,ta):Xa(~~a,~~b,~~c)};var Za=Ya.prototype=new pa;Za.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b,e=30;return b||c||d?(b&&b<e&&(b=e),c&&c<e&&(c=e),d&&d<e&&(d=e),Xa(Math.min(255,~~(b/a)),Math.min(255,~~(c/a)),Math.min(255,~~(d/a)))):Xa(e,e,e)},Za.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),Xa(~~(a*this.r),~~(a*this.g),~~(a*this.b))},Za.hsl=function(){return ab(this.r,this.g,this.b)},Za.toString=function(){return"#"+$a(this.r)+$a(this.g)+$a(this.b)};var eb=a.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});eb.forEach(function(a,b){eb.set(a,Va(b))}),a.functor=fb,a.xhr=hb(gb),a.dsv=function(b,c){function f(b,d,e){arguments.length<3&&(e=d,d=null);var f=a.xhr(b,c,e);return f.row=function(a){return arguments.length?f.response(null==(d=a)?g:h(a)):d},f.row(d)}function g(a){return f.parse(a.responseText)}function h(a){return function(b){return f.parse(b.responseText,a)}}function i(a){return a.map(j).join(b)}function j(a){return d.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var d=new RegExp('["'+b+"\n]"),e=b.charCodeAt(0);return f.parse=function(a,b){var c;return f.parseRows(a,function(a,d){if(c)return c(a,d-1);var e=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");c=b?function(a,c){return b(e(a),c)}:e})},f.parseRows=function(a,b){function l(){if(h>=g)return d;if(k)return k=!1,c;var b=h;if(34===a.charCodeAt(b)){for(var f=b;f++<g;)if(34===a.charCodeAt(f)){if(34!==a.charCodeAt(f+1))break;++f}h=f+2;var i=a.charCodeAt(f+1);return 13===i?(k=!0,10===a.charCodeAt(f+2)&&++h):10===i&&(k=!0),a.substring(b+1,f).replace(/""/g,'"')}for(;h<g;){var i=a.charCodeAt(h++),j=1;if(10===i)k=!0;else if(13===i)k=!0,10===a.charCodeAt(h)&&(++h,++j);else if(i!==e)continue;return a.substring(b,h-j)}return a.substring(b)}for(var j,k,c={},d={},f=[],g=a.length,h=0,i=0;(j=l())!==d;){for(var m=[];j!==c&&j!==d;)m.push(j),j=l();b&&!(m=b(m,i++))||f.push(m)}return f},f.format=function(a){if(Array.isArray(a[0]))return f.formatRows(a);var c=new r,d=[];return a.forEach(function(a){for(var b in a)c.has(b)||d.push(c.add(b))}),[d.map(j).join(b)].concat(a.map(function(a){return d.map(function(b){return j(a[b])}).join(b)})).join("\n")},f.formatRows=function(a){return a.map(i).join("\n")},f},a.csv=a.dsv(",","text/csv"),a.tsv=a.dsv(" ","text/tab-separated-values");var kb,lb,mb,nb,ob,pb=d[t(d,"requestAnimationFrame")]||function(a){setTimeout(a,17)};a.timer=function(a,b,c){var d=arguments.length;d<2&&(b=0),d<3&&(c=Date.now());var e=c+b,f={callback:a,time:e,next:null};lb?lb.next=f:kb=f,lb=f,mb||(nb=clearTimeout(nb),mb=1,pb(qb))},a.timer.flush=function(){sb(),tb()};var ub=".",vb=",",wb=[3,3],xb="$",yb=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"].map(zb);a.formatPrefix=function(b,c){var d=0;return b&&(b<0&&(b*=-1),c&&(b=a.round(b,Cb(b,c))),d=1+Math.floor(1e-12+Math.log(b)/Math.LN10),d=Math.max(-24,Math.min(24,3*Math.floor((d<=0?d+1:d-1)/3)))),yb[8+d/3]},a.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)},a.format=function(b){var c=Ab.exec(b),d=c[1]||" ",e=c[2]||">",f=c[3]||"",g=c[4]||"",h=c[5],i=+c[6],j=c[7],k=c[8],l=c[9],m=1,n="",o=!1;switch(k&&(k=+k.substring(1)),(h||"0"===d&&"="===e)&&(h=d="0",e="=",j&&(i-=Math.floor((i-1)/4))),l){case"n":j=!0,l="g";break;case"%":m=100,n="%",l="f";break;case"p":m=100,n="%",l="r";break;case"b":case"o":case"x":case"X":"#"===g&&(g="0"+l.toLowerCase());case"c":case"d":o=!0,k=0;break;case"s":m=-1,l="r"}"#"===g?g="":"$"===g&&(g=xb),"r"!=l||k||(l="g"),null!=k&&("g"==l?k=Math.max(1,Math.min(21,k)):"e"!=l&&"f"!=l||(k=Math.max(0,Math.min(20,k)))),l=Bb.get(l)||Db;var p=h&&j;return function(b){if(o&&b%1)return"";var c=b<0||0===b&&1/b<0?(b=-b,"-"):f;if(m<0){var q=a.formatPrefix(b,k);b=q.scale(b),n=q.symbol}else b*=m;b=l(b,k);var r=b.lastIndexOf("."),s=r<0?b:b.substring(0,r),t=r<0?"":ub+b.substring(r+1);!h&&j&&(s=Eb(s));var u=g.length+s.length+t.length+(p?0:c.length),v=u<i?new Array(u=i-u+1).join(d):"";return p&&(s=Eb(v+s)),c+=g,b=s+t,("<"===e?c+b+v:">"===e?v+c+b:"^"===e?v.substring(0,u>>=1)+c+b+v.substring(u):c+(p?b:v+b))+n}};var Ab=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Bb=a.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(b,c){return(b=a.round(b,Cb(b,c))).toFixed(Math.max(0,Math.min(20,Cb(b*(1+1e-15),c))))}}),Eb=gb;if(wb){var Fb=wb.length;Eb=function(a){for(var b=a.length,c=[],d=0,e=wb[0];b>0&&e>0;)c.push(a.substring(b-=e,b+e)),e=wb[d=(d+1)%Fb];return c.reverse().join(vb)}}a.geo={},Gb.prototype={s:0,t:0,add:function(a){Ib(a,this.t,Hb),Ib(Hb.s,this.s,this),this.s?this.t+=Hb.t:this.s=Hb.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Hb=new Gb;a.geo.stream=function(a,b){a&&Kb.hasOwnProperty(a.type)?Kb[a.type](a,b):Jb(a,b)};var Kb={Feature:function(a,b){Jb(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;++d<e;)Jb(c[d].geometry,b)}},Lb={Sphere:function(a,b){b.sphere()},Point:function(a,b){var c=a.coordinates;b.point(c[0],c[1])},MultiPoint:function(a,b){for(var f,c=a.coordinates,d=-1,e=c.length;++d<e;)f=c[d],b.point(f[0],f[1])},LineString:function(a,b){Mb(a.coordinates,b,0)},MultiLineString:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)Mb(c[d],b,0)},Polygon:function(a,b){Nb(a.coordinates,b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)Nb(c[d],b)},GeometryCollection:function(a,b){for(var c=a.geometries,d=-1,e=c.length;++d<e;)Jb(c[d],b)}};a.geo.area=function(b){return Ob=0,a.geo.stream(b,Qb),Ob};var Ob,Pb=new Gb,Qb={sphere:function(){Ob+=4*ua},point:y,lineStart:y,lineEnd:y,polygonStart:function(){Pb.reset(),Qb.lineStart=Rb},polygonEnd:function(){var a=2*Pb;Ob+=a<0?4*ua+a:a,Qb.lineStart=Qb.lineEnd=Qb.point=y}};a.geo.bounds=function(){function n(a,f){k.push(l=[b=a,d=a]),f<c&&(c=f),f>e&&(e=f)}function o(a,g){var h=Sb([a*xa,g*xa]);if(i){var j=Ub(i,h),k=[j[1],-j[0],0],l=Ub(k,j);Xb(l),l=Yb(l);var m=a-f,o=m>0?1:-1,p=l[0]*ya*o,q=Math.abs(m)>180;if(q^(o*f<p&&p<o*a)){var r=l[1]*ya;r>e&&(e=r)}else if(p=(p+360)%360-180,q^(o*f<p&&p<o*a)){var r=-l[1]*ya;r<c&&(c=r)}else g<c&&(c=g),g>e&&(e=g);q?a<f?u(b,a)>u(b,d)&&(d=a):u(a,d)>u(b,d)&&(b=a):d>=b?(a<b&&(b=a),a>d&&(d=a)):a>f?u(b,a)>u(b,d)&&(d=a):u(a,d)>u(b,d)&&(b=a)}else n(a,g);i=h,f=a}function p(){m.point=o}function q(){l[0]=b,l[1]=d,m.point=n,i=null}function r(a,b){if(i){var c=a-f;j+=Math.abs(c)>180?c+(c>0?360:-360):c}else g=a,h=b;Qb.point(a,b),o(a,b)}function s(){Qb.lineStart()}function t(){r(g,h),Qb.lineEnd(),Math.abs(j)>va&&(b=-(d=180)),l[0]=b,l[1]=d,i=null}function u(a,b){return(b-=a)<0?b+360:b}function v(a,b){return a[0]-b[0]}function w(a,b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a}var b,c,d,e,f,g,h,i,j,k,l,m={point:n,lineStart:p,lineEnd:q,polygonStart:function(){m.point=r,m.lineStart=s,m.lineEnd=t,j=0,Qb.polygonStart()},polygonEnd:function(){Qb.polygonEnd(),m.point=n,m.lineStart=p,m.lineEnd=q,Pb<0?(b=-(d=180),c=-(e=90)):j>va?e=90:j<-va&&(c=-90),l[0]=b,l[1]=d}};return function(f){e=d=-(b=c=1/0),k=[],a.geo.stream(f,m);var g=k.length;if(g){k.sort(v);for(var j,h=1,i=k[0],n=[i];h<g;++h)j=k[h],w(j[0],i)||w(j[1],i)?(u(i[0],j[1])>u(i[0],i[1])&&(i[1]=j[1]),u(j[0],i[1])>u(i[0],i[1])&&(i[0]=j[0])):n.push(i=j);for(var p,j,o=-(1/0),g=n.length-1,h=0,i=n[g];h<=g;i=j,++h)j=n[h],(p=u(i[1],j[0]))>o&&(o=p,b=j[0],d=i[1])}return k=l=null,b===1/0||c===1/0?[[NaN,NaN],[NaN,NaN]]:[[b,c],[d,e]]}}(),a.geo.centroid=function(b){$b=_b=ac=bc=cc=dc=ec=fc=gc=hc=ic=0,a.geo.stream(b,jc);var c=gc,d=hc,e=ic,f=c*c+d*d+e*e;return f<wa&&(c=dc,d=ec,e=fc,_b<va&&(c=ac,d=bc,e=cc),f=c*c+d*d+e*e,f<wa)?[NaN,NaN]:[Math.atan2(d,c)*ya,Ba(e/Math.sqrt(f))*ya]};var $b,_b,ac,bc,cc,dc,ec,fc,gc,hc,ic,jc={sphere:y,point:kc,lineStart:mc,lineEnd:nc,polygonStart:function(){jc.lineStart=oc},polygonEnd:function(){jc.lineStart=mc}},xc=sc(pc,yc,Ac,Cc),Bc=[-ua,0],Ec=1e9;(a.geo.conicEqualArea=function(){return Ic(Jc)}).raw=Jc,a.geo.albers=function(){return a.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},a.geo.albersUsa=function(){function j(a){var b=a[0],c=a[1];return e=null,g(b,c),e||(h(b,c),e)||i(b,c),e}var e,g,h,i,b=a.geo.albers(),c=a.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),d=a.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),f={point:function(a,b){e=[a,b]}};return j.invert=function(a){var e=b.scale(),f=b.translate(),g=(a[0]-f[0])/e,h=(a[1]-f[1])/e;return(h>=.12&&h<.234&&g>=-.425&&g<-.214?c:h>=.166&&h<.234&&g>=-.214&&g<-.115?d:b).invert(a)},j.stream=function(a){var e=b.stream(a),f=c.stream(a),g=d.stream(a);return{point:function(a,b){e.point(a,b),f.point(a,b),g.point(a,b)},sphere:function(){e.sphere(),f.sphere(),g.sphere()},lineStart:function(){e.lineStart(),f.lineStart(),g.lineStart()},lineEnd:function(){e.lineEnd(),f.lineEnd(),g.lineEnd()},polygonStart:function(){e.polygonStart(),f.polygonStart(),g.polygonStart()},polygonEnd:function(){e.polygonEnd(),f.polygonEnd(),g.polygonEnd()}}},j.precision=function(a){return arguments.length?(b.precision(a),c.precision(a),d.precision(a),j):b.precision()},j.scale=function(a){return arguments.length?(b.scale(a),c.scale(.35*a),d.scale(a),j.translate(b.translate())):b.scale()},j.translate=function(a){if(!arguments.length)return b.translate();var e=b.scale(),k=+a[0],l=+a[1];return g=b.translate(a).clipExtent([[k-.455*e,l-.238*e],[k+.455*e,l+.238*e]]).stream(f).point,h=c.translate([k-.307*e,l+.201*e]).clipExtent([[k-.425*e+va,l+.12*e+va],[k-.214*e-va,l+.234*e-va]]).stream(f).point,i=d.translate([k-.205*e,l+.212*e]).clipExtent([[k-.214*e+va,l+.166*e+va],[k-.115*e-va,l+.234*e-va]]).stream(f).point,j},j.scale(1070)};var Kc,Lc,Oc,Pc,Qc,Rc,Mc={point:y,lineStart:y,lineEnd:y,polygonStart:function(){Lc=0,Mc.lineStart=Nc},polygonEnd:function(){Mc.lineStart=Mc.lineEnd=Mc.point=y,Kc+=Math.abs(Lc/2)}},Sc={point:Tc,lineStart:y,lineEnd:y,polygonStart:y,polygonEnd:y},Wc={point:Xc,lineStart:Yc,lineEnd:Zc,polygonStart:function(){Wc.lineStart=$c},polygonEnd:function(){Wc.point=Xc,Wc.lineStart=Yc,Wc.lineEnd=Zc}};a.geo.path=function(){function h(c){return c&&("function"==typeof b&&f.pointRadius(+b.apply(this,arguments)),g&&g.valid||(g=e(f)),a.geo.stream(c,g)),f.result()}function i(){return g=null,h}var c,d,e,f,g,b=4.5;return h.area=function(b){return Kc=0,a.geo.stream(b,e(Mc)),Kc},h.centroid=function(b){return ac=bc=cc=dc=ec=fc=gc=hc=ic=0,a.geo.stream(b,e(Wc)),ic?[gc/ic,hc/ic]:fc?[dc/fc,ec/fc]:cc?[ac/cc,bc/cc]:[NaN,NaN]},h.bounds=function(b){return Qc=Rc=-(Oc=Pc=1/0),a.geo.stream(b,e(Sc)),[[Oc,Pc],[Qc,Rc]]},h.projection=function(a){return arguments.length?(e=(c=a)?a.stream||bd(a):gb,i()):c},h.context=function(a){return arguments.length?(f=null==(d=a)?new Uc:new _c(a),"function"!=typeof b&&f.pointRadius(b),i()):d},h.pointRadius=function(a){return arguments.length?(b="function"==typeof a?a:(f.pointRadius(+a),+a),h):b},h.projection(a.geo.albersUsa()).context(null)},a.geo.projection=cd,a.geo.projectionMutator=dd,(a.geo.equirectangular=function(){return cd(fd)}).raw=fd.invert=fd,a.geo.rotation=function(a){function b(b){return b=a(b[0]*xa,b[1]*xa),b[0]*=ya,b[1]*=ya,b}return a=gd(a[0]%360*xa,a[1]*xa,a.length>2?a[2]*xa:0),b.invert=function(b){return b=a.invert(b[0]*xa,b[1]*xa),b[0]*=ya,b[1]*=ya,b},b},a.geo.circle=function(){function e(){var b="function"==typeof a?a.apply(this,arguments):a,c=gd(-b[0]*xa,-b[1]*xa,0).invert,e=[];return d(null,null,1,{point:function(a,b){e.push(a=c(a,b)),a[0]*=ya,a[1]*=ya}}),{type:"Polygon",coordinates:[e]}}var b,d,a=[0,0],c=6;return e.origin=function(b){return arguments.length?(a=b,e):a},e.angle=function(a){return arguments.length?(d=kd((b=+a)*xa,c*xa),e):b},e.precision=function(a){return arguments.length?(d=kd(b*xa,(c=+a)*xa),e):c},e.angle(90)},a.geo.distance=function(a,b){var l,c=(b[0]-a[0])*xa,d=a[1]*xa,e=b[1]*xa,f=Math.sin(c),g=Math.cos(c),h=Math.sin(d),i=Math.cos(d),j=Math.sin(e),k=Math.cos(e);return Math.atan2(Math.sqrt((l=k*f)*l+(l=i*j-h*k*g)*l),h*j+i*k*g)},a.geo.graticule=function(){function s(){return{type:"MultiLineString",coordinates:t()}}function t(){return a.range(Math.ceil(e/l)*l,d,l).map(p).concat(a.range(Math.ceil(i/m)*m,h,m).map(q)).concat(a.range(Math.ceil(c/j)*j,b,j).filter(function(a){return Math.abs(a%l)>va}).map(n)).concat(a.range(Math.ceil(g/k)*k,f,k).filter(function(a){return Math.abs(a%m)>va}).map(o))}var b,c,d,e,f,g,h,i,n,o,p,q,j=10,k=j,l=90,m=360,r=2.5;return s.lines=function(){return t().map(function(a){return{type:"LineString",coordinates:a}})},s.outline=function(){return{type:"Polygon",coordinates:[p(e).concat(q(h).slice(1),p(d).reverse().slice(1),q(i).reverse().slice(1))]}},s.extent=function(a){return arguments.length?s.majorExtent(a).minorExtent(a):s.minorExtent()},s.majorExtent=function(a){return arguments.length?(e=+a[0][0],d=+a[1][0],i=+a[0][1],h=+a[1][1],e>d&&(a=e,e=d,d=a),i>h&&(a=i,i=h,h=a),s.precision(r)):[[e,i],[d,h]]},s.minorExtent=function(a){return arguments.length?(c=+a[0][0],b=+a[1][0],g=+a[0][1],f=+a[1][1],c>b&&(a=c,c=b,b=a),g>f&&(a=g,g=f,f=a),s.precision(r)):[[c,g],[b,f]]},s.step=function(a){return arguments.length?s.majorStep(a).minorStep(a):s.minorStep()},s.majorStep=function(a){return arguments.length?(l=+a[0],m=+a[1],s):[l,m]},s.minorStep=function(a){return arguments.length?(j=+a[0],k=+a[1],s):[j,k]},s.precision=function(a){return arguments.length?(r=+a,n=md(g,f,90),o=nd(c,b,r),p=md(i,h,90),q=nd(e,d,r),s):r},s.majorExtent([[-180,-90+va],[180,90-va]]).minorExtent([[-180,-80-va],[180,80+va]])},a.geo.greatArc=function(){function f(){return{type:"LineString",coordinates:[c||b.apply(this,arguments),e||d.apply(this,arguments)]}}var c,e,b=od,d=pd;return f.distance=function(){return a.geo.distance(c||b.apply(this,arguments),e||d.apply(this,arguments))},f.source=function(a){return arguments.length?(b=a,c="function"==typeof a?null:a,f):b},f.target=function(a){return arguments.length?(d=a,e="function"==typeof a?null:a,f):d},f.precision=function(){return arguments.length?f:0},f},a.geo.interpolate=function(a,b){return qd(a[0]*xa,a[1]*xa,b[0]*xa,b[1]*xa)},a.geo.length=function(b){return rd=0,a.geo.stream(b,sd),rd};var rd,sd={sphere:y,point:y,lineStart:td,lineEnd:y,polygonStart:y,polygonEnd:y},vd=ud(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(a.geo.azimuthalEqualArea=function(){return cd(vd)}).raw=vd;var wd=ud(function(a){var b=Math.acos(a);return b&&b/Math.sin(b)},gb);(a.geo.azimuthalEquidistant=function(){return cd(wd)}).raw=wd,(a.geo.conicConformal=function(){return Ic(xd)}).raw=xd,(a.geo.conicEquidistant=function(){return Ic(yd)}).raw=yd;var zd=ud(function(a){return 1/a},Math.atan);(a.geo.gnomonic=function(){return cd(zd)}).raw=zd,Ad.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-ua/2]},(a.geo.mercator=function(){return Bd(Ad)}).raw=Ad;var Cd=ud(function(){return 1},Math.asin);(a.geo.orthographic=function(){return cd(Cd)}).raw=Cd;var Dd=ud(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(a.geo.stereographic=function(){return cd(Dd)}).raw=Dd,Ed.invert=function(a,b){return[Math.atan2(Ca(a),Math.cos(b)),Ba(Math.sin(b)/Da(a))]},(a.geo.transverseMercator=function(){return Bd(Ed)}).raw=Ed,a.geom={},a.svg={},a.svg.line=function(){return Fd(gb)};var Id=a.map({linear:Jd,"linear-closed":Kd,step:Ld,"step-before":Md,"step-after":Nd,basis:Td,"basis-open":Ud,"basis-closed":Vd,bundle:Wd,cardinal:Qd,"cardinal-open":Od,"cardinal-closed":Pd,monotone:de});Id.forEach(function(a,b){b.key=a,b.closed=/-closed$/.test(a)});var Yd=[0,2/3,1/3,0],Zd=[0,1/3,2/3,0],$d=[0,1/6,2/3,1/6];a.geom.hull=function(a){function d(a){if(a.length<3)return[];var g,k,l,m,o,p,q,r,s,t,u,v,d=fb(b),e=fb(c),f=a.length,h=f-1,i=[],j=[],n=0;if(d===Gd&&c===Hd)g=a;else for(l=0,g=[];l<f;++l)g.push([+d.call(this,k=a[l],l),+e.call(this,k,l)]);for(l=1;l<f;++l)(g[l][1]<g[n][1]||g[l][1]==g[n][1]&&g[l][0]<g[n][0])&&(n=l);for(l=0;l<f;++l)l!==n&&(p=g[l][1]-g[n][1],o=g[l][0]-g[n][0],i.push({angle:Math.atan2(p,o),index:l}));for(i.sort(function(a,b){return a.angle-b.angle}),u=i[0].angle,t=i[0].index,s=0,l=1;l<h;++l){if(m=i[l].index,u==i[l].angle){if(o=g[t][0]-g[n][0],p=g[t][1]-g[n][1],q=g[m][0]-g[n][0],r=g[m][1]-g[n][1],o*o+p*p>=q*q+r*r){i[l].index=-1;continue}i[s].index=-1}u=i[l].angle,s=l,t=m}for(j.push(n),l=0,m=0;l<2;++m)i[m].index>-1&&(j.push(i[m].index),l++);for(v=j.length;m<h;++m)if(!(i[m].index<0)){for(;!ee(j[v-2],j[v-1],i[m].index,g);)--v;j[v++]=i[m].index}var w=[];for(l=v-1;l>=0;--l)w.push(a[j[l]]);return w}var b=Gd,c=Hd;return arguments.length?d(a):(d.x=function(a){return arguments.length?(b=a,d):b},d.y=function(a){return arguments.length?(c=a,d):c},d)},a.geom.polygon=function(a){return F(a,fe),a};var fe=a.geom.polygon.prototype=[];fe.area=function(){for(var c,a=-1,b=this.length,d=this[b-1],e=0;++a<b;)c=d,d=this[a],e+=c[1]*d[0]-c[0]*d[1];return.5*e},fe.centroid=function(a){var f,h,b=-1,c=this.length,d=0,e=0,g=this[c-1];for(arguments.length||(a=-1/(6*this.area()));++b<c;)f=g,g=this[b],h=f[0]*g[1]-g[0]*f[1],d+=(f[0]+g[0])*h,e+=(f[1]+g[1])*h;return[d*a,e*a]},fe.clip=function(a){for(var b,f,g,i,j,k,c=ie(a),d=-1,e=this.length-ie(this),h=this[e-1];++d<e;){for(b=a.slice(),a.length=0,i=this[d],j=b[(g=b.length-c)-1],f=-1;++f<g;)k=b[f],ge(k,h,i)?(ge(j,h,i)||a.push(he(j,k,h,i)),a.push(k)):ge(j,h,i)&&a.push(he(j,k,h,i)),j=k;c&&a.push(a[0]),h=i}return a},a.geom.delaunay=function(a){var b=a.map(function(){return[]}),c=[];return ke(a,function(c){b[c.region.l.index].push(a[c.region.r.index])}),b.forEach(function(b,d){var e=a[d],f=e[0],g=e[1];b.forEach(function(a){a.angle=Math.atan2(a[0]-f,a[1]-g)}),b.sort(function(a,b){return a.angle-b.angle});for(var h=0,i=b.length-1;h<i;h++)c.push([e,b[h],b[h+1]])}),c},a.geom.voronoi=function(b){function f(b){var f,j,k,g=b.map(function(){return[]}),h=fb(c),i=fb(d),l=b.length,m=1e6;if(h===Gd&&i===Hd)f=b;else for(f=new Array(l),k=0;k<l;++k)f[k]=[+h.call(this,j=b[k],k),+i.call(this,j,k)];if(ke(f,function(a){var b,c,d,e,f,h;1===a.a&&a.b>=0?(b=a.ep.r,c=a.ep.l):(b=a.ep.l,c=a.ep.r),1===a.a?(f=b?b.y:-m,d=a.c-a.b*f,h=c?c.y:m,e=a.c-a.b*h):(d=b?b.x:-m,f=a.c-a.a*d,e=c?c.x:m,h=a.c-a.a*e);var i=[d,f],j=[e,h];g[a.region.l.index].push(i,j),g[a.region.r.index].push(i,j)}),g=g.map(function(b,c){var d=f[c][0],e=f[c][1],g=b.map(function(a){return Math.atan2(a[0]-d,a[1]-e)}),h=a.range(b.length).sort(function(a,b){return g[a]-g[b]});return h.filter(function(a,b){return!b||g[a]-g[h[b-1]]>va}).map(function(a){return b[a]})}),g.forEach(function(a,b){var c=a.length;if(!c)return a.push([-m,-m],[-m,m],[m,m],[m,-m]);if(!(c>2)){var d=f[b],e=a[0],g=a[1],h=d[0],i=d[1],j=e[0],k=e[1],l=g[0],n=g[1],o=Math.abs(l-j),p=n-k;if(Math.abs(p)<va){var q=i<k?-m:m;a.push([-m,q],[m,q])}else if(o<va){var r=h<j?-m:m;a.push([r,-m],[r,m])}else{var q=(l-j)*(k-i)<(j-h)*(n-k)?m:-m,s=Math.abs(p)-o;Math.abs(s)<va?a.push([p<0?q:-q,q]):(s>0&&(q*=-1),a.push([-m,q],[m,q]))}}}),e)for(k=0;k<l;++k)e.clip(g[k]);for(k=0;k<l;++k)g[k].point=b[k];return g}var c=Gd,d=Hd,e=null;return arguments.length?f(b):(f.x=function(a){return arguments.length?(c=a,f):c},f.y=function(a){return arguments.length?(d=a,f):d},f.clipExtent=function(b){if(!arguments.length)return e&&[e[0],e[2]];if(null==b)e=null;else{var c=+b[0][0],d=+b[0][1],g=+b[1][0],h=+b[1][1];e=a.geom.polygon([[c,d],[c,h],[g,h],[g,d]])}return f},f.size=function(a){return arguments.length?f.clipExtent(a&&[[0,0],a]):e&&e[2]},f.links=function(a){var b,i,j,e=a.map(function(){return[]}),f=[],g=fb(c),h=fb(d),k=a.length;if(g===Gd&&h===Hd)b=a;else for(b=new Array(k),j=0;j<k;++j)b[j]=[+g.call(this,i=a[j],j),+h.call(this,i,j)];return ke(b,function(b){var c=b.region.l.index,d=b.region.r.index;e[c][d]||(e[c][d]=e[d][c]=!0,f.push({source:a[c],target:a[d]}))}),f},f.triangles=function(b){if(c===Gd&&d===Hd)return a.geom.delaunay(b);for(var h,e=new Array(j),f=fb(c),g=fb(d),i=-1,j=b.length;++i<j;)(e[i]=[+f.call(this,h=b[i],i),+g.call(this,h,i)]).data=h;return a.geom.delaunay(e).map(function(a){return a.map(function(a){return a.data})})},f)};var je={l:"r",r:"l"};a.geom.quadtree=function(a,b,c,d,e){function i(a){function x(a,b,c,d,e,f,g,h){if(!isNaN(c)&&!isNaN(d))if(a.leaf){var i=a.x,j=a.y;if(null!=i)if(Math.abs(i-c)+Math.abs(j-d)<.01)y(a,b,c,d,e,f,g,h);else{var k=a.point;a.x=a.y=a.point=null,y(a,k,i,j,e,f,g,h),y(a,b,c,d,e,f,g,h)}else a.x=c,a.y=d,a.point=b}else y(a,b,c,d,e,f,g,h)}function y(a,b,c,d,e,f,g,h){var i=.5*(e+g),j=.5*(f+h),k=c>=i,l=d>=j,m=(l<<1)+k;a.leaf=!1,a=a.nodes[m]||(a.nodes[m]=ne()),k?e=i:g=i,l?f=j:h=j,x(a,b,c,d,e,f,g,h)}var i,l,m,n,o,p,q,r,s,j=fb(f),k=fb(g);if(null!=b)p=b,q=c,r=d,s=e;else if(r=s=-(p=q=1/0),l=[],m=[],o=a.length,h)for(n=0;n<o;++n)i=a[n],i.x<p&&(p=i.x),i.y<q&&(q=i.y),i.x>r&&(r=i.x),i.y>s&&(s=i.y),l.push(i.x),m.push(i.y);else for(n=0;n<o;++n){var t=+j(i=a[n],n),u=+k(i,n);t<p&&(p=t),u<q&&(q=u),t>r&&(r=t),u>s&&(s=u),l.push(t),m.push(u)}var v=r-p,w=s-q;v>w?s=q+v:r=p+w;var z=ne();if(z.add=function(a){x(z,a,+j(a,++n),+k(a,n),p,q,r,s)},z.visit=function(a){oe(a,z,p,q,r,s)},n=-1,null==b){for(;++n<o;)x(z,a[n],l[n],m[n],p,q,r,s);--n}else a.forEach(z.add);return l=m=a=i=null,z}var h,f=Gd,g=Hd;return(h=arguments.length)?(f=le,g=me,3===h&&(e=c,d=b,c=b=0),i(a)):(i.x=function(a){return arguments.length?(f=a,i):f},i.y=function(a){return arguments.length?(g=a,i):g},i.extent=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=+a[0][0],c=+a[0][1],d=+a[1][0],e=+a[1][1]),i):null==b?null:[[b,c],[d,e]]},i.size=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=c=0,d=+a[0],e=+a[1]),i):null==b?null:[d-b,e-c]},i)},a.interpolateRgb=pe,a.interpolateObject=qe,a.interpolateNumber=re,a.interpolateString=se;var te=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;a.interpolate=ue,a.interpolators=[function(a,b){var c=typeof b;return("string"===c?eb.has(b)||/^(#|rgb\(|hsl\()/.test(b)?pe:se:b instanceof pa?pe:"object"===c?Array.isArray(b)?ve:qe:re)(a,b)}],a.interpolateArray=ve;var we=function(){return gb},xe=a.map({linear:we,poly:Fe,quad:function(){return Ce},cubic:function(){return De},sin:function(){return Ge},exp:function(){return He},circle:function(){return Ie},elastic:Je,back:Ke,bounce:function(){return Le}}),ye=a.map({in:gb,out:Ae,"in-out":Be,"out-in":function(a){return Be(Ae(a))}});a.ease=function(a){var b=a.indexOf("-"),c=b>=0?a.substring(0,b):a,d=b>=0?a.substring(b+1):"in";return c=xe.get(c)||we,d=ye.get(d)||gb,ze(d(c.apply(null,Array.prototype.slice.call(arguments,1))))},a.interpolateHcl=Me,a.interpolateHsl=Ne,a.interpolateLab=Oe,a.interpolateRound=Pe,a.transform=function(c){var d=b.createElementNS(a.ns.prefix.svg,"g");return(a.transform=function(a){if(null!=a){d.setAttribute("transform",a);var b=d.transform.baseVal.consolidate()}return new Qe(b?b.matrix:Ue)})(c)},Qe.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Ue={a:1,b:0,c:0,d:1,e:0,f:0};a.interpolateTransform=Ve,a.layout={},a.layout.bundle=function(){return function(a){for(var b=[],c=-1,d=a.length;++c<d;)b.push(Ye(a[c]));return b}},a.layout.chord=function(){function k(){var o,p,q,r,s,b={},k=[],m=a.range(f),n=[];for(c=[],d=[],o=0,r=-1;++r<f;){for(p=0,s=-1;++s<f;)p+=e[r][s];k.push(p),n.push(a.range(f)),o+=p}for(h&&m.sort(function(a,b){return h(k[a],k[b])}),i&&n.forEach(function(a,b){a.sort(function(a,c){return i(e[b][a],e[b][c])})}),o=(2*ua-g*f)/o,p=0,r=-1;++r<f;){for(q=p,s=-1;++s<f;){var t=m[r],u=n[t][s],v=e[t][u],w=p,x=p+=v*o;b[t+"-"+u]={index:t,subindex:u,startAngle:w,endAngle:x,value:v}}d[t]={index:t,startAngle:q,endAngle:p,value:(p-q)/o},p+=g}for(r=-1;++r<f;)for(s=r-1;++s<f;){var y=b[r+"-"+s],z=b[s+"-"+r];(y.value||z.value)&&c.push(y.value<z.value?{source:z,target:y}:{source:y,target:z})}j&&l()}function l(){c.sort(function(a,b){return j((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var c,d,e,f,h,i,j,b={},g=0;return b.matrix=function(a){return arguments.length?(f=(e=a)&&e.length,c=d=null,b):e},b.padding=function(a){return arguments.length?(g=a,c=d=null,b):g},b.sortGroups=function(a){return arguments.length?(h=a,c=d=null,b):h},b.sortSubgroups=function(a){return arguments.length?(i=a,c=null,b):i},b.sortChords=function(a){return arguments.length?(j=a,c&&l(),b):j},b.chords=function(){return c||k(),c},b.groups=function(){return d||k(),d},b},a.layout.force=function(){function r(a){return function(b,c,d,e){if(b.point!==a){var f=b.cx-a.x,g=b.cy-a.y,h=1/Math.sqrt(f*f+g*g);if((e-c)*h<l){var i=b.charge*h*h;return a.px-=f*i,a.py-=g*i,!0}if(b.point&&isFinite(h)){var i=b.pointCharge*h*h;a.px-=f*i,a.py-=g*i}}return!b.charge}}function s(c){c.px=a.event.x,c.py=a.event.y,b.resume()}var e,f,o,p,q,b={},c=a.dispatch("start","tick","end"),d=[1,1],g=.9,h=ef,i=ff,j=-30,k=.1,l=.8,m=[],n=[];return b.tick=function(){if((f*=.99)<.005)return c.end({type:"end",alpha:f=0}),!0;var h,i,l,s,t,u,v,w,x,b=m.length,e=n.length;for(i=0;i<e;++i)l=n[i],s=l.source,t=l.target,w=t.x-s.x,x=t.y-s.y,(u=w*w+x*x)&&(u=f*p[i]*((u=Math.sqrt(u))-o[i])/u,w*=u,x*=u,t.x-=w*(v=s.weight/(t.weight+s.weight)),t.y-=x*v,s.x+=w*(v=1-v),s.y+=x*v);if((v=f*k)&&(w=d[0]/2,x=d[1]/2,i=-1,v))for(;++i<b;)l=m[i],l.x+=(w-l.x)*v,l.y+=(x-l.y)*v;if(j)for(df(h=a.geom.quadtree(m),f,q),i=-1;++i<b;)(l=m[i]).fixed||h.visit(r(l));for(i=-1;++i<b;)l=m[i],l.fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*g,l.y-=(l.py-(l.py=l.y))*g);c.tick({type:"tick",alpha:f})},b.nodes=function(a){return arguments.length?(m=a,b):m},b.links=function(a){return arguments.length?(n=a,b):n},b.size=function(a){return arguments.length?(d=a,b):d},b.linkDistance=function(a){return arguments.length?(h="function"==typeof a?a:+a,b):h},b.distance=b.linkDistance,b.linkStrength=function(a){return arguments.length?(i="function"==typeof a?a:+a,b):i},b.friction=function(a){return arguments.length?(g=+a,b):g},b.charge=function(a){return arguments.length?(j="function"==typeof a?a:+a,b):j},b.gravity=function(a){return arguments.length?(k=+a,b):k},b.theta=function(a){return arguments.length?(l=+a,b):l},b.alpha=function(d){return arguments.length?(d=+d,f?f=d>0?d:0:d>0&&(c.start({type:"start",alpha:f=d}),a.timer(b.tick)),b):f},b.start=function(){function s(b,c){for(var g,d=t(a),e=-1,f=d.length;++e<f;)if(!isNaN(g=d[e][b]))return g;return Math.random()*c}function t(){if(!l){for(l=[],c=0;c<e;++c)l[c]=[];for(c=0;c<f;++c){var b=n[c];l[b.source.index].push(b.target),l[b.target.index].push(b.source)}}return l[a]}var a,c,l,r,e=m.length,f=n.length,g=d[0],k=d[1];for(a=0;a<e;++a)(r=m[a]).index=a,r.weight=0;for(a=0;a<f;++a)r=n[a],"number"==typeof r.source&&(r.source=m[r.source]),"number"==typeof r.target&&(r.target=m[r.target]),++r.source.weight,++r.target.weight;for(a=0;a<e;++a)r=m[a],isNaN(r.x)&&(r.x=s("x",g)),isNaN(r.y)&&(r.y=s("y",k)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(o=[],"function"==typeof h)for(a=0;a<f;++a)o[a]=+h.call(this,n[a],a);else for(a=0;a<f;++a)o[a]=h;if(p=[],"function"==typeof i)for(a=0;a<f;++a)p[a]=+i.call(this,n[a],a);else for(a=0;a<f;++a)p[a]=i;if(q=[],"function"==typeof j)for(a=0;a<e;++a)q[a]=+j.call(this,m[a],a);else for(a=0;a<e;++a)q[a]=j;return b.resume()},b.resume=function(){return b.alpha(.1)},b.stop=function(){return b.alpha(0)},b.drag=function(){return e||(e=a.behavior.drag().origin(gb).on("dragstart.force",_e).on("drag.force",s).on("dragend.force",af)),arguments.length?void this.on("mouseover.force",bf).on("mouseout.force",cf).call(e):e},a.rebind(b,c,"on")};var ef=20,ff=1;a.layout.hierarchy=function(){function d(e,g,h){var i=b.call(f,e,g);if(e.depth=g,h.push(e),i&&(k=i.length)){for(var k,o,j=-1,l=e.children=[],m=0,n=g+1;++j<k;)o=d(i[j],n,h),o.parent=e,l.push(o),m+=o.value;a&&l.sort(a),c&&(e.value=m)}else c&&(e.value=+c.call(f,e,g)||0);return e}function e(a,b){var d=a.children,g=0;if(d&&(i=d.length))for(var i,h=-1,j=b+1;++h<i;)g+=e(d[h],j);else c&&(g=+c.call(f,a,b)||0);return c&&(a.value=g),g}function f(a){var b=[];return d(a,0,b),b}var a=kf,b=hf,c=jf;return f.sort=function(b){return arguments.length?(a=b,f):a},f.children=function(a){return arguments.length?(b=a,f):b},f.value=function(a){return arguments.length?(c=a,f):c},f.revalue=function(a){return e(a,0),a},f},a.layout.partition=function(){function d(a,b,c,e){var f=a.children;if(a.x=b,a.y=a.depth*e,a.dx=c,a.dy=e,f&&(h=f.length)){var h,i,j,g=-1;for(c=a.value?c/a.value:0;++g<h;)d(i=f[g],b,j=i.value*c,e),b+=j}}function e(a){var b=a.children,c=0;if(b&&(f=b.length))for(var f,d=-1;++d<f;)c=Math.max(c,e(b[d]));return 1+c}function f(a,f){var g=b.call(this,a,f);return d(g[0],0,c[0],c[1]/e(g[0])),g}var b=a.layout.hierarchy(),c=[1,1];return f.size=function(a){return arguments.length?(c=a,f):c},gf(f,b)},a.layout.pie=function(){function f(g){var h=g.map(function(a,c){return+b.call(f,a,c)}),i=+("function"==typeof d?d.apply(this,arguments):d),j=(("function"==typeof e?e.apply(this,arguments):e)-i)/a.sum(h),k=a.range(g.length);null!=c&&k.sort(c===mf?function(a,b){return h[b]-h[a]}:function(a,b){return c(g[a],g[b])});var l=[];return k.forEach(function(a){var b;l[a]={data:g[a],value:b=h[a],startAngle:i,endAngle:i+=b*j}}),l}var b=Number,c=mf,d=0,e=2*ua;return f.value=function(a){return arguments.length?(b=a,
f):b},f.sort=function(a){return arguments.length?(c=a,f):c},f.startAngle=function(a){return arguments.length?(d=a,f):d},f.endAngle=function(a){return arguments.length?(e=a,f):e},f};var mf={};a.layout.stack=function(){function h(i,j){var k=i.map(function(a,c){return b.call(h,a,c)}),l=k.map(function(a){return a.map(function(a,b){return[f.call(h,a,b),g.call(h,a,b)]})}),m=c.call(h,l,j);k=a.permute(k,m),l=a.permute(l,m);var q,r,s,n=d.call(h,l,j),o=k.length,p=k[0].length;for(r=0;r<p;++r)for(e.call(h,k[0][r],s=n[r],l[0][r][1]),q=1;q<o;++q)e.call(h,k[q][r],s+=l[q-1][r][1],l[q][r][1]);return i}var b=gb,c=sf,d=tf,e=pf,f=nf,g=of;return h.values=function(a){return arguments.length?(b=a,h):b},h.order=function(a){return arguments.length?(c="function"==typeof a?a:qf.get(a)||sf,h):c},h.offset=function(a){return arguments.length?(d="function"==typeof a?a:rf.get(a)||tf,h):d},h.x=function(a){return arguments.length?(f=a,h):f},h.y=function(a){return arguments.length?(g=a,h):g},h.out=function(a){return arguments.length?(e=a,h):e},h};var qf=a.map({"inside-out":function(b){var d,e,c=b.length,f=b.map(uf),g=b.map(vf),h=a.range(c).sort(function(a,b){return f[a]-f[b]}),i=0,j=0,k=[],l=[];for(d=0;d<c;++d)e=h[d],i<j?(i+=g[e],k.push(e)):(j+=g[e],l.push(e));return l.reverse().concat(k)},reverse:function(b){return a.range(b.length).reverse()},default:sf}),rf=a.map({silhouette:function(a){var f,g,h,b=a.length,c=a[0].length,d=[],e=0,i=[];for(g=0;g<c;++g){for(f=0,h=0;f<b;f++)h+=a[f][g][1];h>e&&(e=h),d.push(h)}for(g=0;g<c;++g)i[g]=(e-d[g])/2;return i},wiggle:function(a){var e,f,g,h,i,j,k,l,m,b=a.length,c=a[0],d=c.length,n=[];for(n[0]=l=m=0,f=1;f<d;++f){for(e=0,h=0;e<b;++e)h+=a[e][f][1];for(e=0,i=0,k=c[f][0]-c[f-1][0];e<b;++e){for(g=0,j=(a[e][f][1]-a[e][f-1][1])/(2*k);g<e;++g)j+=(a[g][f][1]-a[g][f-1][1])/k;i+=j*a[e][f][1]}n[f]=l-=h?i/h*k:0,l<m&&(m=l)}for(f=0;f<d;++f)n[f]-=m;return n},expand:function(a){var e,f,g,b=a.length,c=a[0].length,d=1/b,h=[];for(f=0;f<c;++f){for(e=0,g=0;e<b;e++)g+=a[e][f][1];if(g)for(e=0;e<b;e++)a[e][f][1]/=g;else for(e=0;e<b;e++)a[e][f][1]=d}for(f=0;f<c;++f)h[f]=0;return h},zero:tf});a.layout.histogram=function(){function f(f,g){for(var l,p,h=[],i=f.map(c,this),j=d.call(this,i,g),k=e.call(this,j,i,g),g=-1,m=i.length,n=k.length-1,o=b?1:1/m;++g<n;)l=h[g]=[],l.dx=k[g+1]-(l.x=k[g]),l.y=0;if(n>0)for(g=-1;++g<m;)p=i[g],p>=j[0]&&p<=j[1]&&(l=h[a.bisect(k,p,1,n)-1],l.y+=o,l.push(f[g]));return h}var b=!0,c=Number,d=zf,e=xf;return f.value=function(a){return arguments.length?(c=a,f):c},f.range=function(a){return arguments.length?(d=fb(a),f):d},f.bins=function(a){return arguments.length?(e="number"==typeof a?function(b){return yf(b,a)}:fb(a),f):e},f.frequency=function(a){return arguments.length?(b=!!a,f):b},f},a.layout.tree=function(){function f(a,f){function i(a,b){var d=a.children,e=a._tree;if(d&&(f=d.length)){for(var f,h,l,g=d[0],j=g,m=-1;++m<f;)l=d[m],i(l,h),j=k(l,h,j),h=l;If(a);var n=.5*(g._tree.prelim+l._tree.prelim);b?(e.prelim=b._tree.prelim+c(a,b),e.mod=e.prelim-n):e.prelim=n}else b&&(e.prelim=b._tree.prelim+c(a,b))}function j(a,b){a.x=a._tree.prelim+b;var c=a.children;if(c&&(e=c.length)){var e,d=-1;for(b+=a._tree.mod;++d<e;)j(c[d],b)}}function k(a,b,d){if(b){for(var m,e=a,f=a,g=b,h=a.parent.children[0],i=e._tree.mod,j=f._tree.mod,k=g._tree.mod,l=h._tree.mod;g=Cf(g),e=Bf(e),g&&e;)h=Bf(h),f=Cf(f),f._tree.ancestor=a,m=g._tree.prelim+k-e._tree.prelim-i+c(g,e),m>0&&(Jf(Kf(g,a,d),a,m),i+=m,j+=m),k+=g._tree.mod,i+=e._tree.mod,l+=h._tree.mod,j+=f._tree.mod;g&&!Cf(f)&&(f._tree.thread=g,f._tree.mod+=k-j),e&&!Bf(h)&&(h._tree.thread=e,h._tree.mod+=i-l,d=a)}return d}var g=b.call(this,a,f),h=g[0];Hf(h,function(a,b){a._tree={ancestor:a,prelim:0,mod:0,change:0,shift:0,number:b?b._tree.number+1:0}}),i(h),j(h,-h._tree.prelim);var l=Df(h,Ff),m=Df(h,Ef),n=Df(h,Gf),o=l.x-c(l,m)/2,p=m.x+c(m,l)/2,q=n.depth||1;return Hf(h,e?function(a){a.x*=d[0],a.y=a.depth*d[1],delete a._tree}:function(a){a.x=(a.x-o)/(p-o)*d[0],a.y=a.depth/q*d[1],delete a._tree}),g}var b=a.layout.hierarchy().sort(null).value(null),c=Af,d=[1,1],e=!1;return f.separation=function(a){return arguments.length?(c=a,f):c},f.size=function(a){return arguments.length?(e=null==(d=a),f):e?null:d},f.nodeSize=function(a){return arguments.length?(e=null!=(d=a),f):e?d:null},gf(f,b)},a.layout.pack=function(){function f(a,f){var g=b.call(this,a,f),h=g[0],i=d[0],j=d[1],k=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(h.x=h.y=0,Hf(h,function(a){a.r=+k(a.value)}),Hf(h,Pf),c){var l=c*(e?1:Math.max(2*h.r/i,2*h.r/j))/2;Hf(h,function(a){a.r+=l}),Hf(h,Pf),Hf(h,function(a){a.r-=l})}return Sf(h,i/2,j/2,e?1:1/Math.max(2*h.r/i,2*h.r/j)),g}var e,b=a.layout.hierarchy().sort(Lf),c=0,d=[1,1];return f.size=function(a){return arguments.length?(d=a,f):d},f.radius=function(a){return arguments.length?(e=null==a||"function"==typeof a?a:+a,f):e},f.padding=function(a){return arguments.length?(c=+a,f):c},gf(f,b)},a.layout.cluster=function(){function f(a,f){var i,g=b.call(this,a,f),h=g[0],j=0;Hf(h,function(a){var b=a.children;b&&b.length?(a.x=Vf(b),a.y=Uf(b)):(a.x=i?j+=c(a,i):0,a.y=0,i=a)});var k=Wf(h),l=Xf(h),m=k.x-c(k,l)/2,n=l.x+c(l,k)/2;return Hf(h,e?function(a){a.x=(a.x-h.x)*d[0],a.y=(h.y-a.y)*d[1]}:function(a){a.x=(a.x-m)/(n-m)*d[0],a.y=(1-(h.y?a.y/h.y:1))*d[1]}),g}var b=a.layout.hierarchy().sort(null).value(null),c=Af,d=[1,1],e=!1;return f.separation=function(a){return arguments.length?(c=a,f):c},f.size=function(a){return arguments.length?(e=null==(d=a),f):e?null:d},f.nodeSize=function(a){return arguments.length?(e=null!=(d=a),f):e?d:null},gf(f,b)},a.layout.treemap=function(){function k(a,b){for(var e,f,c=-1,d=a.length;++c<d;)f=(e=a[c]).value*(b<0?0:b),e.area=isNaN(f)||f<=0?0:f}function l(a){var b=a.children;if(b&&b.length){var g,j,p,c=f(a),d=[],e=b.slice(),h=1/0,m="slice"===i?c.dx:"dice"===i?c.dy:"slice-dice"===i?1&a.depth?c.dy:c.dx:Math.min(c.dx,c.dy);for(k(e,c.dx*c.dy/a.value),d.area=0;(p=e.length)>0;)d.push(g=e[p-1]),d.area+=g.area,"squarify"!==i||(j=n(d,m))<=h?(e.pop(),h=j):(d.area-=d.pop().area,o(d,m,c,!1),m=Math.min(c.dx,c.dy),d.length=d.area=0,h=1/0);d.length&&(o(d,m,c,!0),d.length=d.area=0),b.forEach(l)}}function m(a){var b=a.children;if(b&&b.length){var e,c=f(a),d=b.slice(),g=[];for(k(d,c.dx*c.dy/a.value),g.area=0;e=d.pop();)g.push(e),g.area+=e.area,null!=e.z&&(o(g,e.z?c.dx:c.dy,c,!d.length),g.length=g.area=0);b.forEach(m)}}function n(a,b){for(var d,c=a.area,e=0,f=1/0,g=-1,h=a.length;++g<h;)(d=a[g].area)&&(d<f&&(f=d),d>e&&(e=d));return c*=c,b*=b,c?Math.max(b*e*j/c,c/(b*f*j)):1/0}function o(a,b,d,e){var k,f=-1,g=a.length,h=d.x,i=d.y,j=b?c(a.area/b):0;if(b==d.dx){for((e||j>d.dy)&&(j=d.dy);++f<g;)k=a[f],k.x=h,k.y=i,k.dy=j,h+=k.dx=Math.min(d.x+d.dx-h,j?c(k.area/j):0);k.z=!0,k.dx+=d.x+d.dx-h,d.y+=j,d.dy-=j}else{for((e||j>d.dx)&&(j=d.dx);++f<g;)k=a[f],k.x=h,k.y=i,k.dx=j,i+=k.dy=Math.min(d.y+d.dy-i,j?c(k.area/j):0);k.z=!1,k.dy+=d.y+d.dy-i,d.x+=j,d.dx-=j}}function p(a){var c=h||b(a),e=c[0];return e.x=0,e.y=0,e.dx=d[0],e.dy=d[1],h&&b.revalue(e),k([e],e.dx*e.dy/e.value),(h?m:l)(e),g&&(h=c),c}var h,b=a.layout.hierarchy(),c=Math.round,d=[1,1],e=null,f=Yf,g=!1,i="squarify",j=.5*(1+Math.sqrt(5));return p.size=function(a){return arguments.length?(d=a,p):d},p.padding=function(a){function b(b){var c=a.call(p,b,b.depth);return null==c?Yf(b):Zf(b,"number"==typeof c?[c,c,c,c]:c)}function c(b){return Zf(b,a)}if(!arguments.length)return e;var d;return f=null==(e=a)?Yf:"function"==(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c,p},p.round=function(a){return arguments.length?(c=a?Math.round:Number,p):c!=Number},p.sticky=function(a){return arguments.length?(g=a,h=null,p):g},p.ratio=function(a){return arguments.length?(j=a,p):j},p.mode=function(a){return arguments.length?(i=a+"",p):i},gf(p,b)},a.random={normal:function(a,b){var c=arguments.length;return c<2&&(b=1),c<1&&(a=0),function(){var c,d,e;do c=2*Math.random()-1,d=2*Math.random()-1,e=c*c+d*d;while(!e||e>1);return a+b*c*Math.sqrt(-2*Math.log(e)/e)}},logNormal:function(){var b=a.random.normal.apply(a,arguments);return function(){return Math.exp(b())}},irwinHall:function(a){return function(){for(var b=0,c=0;c<a;c++)b+=Math.random();return b/a}}},a.scale={};var dg={floor:gb,ceil:gb};a.scale.linear=function(){return fg([0,1],[0,1],ue,!1)},a.scale.log=function(){return mg(a.scale.linear().domain([0,1]),10,!0,[1,10])};var ng=a.format(".0e"),og={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};a.scale.pow=function(){return pg(a.scale.linear(),1,[0,1])},a.scale.sqrt=function(){return a.scale.pow().exponent(.5)},a.scale.ordinal=function(){return rg([],{t:"range",a:[[]]})},a.scale.category10=function(){return a.scale.ordinal().range(sg)},a.scale.category20=function(){return a.scale.ordinal().range(tg)},a.scale.category20b=function(){return a.scale.ordinal().range(ug)},a.scale.category20c=function(){return a.scale.ordinal().range(vg)};var sg=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Wa),tg=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Wa),ug=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Wa),vg=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Wa);a.scale.quantile=function(){return wg([],[])},a.scale.quantize=function(){return xg(0,1,[0,1])},a.scale.threshold=function(){return yg([.5],[0,1])},a.scale.identity=function(){return zg([0,1])},a.svg.arc=function(){function e(){var e=a.apply(this,arguments),f=b.apply(this,arguments),g=c.apply(this,arguments)+Ag,h=d.apply(this,arguments)+Ag,i=(h<g&&(i=g,g=h,h=i),h-g),j=i<ua?"0":"1",k=Math.cos(g),l=Math.sin(g),m=Math.cos(h),n=Math.sin(h);return i>=Bg?e?"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+-f+"A"+f+","+f+" 0 1,1 0,"+f+"M0,"+e+"A"+e+","+e+" 0 1,0 0,"+-e+"A"+e+","+e+" 0 1,0 0,"+e+"Z":"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+-f+"A"+f+","+f+" 0 1,1 0,"+f+"Z":e?"M"+f*k+","+f*l+"A"+f+","+f+" 0 "+j+",1 "+f*m+","+f*n+"L"+e*m+","+e*n+"A"+e+","+e+" 0 "+j+",0 "+e*k+","+e*l+"Z":"M"+f*k+","+f*l+"A"+f+","+f+" 0 "+j+",1 "+f*m+","+f*n+"L0,0Z"}var a=Cg,b=Dg,c=Eg,d=Fg;return e.innerRadius=function(b){return arguments.length?(a=fb(b),e):a},e.outerRadius=function(a){return arguments.length?(b=fb(a),e):b},e.startAngle=function(a){return arguments.length?(c=fb(a),e):c},e.endAngle=function(a){return arguments.length?(d=fb(a),e):d},e.centroid=function(){var e=(a.apply(this,arguments)+b.apply(this,arguments))/2,f=(c.apply(this,arguments)+d.apply(this,arguments))/2+Ag;return[Math.cos(f)*e,Math.sin(f)*e]},e};var Ag=-ua/2,Bg=2*ua-1e-6;a.svg.line.radial=function(){var a=Fd(Gg);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a},Md.reverse=Nd,Nd.reverse=Md,a.svg.area=function(){return Hg(gb)},a.svg.area.radial=function(){var a=Hg(Gg);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a},a.svg.chord=function(){function f(c,d){var e=g(this,a,c,d),f=g(this,b,c,d);return"M"+e.p0+i(e.r,e.p1,e.a1-e.a0)+(h(e,f)?j(e.r,e.p1,e.r,e.p0):j(e.r,e.p1,f.r,f.p0)+i(f.r,f.p1,f.a1-f.a0)+j(f.r,f.p1,e.r,e.p0))+"Z"}function g(a,b,f,g){var h=b.call(a,f,g),i=c.call(a,h,g),j=d.call(a,h,g)+Ag,k=e.call(a,h,g)+Ag;return{r:i,a0:j,a1:k,p0:[i*Math.cos(j),i*Math.sin(j)],p1:[i*Math.cos(k),i*Math.sin(k)]}}function h(a,b){return a.a0==b.a0&&a.a1==b.a1}function i(a,b,c){return"A"+a+","+a+" 0 "+ +(c>ua)+",1 "+b}function j(a,b,c,d){return"Q 0,0 "+d}var a=od,b=pd,c=Ig,d=Eg,e=Fg;return f.radius=function(a){return arguments.length?(c=fb(a),f):c},f.source=function(b){return arguments.length?(a=fb(b),f):a},f.target=function(a){return arguments.length?(b=fb(a),f):b},f.startAngle=function(a){return arguments.length?(d=fb(a),f):d},f.endAngle=function(a){return arguments.length?(e=fb(a),f):e},f},a.svg.diagonal=function(){function d(d,e){var f=a.call(this,d,e),g=b.call(this,d,e),h=(f.y+g.y)/2,i=[f,{x:f.x,y:h},{x:g.x,y:h},g];return i=i.map(c),"M"+i[0]+"C"+i[1]+" "+i[2]+" "+i[3]}var a=od,b=pd,c=Jg;return d.source=function(b){return arguments.length?(a=fb(b),d):a},d.target=function(a){return arguments.length?(b=fb(a),d):b},d.projection=function(a){return arguments.length?(c=a,d):c},d},a.svg.diagonal.radial=function(){var b=a.svg.diagonal(),c=Jg,d=b.projection;return b.projection=function(a){return arguments.length?d(Kg(c=a)):c},b},a.svg.symbol=function(){function c(c,d){return(Og.get(a.call(this,c,d))||Ng)(b.call(this,c,d))}var a=Mg,b=Lg;return c.type=function(b){return arguments.length?(a=fb(b),c):a},c.size=function(a){return arguments.length?(b=fb(a),c):b},c};var Og=a.map({circle:Ng,cross:function(a){var b=Math.sqrt(a/5)/2;return"M"+-3*b+","+-b+"H"+-b+"V"+-3*b+"H"+b+"V"+-b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+-b+"V"+b+"H"+-3*b+"Z"},diamond:function(a){var b=Math.sqrt(a/(2*Qg)),c=b*Qg;return"M0,"+-b+"L"+c+",0 0,"+b+" "+-c+",0Z"},square:function(a){var b=Math.sqrt(a)/2;return"M"+-b+","+-b+"L"+b+","+-b+" "+b+","+b+" "+-b+","+b+"Z"},"triangle-down":function(a){var b=Math.sqrt(a/Pg),c=b*Pg/2;return"M0,"+c+"L"+b+","+-c+" "+-b+","+-c+"Z"},"triangle-up":function(a){var b=Math.sqrt(a/Pg),c=b*Pg/2;return"M0,"+-c+"L"+b+","+c+" "+-b+","+c+"Z"}});a.svg.symbolTypes=Og.keys();var Ug,Vg,Pg=Math.sqrt(3),Qg=Math.tan(30*xa),Sg=[],Tg=0;Sg.call=L.call,Sg.empty=L.empty,Sg.node=L.node,Sg.size=L.size,a.transition=function(a){return arguments.length?Ug?a.transition():a:ca.transition()},a.transition.prototype=Sg,Sg.select=function(a){var d,e,f,b=this.id,c=[];a=M(a);for(var g=-1,h=this.length;++g<h;){c.push(d=[]);for(var i=this[g],j=-1,k=i.length;++j<k;)(f=i[j])&&(e=a.call(f,f.__data__,j,g))?("__data__"in f&&(e.__data__=f.__data__),Yg(e,j,b,f.__transition__[b]),d.push(e)):d.push(null)}return Rg(c,b)},Sg.selectAll=function(a){var d,e,f,g,h,b=this.id,c=[];a=N(a);for(var i=-1,j=this.length;++i<j;)for(var k=this[i],l=-1,m=k.length;++l<m;)if(f=k[l]){h=f.__transition__[b],e=a.call(f,f.__data__,l,i),c.push(d=[]);for(var n=-1,o=e.length;++n<o;)(g=e[n])&&Yg(g,n,b,h),d.push(g)}return Rg(c,b)},Sg.filter=function(a){var c,d,e,b=[];"function"!=typeof a&&(a=Y(a));for(var f=0,g=this.length;f<g;f++){b.push(c=[]);for(var d=this[f],h=0,i=d.length;h<i;h++)(e=d[h])&&a.call(e,e.__data__,h)&&c.push(e)}return Rg(b,this.id)},Sg.tween=function(a,b){var c=this.id;return arguments.length<2?this.node().__transition__[c].tween.get(a):$(this,null==b?function(b){b.__transition__[c].tween.remove(a)}:function(d){d.__transition__[c].tween.set(a,b)})},Sg.attr=function(b,c){function f(){this.removeAttribute(e)}function g(){this.removeAttributeNS(e.space,e.local)}function h(a){return null==a?f:(a+="",function(){var c,b=this.getAttribute(e);return b!==a&&(c=d(b,a),function(a){this.setAttribute(e,c(a))})})}function i(a){return null==a?g:(a+="",function(){var c,b=this.getAttributeNS(e.space,e.local);return b!==a&&(c=d(b,a),function(a){this.setAttributeNS(e.space,e.local,c(a))})})}if(arguments.length<2){for(c in b)this.attr(c,b[c]);return this}var d="transform"==b?Ve:ue,e=a.ns.qualify(b);return Wg(this,"attr."+b,c,e.local?i:h)},Sg.attrTween=function(b,c){function e(a,b){var e=c.call(this,a,b,this.getAttribute(d));return e&&function(a){this.setAttribute(d,e(a))}}function f(a,b){var e=c.call(this,a,b,this.getAttributeNS(d.space,d.local));return e&&function(a){this.setAttributeNS(d.space,d.local,e(a))}}var d=a.ns.qualify(b);return this.tween("attr."+b,d.local?f:e)},Sg.style=function(a,b,c){function f(){this.style.removeProperty(a)}function g(b){return null==b?f:(b+="",function(){var f,e=d.getComputedStyle(this,null).getPropertyValue(a);return e!==b&&(f=ue(e,b),function(b){this.style.setProperty(a,f(b),c)})})}var e=arguments.length;if(e<3){if("string"!=typeof a){e<2&&(b="");for(c in a)this.style(c,a[c],b);return this}c=""}return Wg(this,"style."+a,b,g)},Sg.styleTween=function(a,b,c){function e(e,f){var g=b.call(this,e,f,d.getComputedStyle(this,null).getPropertyValue(a));return g&&function(b){this.style.setProperty(a,g(b),c)}}return arguments.length<3&&(c=""),this.tween("style."+a,e)},Sg.text=function(a){return Wg(this,"text",a,Xg)},Sg.remove=function(){return this.each("end.transition",function(){var a;!this.__transition__&&(a=this.parentNode)&&a.removeChild(this)})},Sg.ease=function(b){var c=this.id;return arguments.length<1?this.node().__transition__[c].ease:("function"!=typeof b&&(b=a.ease.apply(a,arguments)),$(this,function(a){a.__transition__[c].ease=b}))},Sg.delay=function(a){var b=this.id;return $(this,"function"==typeof a?function(c,d,e){c.__transition__[b].delay=0|a.call(c,c.__data__,d,e)}:(a|=0,function(c){c.__transition__[b].delay=a}))},Sg.duration=function(a){var b=this.id;return $(this,"function"==typeof a?function(c,d,e){c.__transition__[b].duration=Math.max(1,0|a.call(c,c.__data__,d,e))}:(a=Math.max(1,0|a),function(c){c.__transition__[b].duration=a}))},Sg.each=function(b,c){var d=this.id;if(arguments.length<2){var e=Vg,f=Ug;Ug=d,$(this,function(a,c,e){Vg=a.__transition__[d],b.call(a,a.__data__,c,e)}),Vg=e,Ug=f}else $(this,function(e){var f=e.__transition__[d];(f.event||(f.event=a.dispatch("start","end"))).on(b,c)});return this},Sg.transition=function(){for(var d,e,f,g,a=this.id,b=++Tg,c=[],h=0,i=this.length;h<i;h++){c.push(d=[]);for(var e=this[h],j=0,k=e.length;j<k;j++)(f=e[j])&&(g=Object.create(f.__transition__[a]),g.delay+=g.duration,Yg(f,j,b,g)),d.push(f)}return Rg(c,b)},a.svg.axis=function(){function l(l){l.each(function(){var x,l=a.select(this),m=null==i?b.ticks?b.ticks.apply(b,h):b.domain():i,n=null==j?b.tickFormat?b.tickFormat.apply(b,h):String:j,o=bh(b,m,k),p=l.selectAll(".tick.minor").data(o,String),q=p.enter().insert("line",".tick").attr("class","tick minor").style("opacity",1e-6),r=a.transition(p.exit()).style("opacity",1e-6).remove(),s=a.transition(p).style("opacity",1),t=l.selectAll(".tick.major").data(m,String),u=t.enter().insert("g",".domain").attr("class","tick major").style("opacity",1e-6),v=a.transition(t.exit()).style("opacity",1e-6).remove(),w=a.transition(t).style("opacity",1),y=_f(b),z=l.selectAll(".domain").data([0]),A=(z.enter().append("path").attr("class","domain"),a.transition(z)),B=b.copy(),C=this.__chart__||B;this.__chart__=B,u.append("line"),u.append("text");var D=u.select("line"),E=w.select("line"),F=t.select("text").text(n),G=u.select("text"),H=w.select("text");switch(c){case"bottom":x=_g,q.attr("y2",e),s.attr("x2",0).attr("y2",e),D.attr("y2",d),G.attr("y",Math.max(d,0)+g),E.attr("x2",0).attr("y2",d),H.attr("x",0).attr("y",Math.max(d,0)+g),F.attr("dy",".71em").style("text-anchor","middle"),A.attr("d","M"+y[0]+","+f+"V0H"+y[1]+"V"+f);break;case"top":x=_g,q.attr("y2",-e),s.attr("x2",0).attr("y2",-e),D.attr("y2",-d),G.attr("y",-(Math.max(d,0)+g)),E.attr("x2",0).attr("y2",-d),H.attr("x",0).attr("y",-(Math.max(d,0)+g)),F.attr("dy","0em").style("text-anchor","middle"),A.attr("d","M"+y[0]+","+-f+"V0H"+y[1]+"V"+-f);break;case"left":x=ah,q.attr("x2",-e),s.attr("x2",-e).attr("y2",0),D.attr("x2",-d),G.attr("x",-(Math.max(d,0)+g)),E.attr("x2",-d).attr("y2",0),H.attr("x",-(Math.max(d,0)+g)).attr("y",0),F.attr("dy",".32em").style("text-anchor","end"),A.attr("d","M"+-f+","+y[0]+"H0V"+y[1]+"H"+-f);break;case"right":x=ah,q.attr("x2",e),s.attr("x2",e).attr("y2",0),D.attr("x2",d),G.attr("x",Math.max(d,0)+g),E.attr("x2",d).attr("y2",0),H.attr("x",Math.max(d,0)+g).attr("y",0),F.attr("dy",".32em").style("text-anchor","start"),A.attr("d","M"+f+","+y[0]+"H0V"+y[1]+"H"+f)}if(b.rangeBand){var I=B.rangeBand()/2,J=function(a){return B(a)+I};u.call(x,J),w.call(x,J)}else u.call(x,C),w.call(x,B),v.call(x,B),q.call(x,C),s.call(x,B),r.call(x,B)})}var j,b=a.scale.linear(),c=Zg,d=6,e=6,f=6,g=3,h=[10],i=null,k=0;return l.scale=function(a){return arguments.length?(b=a,l):b},l.orient=function(a){return arguments.length?(c=a in $g?a+"":Zg,l):c},l.ticks=function(){return arguments.length?(h=arguments,l):h},l.tickValues=function(a){return arguments.length?(i=a,l):i},l.tickFormat=function(a){return arguments.length?(j=a,l):j},l.tickSize=function(a,b){if(!arguments.length)return d;var c=arguments.length-1;return d=+a,e=c>1?+b:d,f=c>0?+arguments[c]:d,l},l.tickPadding=function(a){return arguments.length?(g=+a,l):g},l.tickSubdivide=function(a){return arguments.length?(k=+a,l):k},l};var Zg="bottom",$g={top:1,right:1,bottom:1,left:1};a.svg.brush=function(){function j(b){b.each(function(){var i,b=a.select(this),d=b.selectAll(".background").data([0]),g=b.selectAll(".extent").data([0]),h=b.selectAll(".resize").data(f,String);b.style("pointer-events","all").on("mousedown.brush",n).on("touchstart.brush",n),d.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),g.enter().append("rect").attr("class","extent").style("cursor","move"),h.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return ch[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),h.style("display",j.empty()?"none":null),h.exit().remove(),c&&(i=_f(c),d.attr("x",i[0]).attr("width",i[1]-i[0]),l(b)),e&&(i=_f(e),d.attr("y",i[0]).attr("height",i[1]-i[0]),m(b)),k(b)})}function k(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+g[+/e$/.test(a)][0]+","+g[+/^s/.test(a)][1]+")"})}function l(a){a.select(".extent").attr("x",g[0][0]),a.selectAll(".extent,.n>rect,.s>rect").attr("width",g[1][0]-g[0][0])}function m(a){a.select(".extent").attr("y",g[0][1]),a.selectAll(".extent,.e>rect,.w>rect").attr("height",g[1][1]-g[0][1])}function n(){function C(){var b=a.event.changedTouches;return b?a.touches(f,b)[0]:a.mouse(f)}function D(){32==a.event.keyCode&&(t||(v=null,w[0]-=g[1][0],w[1]-=g[1][1],t=2),B())}function E(){32==a.event.keyCode&&2==t&&(w[0]+=g[1][0],w[1]+=g[1][1],t=0,B())}function F(){var b=C(),d=!1;x&&(b[0]+=x[0],b[1]+=x[1]),t||(a.event.altKey?(v||(v=[(g[0][0]+g[1][0])/2,(g[0][1]+g[1][1])/2]),w[0]=g[+(b[0]<v[0])][0],w[1]=g[+(b[1]<v[1])][1]):v=null),r&&G(b,c,0)&&(l(p),d=!0),s&&G(b,e,1)&&(m(p),d=!0),d&&(k(p),o({type:"brush",mode:t?"move":"resize"}))}function G(a,b,c){var l,m,d=_f(b),e=d[0],f=d[1],j=w[c],k=g[1][c]-g[0][c];if(t&&(e-=j,f-=k+j),l=h[c]?Math.max(e,Math.min(f,a[c])):a[c],t?m=(l+=j)+k:(v&&(j=Math.max(e,Math.min(f,2*v[c]-l))),j<l?(m=l,l=j):m=j),g[0][c]!==l||g[1][c]!==m)return i=null,g[0][c]=l,g[1][c]=m,!0}function H(){F(),p.style("pointer-events","all").selectAll(".resize").style("display",j.empty()?"none":null),a.select("body").style("cursor",null),y.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),u(),o({type:"brushend"})}var v,x,f=this,n=a.select(a.event.target),o=b.of(f,arguments),p=a.select(f),q=n.datum(),r=!/^(n|s)$/.test(q)&&c,s=!/^(e|w)$/.test(q)&&e,t=n.classed("extent"),u=ja(),w=C(),y=a.select(d).on("keydown.brush",D).on("keyup.brush",E);if(a.event.changedTouches?y.on("touchmove.brush",F).on("touchend.brush",H):y.on("mousemove.brush",F).on("mouseup.brush",H),t)w[0]=g[0][0]-w[0],w[1]=g[0][1]-w[1];else if(q){var z=+/w$/.test(q),A=+/^n/.test(q);x=[g[1-z][0]-w[0],g[1-A][1]-w[1]],w[0]=g[z][0],w[1]=g[A][1]}else a.event.altKey&&(v=w.slice());p.style("pointer-events","none").selectAll(".resize").style("display",null),a.select("body").style("cursor",n.style("cursor")),o({type:"brushstart"}),F()}var i,b=D(j,"brushstart","brush","brushend"),c=null,e=null,f=dh[0],g=[[0,0],[0,0]],h=[!0,!0];return j.x=function(a){return arguments.length?(c=a,f=dh[!c<<1|!e],j):c},j.y=function(a){return arguments.length?(e=a,f=dh[!c<<1|!e],j):e},j.clamp=function(a){return arguments.length?(c&&e?h=[!!a[0],!!a[1]]:(c||e)&&(h[+!c]=!!a),j):c&&e?h:c||e?h[+!c]:null},j.extent=function(a){var b,d,f,h,k;return arguments.length?(i=[[0,0],[0,0]],c&&(b=a[0],d=a[1],e&&(b=b[0],d=d[0]),i[0][0]=b,i[1][0]=d,c.invert&&(b=c(b),d=c(d)),d<b&&(k=b,b=d,d=k),g[0][0]=0|b,g[1][0]=0|d),e&&(f=a[0],h=a[1],c&&(f=f[1],h=h[1]),i[0][1]=f,i[1][1]=h,e.invert&&(f=e(f),h=e(h)),h<f&&(k=f,f=h,h=k),g[0][1]=0|f,g[1][1]=0|h),j):(a=i||g,c&&(b=a[0][0],d=a[1][0],i||(b=g[0][0],d=g[1][0],c.invert&&(b=c.invert(b),d=c.invert(d)),d<b&&(k=b,b=d,d=k))),e&&(f=a[0][1],h=a[1][1],i||(f=g[0][1],h=g[1][1],e.invert&&(f=e.invert(f),h=e.invert(h)),h<f&&(k=f,f=h,h=k))),c&&e?[[b,f],[d,h]]:c?[b,d]:e&&[f,h])},j.clear=function(){return i=null,g[0][0]=g[0][1]=g[1][0]=g[1][1]=0,j},j.empty=function(){return c&&g[0][0]===g[1][0]||e&&g[0][1]===g[1][1]},a.rebind(j,b,"on")};var ch={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},dh=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];a.time={};var eh=Date,fh=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];gh.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){hh.setUTCDate.apply(this._,arguments)},setDay:function(){hh.setUTCDay.apply(this._,arguments)},setFullYear:function(){hh.setUTCFullYear.apply(this._,arguments)},setHours:function(){hh.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){hh.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){hh.setUTCMinutes.apply(this._,arguments)},setMonth:function(){hh.setUTCMonth.apply(this._,arguments)},setSeconds:function(){hh.setUTCSeconds.apply(this._,arguments)},setTime:function(){hh.setTime.apply(this._,arguments)}};var hh=Date.prototype,ih="%a %b %e %X %Y",jh="%m/%d/%Y",kh="%H:%M:%S",lh=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],mh=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],nh=["January","February","March","April","May","June","July","August","September","October","November","December"],oh=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];a.time.year=ph(function(b){return b=a.time.day(b),b.setMonth(0,1),b},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()}),a.time.years=a.time.year.range,a.time.years.utc=a.time.year.utc.range,a.time.day=ph(function(a){var b=new eh(2e3,0);return b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1}),a.time.days=a.time.day.range,a.time.days.utc=a.time.day.utc.range,a.time.dayOfYear=function(b){var c=a.time.year(b);return Math.floor((b-c-6e4*(b.getTimezoneOffset()-c.getTimezoneOffset()))/864e5)},fh.forEach(function(b,c){b=b.toLowerCase(),c=7-c;var d=a.time[b]=ph(function(b){return(b=a.time.day(b)).setDate(b.getDate()-(b.getDay()+c)%7),b},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(b){var d=a.time.year(b).getDay();return Math.floor((a.time.dayOfYear(b)+(d+c)%7)/7)-(d!==c)});a.time[b+"s"]=d.range,a.time[b+"s"].utc=d.utc.range,a.time[b+"OfYear"]=function(b){var d=a.time.year(b).getDay();return Math.floor((a.time.dayOfYear(b)+(d+c)%7)/7)}}),a.time.week=a.time.sunday,a.time.weeks=a.time.sunday.range,a.time.weeks.utc=a.time.sunday.utc.range,a.time.weekOfYear=a.time.sundayOfYear,a.time.format=function(a){function c(c){for(var g,h,i,d=[],e=-1,f=0;++e<b;)37===a.charCodeAt(e)&&(d.push(a.substring(f,e)),null!=(h=Eh[g=a.charAt(++e)])&&(g=a.charAt(++e)),(i=Fh[g])&&(g=i(c,null==h?"e"===g?" ":"0":h)),d.push(g),f=e+1);return d.push(a.substring(f,e)),d.join("")}var b=a.length;return c.parse=function(b){var c={y:1900,m:0,d:1,H:0,M:0,S:0,L:0},d=rh(c,a,b,0);if(d!=b.length)return null;"p"in c&&(c.H=c.H%12+12*c.p);var e=new eh;return"j"in c?e.setFullYear(c.y,0,c.j):"w"in c&&("W"in c||"U"in c)?(e.setFullYear(c.y,0,1),e.setFullYear(c.y,0,"W"in c?(c.w+6)%7+7*c.W-(e.getDay()+5)%7:c.w+7*c.U-(e.getDay()+6)%7)):e.setFullYear(c.y,c.m,c.d),e.setHours(c.H,c.M,c.S,c.L),e},c.toString=function(){return a},c};var vh=sh(lh),wh=th(lh),xh=sh(mh),yh=th(mh),zh=sh(nh),Ah=th(nh),Bh=sh(oh),Ch=th(oh),Dh=/^%/,Eh={"-":"",_:" ",0:"0"},Fh={a:function(a){return mh[a.getDay()]},A:function(a){return lh[a.getDay()]},b:function(a){return oh[a.getMonth()]},B:function(a){return nh[a.getMonth()]},c:a.time.format(ih),d:function(a,b){return uh(a.getDate(),b,2)},e:function(a,b){return uh(a.getDate(),b,2)},H:function(a,b){return uh(a.getHours(),b,2)},I:function(a,b){return uh(a.getHours()%12||12,b,2)},j:function(b,c){return uh(1+a.time.dayOfYear(b),c,3)},L:function(a,b){return uh(a.getMilliseconds(),b,3)},m:function(a,b){return uh(a.getMonth()+1,b,2)},M:function(a,b){return uh(a.getMinutes(),b,2)},p:function(a){return a.getHours()>=12?"PM":"AM"},S:function(a,b){return uh(a.getSeconds(),b,2)},U:function(b,c){return uh(a.time.sundayOfYear(b),c,2)},w:function(a){return a.getDay()},W:function(b,c){return uh(a.time.mondayOfYear(b),c,2)},x:a.time.format(jh),X:a.time.format(kh),y:function(a,b){return uh(a.getFullYear()%100,b,2)},Y:function(a,b){return uh(a.getFullYear()%1e4,b,4)},Z:ci,"%":function(){return"%"}},Gh={a:Hh,A:Ih,b:Mh,B:Nh,c:Oh,d:Vh,e:Vh,H:Xh,I:Xh,j:Wh,L:$h,m:Uh,M:Yh,p:ai,S:Zh,U:Kh,w:Jh,W:Lh,x:Ph,X:Qh,y:Sh,Y:Rh,"%":di},_h=/^\s*\d+/,bi=a.map({am:0,pm:1});a.time.format.utc=function(b){function d(a){try{eh=gh;var b=new eh;return b._=a,c(b)}finally{eh=Date}}var c=a.time.format(b);return d.parse=function(a){try{eh=gh;var b=c.parse(a);return b&&b._}finally{eh=Date}},d.toString=c.toString,d};var ei=a.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");a.time.format.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?fi:ei,fi.parse=function(a){var b=new Date(a);return isNaN(b)?null:b},fi.toString=ei.toString,a.time.second=ph(function(a){return new eh(1e3*Math.floor(a/1e3))},function(a,b){a.setTime(a.getTime()+1e3*Math.floor(b))},function(a){return a.getSeconds()}),a.time.seconds=a.time.second.range,a.time.seconds.utc=a.time.second.utc.range,a.time.minute=ph(function(a){return new eh(6e4*Math.floor(a/6e4))},function(a,b){a.setTime(a.getTime()+6e4*Math.floor(b))},function(a){return a.getMinutes()}),a.time.minutes=a.time.minute.range,a.time.minutes.utc=a.time.minute.utc.range,a.time.hour=ph(function(a){var b=a.getTimezoneOffset()/60;return new eh(36e5*(Math.floor(a/36e5-b)+b))},function(a,b){a.setTime(a.getTime()+36e5*Math.floor(b))},function(a){return a.getHours()}),a.time.hours=a.time.hour.range,a.time.hours.utc=a.time.hour.utc.range,a.time.month=ph(function(b){return b=a.time.day(b),b.setDate(1),b},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()}),a.time.months=a.time.month.range,a.time.months.utc=a.time.month.utc.range;var li=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],mi=[[a.time.second,1],[a.time.second,5],[a.time.second,15],[a.time.second,30],[a.time.minute,1],[a.time.minute,5],[a.time.minute,15],[a.time.minute,30],[a.time.hour,1],[a.time.hour,3],[a.time.hour,6],[a.time.hour,12],[a.time.day,1],[a.time.day,2],[a.time.week,1],[a.time.month,1],[a.time.month,3],[a.time.year,1]],ni=[[a.time.format("%Y"),pc],[a.time.format("%B"),function(a){return a.getMonth()}],[a.time.format("%b %d"),function(a){return 1!=a.getDate()}],[a.time.format("%a %d"),function(a){return a.getDay()&&1!=a.getDate()}],[a.time.format("%I %p"),function(a){return a.getHours()}],[a.time.format("%I:%M"),function(a){return a.getMinutes()}],[a.time.format(":%S"),function(a){return a.getSeconds()}],[a.time.format(".%L"),function(a){return a.getMilliseconds();
}]],oi=a.scale.linear(),pi=ii(ni);mi.year=function(a,b){return oi.domain(a.map(ki)).ticks(b).map(ji)},a.time.scale=function(){return gi(a.scale.linear(),mi,pi)};var qi=mi.map(function(a){return[a[0].utc,a[1]]}),ri=[[a.time.format.utc("%Y"),pc],[a.time.format.utc("%B"),function(a){return a.getUTCMonth()}],[a.time.format.utc("%b %d"),function(a){return 1!=a.getUTCDate()}],[a.time.format.utc("%a %d"),function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],[a.time.format.utc("%I %p"),function(a){return a.getUTCHours()}],[a.time.format.utc("%I:%M"),function(a){return a.getUTCMinutes()}],[a.time.format.utc(":%S"),function(a){return a.getUTCSeconds()}],[a.time.format.utc(".%L"),function(a){return a.getUTCMilliseconds()}]],si=ii(ri);return qi.year=function(a,b){return oi.domain(a.map(ui)).ticks(b).map(ti)},a.time.scale.utc=function(){return gi(a.scale.linear(),qi,si)},a.text=hb(function(a){return a.responseText}),a.json=function(a,b){return ib(a,"application/json",vi,b)},a.html=function(a,b){return ib(a,"text/html",wi,b)},a.xml=hb(function(a){return a.responseXML}),a}()},{}],30:[function(a,b,c){a("./d3"),b.exports=d3,function(){delete this.d3}()},{"./d3":29}],31:[function(a,b,c){var d=a("icanhaz");b.exports.ich=d,b.exports.getKeywordCount=function(a,b){var c=[];return a.forEach(function(a){for(var d in a){var e=a[d].toString().toLowerCase();e.match(b.toLowerCase())&&c.push(a)}}),c.length},b.exports.getKeyword=function(a,b){var c=[];return a.forEach(function(a){for(var d in a){var e=a[d].toString().toLowerCase();e.match(b.toLowerCase())&&c.push(a)}}),c},b.exports.getColumnTotal=function(a,b){var c=[];return a.forEach(function(a){""!==a[b]&&c.push(+a[b])}),c.reduce(function(a,b){return a+b})},b.exports.getColumnAverage=function(a,b){var c=getColumnTotal(a,b),d=c/a.length;return d},b.exports.getMax=function(a,b){var c=[];return a.forEach(function(a){return 0===c.length?c.push(a):a[b].valueOf()>c[0][b].valueOf()?(c.length=0,c.push(a)):a[b].valueOf()===c[0][b].valueOf()?c.push(a):void 0}),c},b.exports.getMin=function(a,b){var c=[];return a.forEach(function(a){return 0===c.length?c.push(a):a[b].valueOf()<c[0][b].valueOf()?(c.length=0,c.push(a)):a[b].valueOf()===c[0][b].valueOf()?c.push(a):void 0}),c},b.exports.getMatches=function(a,b,c){var d=[];return a.forEach(function(a){var e=a[c].toString().toLowerCase();e===b.toLowerCase()&&d.push(a)}),d},b.exports.mostFrequent=function(a,b){for(var c={},d=0;d<a.length;d++)c[a[d][b]]||(c[a[d][b]]=0),c[a[d][b]]++;var e=[];for(var b in c)e.push([b,c[b]]);return e.sort(function(a,b){return b[1]-a[1]}),e},b.exports.deepCopy=function(a){if("[object Array]"===Object.prototype.toString.call(a)){for(var b=[],c=0,d=a.length;c<d;c++)b[c]=arguments.callee(a[c]);return b}if("object"==typeof a){var c,b={};for(c in a)b[c]=arguments.callee(a[c]);return b}return a},b.exports.getOccurance=function(a,b){for(var c={},d=0;d<a.length;d++)c[a[d][b]]||(c[a[d][b]]=0),c[a[d][b]]++;return c},b.exports.makeColorArrayOfObject=function(a,b,c){var f,c=c,d=Object.keys(a),e=1;return d.map(function(g){(d.length>b.length||d.length<=b.length)&&(f=e%b.length);var h={units:a[g],hexcolor:b[f]};return h[c]=g,e++,f=e,h})},b.exports.makeArrayOfObject=function(a){var b=Object.keys(a);return b.map(function(b){var c={label:b,units:a[b]};return c})}},{icanhaz:2}],32:[function(a,b,c){function f(a,b){var c={};return a.forEach(function(a){c[a]=b[a]}),c}function g(a){var b=!1;return(a.lat&&a.long||a.polygon)&&(b=!0),(a.latitude&&a.longitude||a.polygon)&&(b=!0),(a.geolatitude&&a.geolongitude||a.polygon)&&(b=!0),b}function h(a){return a.latitude&&a.longitude||a.polygon?(a.lat=a.latitude,a.long=a.longitude,delete a.latitude,delete a.longitude,a):a.geolatitude&&a.geolongitude||a.polygon?(a.lat=a.geolatitude,a.long=a.geolongitude,delete a.geolatitude,delete a.geolongitude,a):void 0}function i(a,b,c){var e=(b.toLowerCase(),{type:"Feature",geometry:{type:b,coordinates:[+a.long,+a.lat]},properties:{"marker-size":"small","marker-color":a.hexcolor},opts:c});return e}function j(a,b,c){var e,d=b.toLowerCase();e="LineString"!==b?JSON.parse("[["+a[d]+"]]"):JSON.parse("["+a[d]+"]");var f={type:"Feature",geometry:{type:b,coordinates:e},properties:{fillColor:a.hexcolor,color:a.hexcolor},opts:c};return f}function k(a){var b="";return a.lat&&a.long&&(b="Point"),a.polygon&&(b="Polygon"),a.multipolygon&&(b="MultiPolygon"),a.linestring&&(b="LineString"),b}function l(a){var b=a[0].opts,c=[];for(var d in b)c.push(d);var e=n(c),f={};return f.name="popup"+Math.random(),f.template=m(e),f}function m(a){var b="<ul>",c=a.length;return a.forEach(function(a){c--,b=0===c?b.concat(a,"</ul>"):b.concat(a)}),b}function n(a){var b=[];return a.forEach(function(a){a="<li><b>"+a+":</b> {{"+a+"}}</li>",b.push(a)}),b}var e=(a("mapbox.js"),a("icanhaz"));b.exports.buildOptionObject=f,b.exports.makeupOptionObject=function(a){var b=[];for(var c in a)b.push(c);return b},b.exports.createGeoJSON=function(a,b){var c=[];return a.forEach(function(a){var d=g(a);if(!d||a.lat||a.long||h(a),(a.linestring||a.multipolygon)&&(d=!0),d){if(b)e=f(b,a);else{b=makeupOptionObject(a);var e=f(b,a)}var l=k(a);if(a.polygon||a.multipolygon||a.linestring){var m=j(a,l,e);c.push(m)}else{var n=i(a,l,e);c.push(n)}}}),c},b.exports.confirmGeo=g,b.exports.handleLatLong=h,b.exports.pointJSON=i,b.exports.shapeJSON=j,b.exports.determineType=k,b.exports.loadMap=function(a){var b=L.mapbox.map(a);return b.touchZoom.disable(),b.doubleClickZoom.disable(),b.scrollWheelZoom.disable(),b},b.exports.addTileLayer=function(a,b){var c=L.mapbox.tileLayer(b);c.addTo(a)},b.exports.makePopupTemplate=l,b.exports.templateString=m,b.exports.mustachify=n,b.exports.addMarkerLayer=function(a,b,c,d){if(c){var c={template:c};c.name="popup"+Math.random(),e.addTemplate(c.name,c.template)}else c=l(a),e.addTemplate(c.name,c.template);var f={type:"FeatureCollection",features:a},g=L.geoJson(f,{pointToLayer:L.mapbox.marker.style,style:function(a){return a.properties}}),h=g.getBounds(),i=d&&"MarkerClusterGroup"in L;if(i)var j=new L.MarkerClusterGroup;return b.fitBounds(h),g.eachLayer(function(a){var b=e[c.name](a.feature.opts);a.bindPopup(b.html(),{closeButton:!1}),i&&j.addLayer(a)}),i?b.addLayer(j):g.addTo(b),g}},{icanhaz:2,"mapbox.js":34}],33:[function(a,b,c){var d=function(){function a(a){var b=(""+a).match(n);return b?new l(m(b[1]),m(b[2]),m(b[3]),m(b[4]),m(b[5]),m(b[6]),m(b[7])):null}function b(a,b,f,g,h,i,j){var k=new l(d(a,o),d(b,o),c(f),g>0?g.toString():null,d(h,p),null,c(j));return i&&("string"==typeof i?k.setRawQuery(i.replace(/[^?&=0-9A-Za-z_\-~.%]/g,e)):k.setAllParameters(i)),k}function c(a){return"string"==typeof a?encodeURIComponent(a):null}function d(a,b){return"string"==typeof a?encodeURI(a).replace(b,e):null}function e(a){var b=a.charCodeAt(0);return"%"+"0123456789ABCDEF".charAt(b>>4&15)+"0123456789ABCDEF".charAt(15&b)}function f(a){return a.replace(/(^|\/)\.(?:\/|$)/g,"$1").replace(/\/{2,}/g,"/")}function j(a){if(null===a)return null;for(var d,b=f(a),c=h;(d=b.replace(c,"$1"))!=b;b=d);return b}function k(a,b){var c=a.clone(),d=b.hasScheme();d?c.setRawScheme(b.getRawScheme()):d=b.hasCredentials(),d?c.setRawCredentials(b.getRawCredentials()):d=b.hasDomain(),d?c.setRawDomain(b.getRawDomain()):d=b.hasPort();var e=b.getRawPath(),f=j(e);if(d)c.setPort(b.getPort()),f=f&&f.replace(i,"");else if(d=!!e){if(47!==f.charCodeAt(0)){var g=j(c.getRawPath()||"").replace(i,""),h=g.lastIndexOf("/")+1;f=j((h?g.substring(0,h):"")+j(e)).replace(i,"")}}else f=f&&f.replace(i,""),f!==e&&c.setRawPath(f);return d?c.setRawPath(f):d=b.hasQuery(),d?c.setRawQuery(b.getRawQuery()):d=b.hasFragment(),d&&c.setRawFragment(b.getRawFragment()),c}function l(a,b,c,d,e,f,g){this.scheme_=a,this.credentials_=b,this.domain_=c,this.port_=d,this.path_=e,this.query_=f,this.fragment_=g,this.paramCache_=null}function m(a){return"string"==typeof a&&a.length>0?a:null}var g=new RegExp("(/|^)(?:[^./][^/]*|\\.{2,}(?:[^./][^/]*)|\\.{3,}[^/]*)/\\.\\.(?:/|$)"),h=new RegExp(g),i=/^(?:\.\.\/)*(?:\.\.$)?/;l.prototype.toString=function(){var a=[];return null!==this.scheme_&&a.push(this.scheme_,":"),null!==this.domain_&&(a.push("//"),null!==this.credentials_&&a.push(this.credentials_,"@"),a.push(this.domain_),null!==this.port_&&a.push(":",this.port_.toString())),null!==this.path_&&a.push(this.path_),null!==this.query_&&a.push("?",this.query_),null!==this.fragment_&&a.push("#",this.fragment_),a.join("")},l.prototype.clone=function(){return new l(this.scheme_,this.credentials_,this.domain_,this.port_,this.path_,this.query_,this.fragment_)},l.prototype.getScheme=function(){return this.scheme_&&decodeURIComponent(this.scheme_).toLowerCase()},l.prototype.getRawScheme=function(){return this.scheme_},l.prototype.setScheme=function(a){return this.scheme_=d(a,o),this},l.prototype.setRawScheme=function(a){return this.scheme_=a?a:null,this},l.prototype.hasScheme=function(){return null!==this.scheme_},l.prototype.getCredentials=function(){return this.credentials_&&decodeURIComponent(this.credentials_)},l.prototype.getRawCredentials=function(){return this.credentials_},l.prototype.setCredentials=function(a){return this.credentials_=d(a,o),this},l.prototype.setRawCredentials=function(a){return this.credentials_=a?a:null,this},l.prototype.hasCredentials=function(){return null!==this.credentials_},l.prototype.getDomain=function(){return this.domain_&&decodeURIComponent(this.domain_)},l.prototype.getRawDomain=function(){return this.domain_},l.prototype.setDomain=function(a){return this.setRawDomain(a&&encodeURIComponent(a))},l.prototype.setRawDomain=function(a){return this.domain_=a?a:null,this.setRawPath(this.path_)},l.prototype.hasDomain=function(){return null!==this.domain_},l.prototype.getPort=function(){return this.port_&&decodeURIComponent(this.port_)},l.prototype.setPort=function(a){if(a){if(a=Number(a),a!==(65535&a))throw new Error("Bad port number "+a);this.port_=""+a}else this.port_=null;return this},l.prototype.hasPort=function(){return null!==this.port_},l.prototype.getPath=function(){return this.path_&&decodeURIComponent(this.path_)},l.prototype.getRawPath=function(){return this.path_},l.prototype.setPath=function(a){return this.setRawPath(d(a,p))},l.prototype.setRawPath=function(a){return a?(a=String(a),this.path_=!this.domain_||/^\//.test(a)?a:"/"+a):this.path_=null,this},l.prototype.hasPath=function(){return null!==this.path_},l.prototype.getQuery=function(){return this.query_&&decodeURIComponent(this.query_).replace(/\+/g," ")},l.prototype.getRawQuery=function(){return this.query_},l.prototype.setQuery=function(a){return this.paramCache_=null,this.query_=c(a),this},l.prototype.setRawQuery=function(a){return this.paramCache_=null,this.query_=a?a:null,this},l.prototype.hasQuery=function(){return null!==this.query_},l.prototype.setAllParameters=function(a){if("object"==typeof a&&!(a instanceof Array)&&(a instanceof Object||"[object Array]"!==Object.prototype.toString.call(a))){var b=[],c=-1;for(var d in a){var e=a[d];"string"==typeof e&&(b[++c]=d,b[++c]=e)}a=b}this.paramCache_=null;for(var f=[],g="",h=0;h<a.length;){var d=a[h++],e=a[h++];f.push(g,encodeURIComponent(d.toString())),g="&",e&&f.push("=",encodeURIComponent(e.toString()))}return this.query_=f.join(""),this},l.prototype.checkParameterCache_=function(){if(!this.paramCache_){var a=this.query_;if(a){for(var b=a.split(/[&\?]/),c=[],d=-1,e=0;e<b.length;++e){var f=b[e].match(/^([^=]*)(?:=(.*))?$/);c[++d]=decodeURIComponent(f[1]).replace(/\+/g," "),c[++d]=decodeURIComponent(f[2]||"").replace(/\+/g," ")}this.paramCache_=c}else this.paramCache_=[]}},l.prototype.setParameterValues=function(a,b){"string"==typeof b&&(b=[b]),this.checkParameterCache_();for(var c=0,d=this.paramCache_,e=[],f=0;f<d.length;f+=2)a===d[f]?c<b.length&&e.push(a,b[c++]):e.push(d[f],d[f+1]);for(;c<b.length;)e.push(a,b[c++]);return this.setAllParameters(e),this},l.prototype.removeParameter=function(a){return this.setParameterValues(a,[])},l.prototype.getAllParameters=function(){return this.checkParameterCache_(),this.paramCache_.slice(0,this.paramCache_.length)},l.prototype.getParameterValues=function(a){this.checkParameterCache_();for(var b=[],c=0;c<this.paramCache_.length;c+=2)a===this.paramCache_[c]&&b.push(this.paramCache_[c+1]);return b},l.prototype.getParameterMap=function(a){this.checkParameterCache_();for(var b={},c=0;c<this.paramCache_.length;c+=2){var d=this.paramCache_[c++],e=this.paramCache_[c++];d in b?b[d].push(e):b[d]=[e]}return b},l.prototype.getParameterValue=function(a){this.checkParameterCache_();for(var b=0;b<this.paramCache_.length;b+=2)if(a===this.paramCache_[b])return this.paramCache_[b+1];return null},l.prototype.getFragment=function(){return this.fragment_&&decodeURIComponent(this.fragment_)},l.prototype.getRawFragment=function(){return this.fragment_},l.prototype.setFragment=function(a){return this.fragment_=a?encodeURIComponent(a):null,this},l.prototype.setRawFragment=function(a){return this.fragment_=a?a:null,this},l.prototype.hasFragment=function(){return null!==this.fragment_};var n=new RegExp("^(?:([^:/?#]+):)?(?://(?:([^/?#]*)@)?([^/?#:@]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$"),o=/[#\/\?@]/g,p=/[\#\?]/g;return l.parse=a,l.create=b,l.resolve=k,l.collapse_dots=j,l.utils={mimeTypeOf:function(b){var c=a(b);return/\.html$/.test(c.getPath())?"text/html":"application/javascript"},resolve:function(b,c){return b?k(a(b),a(c)).toString():""+c}},l}(),e={};if(e.atype={NONE:0,URI:1,URI_FRAGMENT:11,SCRIPT:2,STYLE:3,HTML:12,ID:4,IDREF:5,IDREFS:6,GLOBAL_NAME:7,LOCAL_NAME:8,CLASSES:9,FRAME_TARGET:10,MEDIA_QUERY:13},e.atype=e.atype,e.ATTRIBS={"*::class":9,"*::dir":0,"*::draggable":0,"*::hidden":0,"*::id":4,"*::inert":0,"*::itemprop":0,"*::itemref":6,"*::itemscope":0,"*::lang":0,"*::onblur":2,"*::onchange":2,"*::onclick":2,"*::ondblclick":2,"*::onfocus":2,"*::onkeydown":2,"*::onkeypress":2,"*::onkeyup":2,"*::onload":2,"*::onmousedown":2,"*::onmousemove":2,"*::onmouseout":2,"*::onmouseover":2,"*::onmouseup":2,"*::onreset":2,"*::onscroll":2,"*::onselect":2,"*::onsubmit":2,"*::onunload":2,"*::spellcheck":0,"*::style":3,"*::title":0,"*::translate":0,"a::accesskey":0,"a::coords":0,"a::href":1,"a::hreflang":0,"a::name":7,"a::onblur":2,"a::onfocus":2,"a::shape":0,"a::tabindex":0,"a::target":10,"a::type":0,"area::accesskey":0,"area::alt":0,"area::coords":0,"area::href":1,"area::nohref":0,"area::onblur":2,"area::onfocus":2,"area::shape":0,"area::tabindex":0,"area::target":10,"audio::controls":0,"audio::loop":0,"audio::mediagroup":5,"audio::muted":0,"audio::preload":0,"bdo::dir":0,"blockquote::cite":1,"br::clear":0,"button::accesskey":0,"button::disabled":0,"button::name":8,"button::onblur":2,"button::onfocus":2,"button::tabindex":0,"button::type":0,"button::value":0,"canvas::height":0,"canvas::width":0,"caption::align":0,"col::align":0,"col::char":0,"col::charoff":0,"col::span":0,"col::valign":0,"col::width":0,"colgroup::align":0,"colgroup::char":0,"colgroup::charoff":0,"colgroup::span":0,"colgroup::valign":0,"colgroup::width":0,"command::checked":0,"command::command":5,"command::disabled":0,"command::icon":1,"command::label":0,"command::radiogroup":0,"command::type":0,"data::value":0,"del::cite":1,"del::datetime":0,"details::open":0,"dir::compact":0,"div::align":0,"dl::compact":0,"fieldset::disabled":0,"font::color":0,"font::face":0,"font::size":0,"form::accept":0,"form::action":1,"form::autocomplete":0,"form::enctype":0,"form::method":0,"form::name":7,"form::novalidate":0,"form::onreset":2,"form::onsubmit":2,"form::target":10,"h1::align":0,"h2::align":0,"h3::align":0,"h4::align":0,"h5::align":0,"h6::align":0,"hr::align":0,"hr::noshade":0,"hr::size":0,"hr::width":0,"iframe::align":0,"iframe::frameborder":0,"iframe::height":0,"iframe::marginheight":0,"iframe::marginwidth":0,"iframe::width":0,"img::align":0,"img::alt":0,"img::border":0,"img::height":0,"img::hspace":0,"img::ismap":0,"img::name":7,"img::src":1,"img::usemap":11,"img::vspace":0,"img::width":0,"input::accept":0,"input::accesskey":0,"input::align":0,"input::alt":0,"input::autocomplete":0,"input::checked":0,"input::disabled":0,"input::inputmode":0,"input::ismap":0,"input::list":5,"input::max":0,"input::maxlength":0,"input::min":0,"input::multiple":0,"input::name":8,"input::onblur":2,"input::onchange":2,"input::onfocus":2,"input::onselect":2,"input::placeholder":0,"input::readonly":0,"input::required":0,"input::size":0,"input::src":1,"input::step":0,"input::tabindex":0,"input::type":0,"input::usemap":11,"input::value":0,"ins::cite":1,"ins::datetime":0,"label::accesskey":0,"label::for":5,"label::onblur":2,"label::onfocus":2,"legend::accesskey":0,"legend::align":0,"li::type":0,"li::value":0,"map::name":7,"menu::compact":0,"menu::label":0,"menu::type":0,"meter::high":0,"meter::low":0,"meter::max":0,"meter::min":0,"meter::value":0,"ol::compact":0,"ol::reversed":0,"ol::start":0,"ol::type":0,"optgroup::disabled":0,"optgroup::label":0,"option::disabled":0,"option::label":0,"option::selected":0,"option::value":0,"output::for":6,"output::name":8,"p::align":0,"pre::width":0,"progress::max":0,"progress::min":0,"progress::value":0,"q::cite":1,"select::autocomplete":0,"select::disabled":0,"select::multiple":0,"select::name":8,"select::onblur":2,"select::onchange":2,"select::onfocus":2,"select::required":0,"select::size":0,"select::tabindex":0,"source::type":0,"table::align":0,"table::bgcolor":0,"table::border":0,"table::cellpadding":0,"table::cellspacing":0,"table::frame":0,"table::rules":0,"table::summary":0,"table::width":0,"tbody::align":0,"tbody::char":0,"tbody::charoff":0,"tbody::valign":0,"td::abbr":0,"td::align":0,"td::axis":0,"td::bgcolor":0,"td::char":0,"td::charoff":0,"td::colspan":0,"td::headers":6,"td::height":0,"td::nowrap":0,"td::rowspan":0,"td::scope":0,"td::valign":0,"td::width":0,"textarea::accesskey":0,"textarea::autocomplete":0,"textarea::cols":0,"textarea::disabled":0,"textarea::inputmode":0,"textarea::name":8,"textarea::onblur":2,"textarea::onchange":2,"textarea::onfocus":2,"textarea::onselect":2,"textarea::placeholder":0,"textarea::readonly":0,"textarea::required":0,"textarea::rows":0,"textarea::tabindex":0,"textarea::wrap":0,"tfoot::align":0,"tfoot::char":0,"tfoot::charoff":0,"tfoot::valign":0,"th::abbr":0,"th::align":0,"th::axis":0,"th::bgcolor":0,"th::char":0,"th::charoff":0,"th::colspan":0,"th::headers":6,"th::height":0,"th::nowrap":0,"th::rowspan":0,"th::scope":0,"th::valign":0,"th::width":0,"thead::align":0,"thead::char":0,"thead::charoff":0,"thead::valign":0,"tr::align":0,"tr::bgcolor":0,"tr::char":0,"tr::charoff":0,"tr::valign":0,"track::default":0,"track::kind":0,"track::label":0,"track::srclang":0,"ul::compact":0,"ul::type":0,"video::controls":0,"video::height":0,"video::loop":0,"video::mediagroup":5,"video::muted":0,"video::poster":1,"video::preload":0,"video::width":0},e.ATTRIBS=e.ATTRIBS,e.eflags={OPTIONAL_ENDTAG:1,EMPTY:2,CDATA:4,RCDATA:8,UNSAFE:16,FOLDABLE:32,SCRIPT:64,STYLE:128,VIRTUALIZED:256},e.eflags=e.eflags,e.ELEMENTS={a:0,abbr:0,acronym:0,address:0,applet:272,area:2,article:0,aside:0,audio:0,b:0,base:274,basefont:274,bdi:0,bdo:0,big:0,blockquote:0,body:305,br:2,button:0,canvas:0,caption:0,center:0,cite:0,code:0,col:2,colgroup:1,command:2,data:0,datalist:0,dd:1,del:0,details:0,dfn:0,dialog:272,dir:0,div:0,dl:0,dt:1,em:0,fieldset:0,figcaption:0,figure:0,font:0,footer:0,form:0,frame:274,frameset:272,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:305,header:0,hgroup:0,hr:2,html:305,i:0,iframe:4,img:2,input:2,ins:0,isindex:274,kbd:0,keygen:274,label:0,legend:0,li:1,link:274,map:0,mark:0,menu:0,meta:274,meter:0,nav:0,nobr:0,noembed:276,noframes:276,noscript:276,object:272,ol:0,optgroup:0,option:1,output:0,p:1,param:274,pre:0,progress:0,q:0,s:0,samp:0,script:84,section:0,select:0,small:0,source:2,span:0,strike:0,strong:0,style:148,sub:0,summary:0,sup:0,table:0,tbody:1,td:1,textarea:8,tfoot:1,th:1,thead:1,time:0,title:280,tr:1,track:2,tt:0,u:0,ul:0,var:0,video:0,wbr:2},e.ELEMENTS=e.ELEMENTS,e.ELEMENT_DOM_INTERFACES={a:"HTMLAnchorElement",abbr:"HTMLElement",acronym:"HTMLElement",address:"HTMLElement",applet:"HTMLAppletElement",area:"HTMLAreaElement",article:"HTMLElement",aside:"HTMLElement",audio:"HTMLAudioElement",b:"HTMLElement",base:"HTMLBaseElement",basefont:"HTMLBaseFontElement",bdi:"HTMLElement",bdo:"HTMLElement",big:"HTMLElement",blockquote:"HTMLQuoteElement",body:"HTMLBodyElement",br:"HTMLBRElement",button:"HTMLButtonElement",canvas:"HTMLCanvasElement",caption:"HTMLTableCaptionElement",center:"HTMLElement",cite:"HTMLElement",code:"HTMLElement",col:"HTMLTableColElement",colgroup:"HTMLTableColElement",command:"HTMLCommandElement",data:"HTMLElement",datalist:"HTMLDataListElement",dd:"HTMLElement",del:"HTMLModElement",details:"HTMLDetailsElement",dfn:"HTMLElement",dialog:"HTMLDialogElement",dir:"HTMLDirectoryElement",div:"HTMLDivElement",dl:"HTMLDListElement",dt:"HTMLElement",em:"HTMLElement",fieldset:"HTMLFieldSetElement",figcaption:"HTMLElement",figure:"HTMLElement",font:"HTMLFontElement",footer:"HTMLElement",form:"HTMLFormElement",frame:"HTMLFrameElement",frameset:"HTMLFrameSetElement",h1:"HTMLHeadingElement",h2:"HTMLHeadingElement",h3:"HTMLHeadingElement",h4:"HTMLHeadingElement",h5:"HTMLHeadingElement",h6:"HTMLHeadingElement",head:"HTMLHeadElement",header:"HTMLElement",hgroup:"HTMLElement",hr:"HTMLHRElement",html:"HTMLHtmlElement",i:"HTMLElement",iframe:"HTMLIFrameElement",img:"HTMLImageElement",input:"HTMLInputElement",ins:"HTMLModElement",isindex:"HTMLUnknownElement",kbd:"HTMLElement",keygen:"HTMLKeygenElement",label:"HTMLLabelElement",legend:"HTMLLegendElement",li:"HTMLLIElement",link:"HTMLLinkElement",map:"HTMLMapElement",mark:"HTMLElement",menu:"HTMLMenuElement",meta:"HTMLMetaElement",meter:"HTMLMeterElement",nav:"HTMLElement",nobr:"HTMLElement",noembed:"HTMLElement",noframes:"HTMLElement",noscript:"HTMLElement",object:"HTMLObjectElement",ol:"HTMLOListElement",optgroup:"HTMLOptGroupElement",option:"HTMLOptionElement",output:"HTMLOutputElement",p:"HTMLParagraphElement",param:"HTMLParamElement",pre:"HTMLPreElement",progress:"HTMLProgressElement",q:"HTMLQuoteElement",s:"HTMLElement",samp:"HTMLElement",script:"HTMLScriptElement",section:"HTMLElement",select:"HTMLSelectElement",small:"HTMLElement",source:"HTMLSourceElement",span:"HTMLSpanElement",strike:"HTMLElement",strong:"HTMLElement",style:"HTMLStyleElement",sub:"HTMLElement",summary:"HTMLElement",sup:"HTMLElement",table:"HTMLTableElement",tbody:"HTMLTableSectionElement",td:"HTMLTableDataCellElement",textarea:"HTMLTextAreaElement",tfoot:"HTMLTableSectionElement",th:"HTMLTableHeaderCellElement",thead:"HTMLTableSectionElement",time:"HTMLTimeElement",title:"HTMLTitleElement",tr:"HTMLTableRowElement",track:"HTMLTrackElement",tt:"HTMLElement",u:"HTMLElement",ul:"HTMLUListElement",var:"HTMLElement",video:"HTMLVideoElement",wbr:"HTMLElement"},e.ELEMENT_DOM_INTERFACES=e.ELEMENT_DOM_INTERFACES,e.ueffects={NOT_LOADED:0,SAME_DOCUMENT:1,NEW_DOCUMENT:2},e.ueffects=e.ueffects,e.URIEFFECTS={"a::href":2,"area::href":2,"blockquote::cite":0,"command::icon":1,"del::cite":0,"form::action":2,"img::src":1,"input::src":1,"ins::cite":0,"q::cite":0,"video::poster":1},e.URIEFFECTS=e.URIEFFECTS,e.ltypes={UNSANDBOXED:2,SANDBOXED:1,DATA:0},e.ltypes=e.ltypes,e.LOADERTYPES={"a::href":2,"area::href":2,"blockquote::cite":2,"command::icon":1,"del::cite":2,"form::action":2,"img::src":1,"input::src":1,"ins::cite":2,"q::cite":2,"video::poster":1},e.LOADERTYPES=e.LOADERTYPES,"i"!=="I".toLowerCase())throw"I/i problem";var f=function(a){function k(a){if(f.hasOwnProperty(a))return f[a];var b=a.match(g);if(b)return String.fromCharCode(parseInt(b[1],10));if(b=a.match(h))return String.fromCharCode(parseInt(b[1],16));if(j&&i.test(a)){j.innerHTML="&"+a+";";var c=j.textContent;return f[a]=c,c}return"&"+a+";"}function l(a,b){return k(b)}function n(a){return a.replace(m,"")}function q(a){return a.replace(o,l)}function w(a){return(""+a).replace(r,"&amp;").replace(t,"&lt;").replace(u,"&gt;").replace(v,"&#34;")}function x(a){return a.replace(s,"&amp;$1").replace(t,"&lt;").replace(u,"&gt;")}function B(a){var b={cdata:a.cdata||a.cdata,comment:a.comment||a.comment,endDoc:a.endDoc||a.endDoc,endTag:a.endTag||a.endTag,pcdata:a.pcdata||a.pcdata,rcdata:a.rcdata||a.rcdata,startDoc:a.startDoc||a.startDoc,startTag:a.startTag||a.startTag};return function(a,c){return D(a,b,c)}}function D(a,b,c){var g=G(a),h={noMoreGT:!1,noMoreEndComments:!1};F(b,g,0,h,c)}function E(a,b,c,d,e){return function(){F(a,b,c,d,e)}}function F(b,c,d,e,f){try{b.startDoc&&0==d&&b.startDoc(f);for(var g,h,i,j=d,k=c.length;j<k;){var l=c[j++],m=c[j];switch(l){case"&":p.test(m)?(b.pcdata&&b.pcdata("&"+m,f,C,E(b,c,j,e,f)),j++):b.pcdata&&b.pcdata("&amp;",f,C,E(b,c,j,e,f));break;case"</":(g=/^([-\w:]+)[^\'\"]*/.exec(m))?g[0].length===m.length&&">"===c[j+1]?(j+=2,i=g[1].toLowerCase(),b.endTag&&b.endTag(i,f,C,E(b,c,j,e,f))):j=H(c,j,b,f,C,e):b.pcdata&&b.pcdata("&lt;/",f,C,E(b,c,j,e,f));break;case"<":if(g=/^([-\w:]+)\s*\/?/.exec(m))if(g[0].length===m.length&&">"===c[j+1]){j+=2,i=g[1].toLowerCase(),b.startTag&&b.startTag(i,[],f,C,E(b,c,j,e,f));var n=a.ELEMENTS[i];if(n&A){var o={name:i,next:j,eflags:n};j=K(c,o,b,f,C,e)}}else j=I(c,j,b,f,C,e);else b.pcdata&&b.pcdata("&lt;",f,C,E(b,c,j,e,f));break;case"<!--":if(!e.noMoreEndComments){for(h=j+1;h<k&&(">"!==c[h]||!/--$/.test(c[h-1]));h++);if(h<k){if(b.comment){var q=c.slice(j,h).join("");b.comment(q.substr(0,q.length-2),f,C,E(b,c,h+1,e,f))}j=h+1}else e.noMoreEndComments=!0}e.noMoreEndComments&&b.pcdata&&b.pcdata("&lt;!--",f,C,E(b,c,j,e,f));break;case"<!":if(/^\w/.test(m)){if(!e.noMoreGT){for(h=j+1;h<k&&">"!==c[h];h++);h<k?j=h+1:e.noMoreGT=!0}e.noMoreGT&&b.pcdata&&b.pcdata("&lt;!",f,C,E(b,c,j,e,f))}else b.pcdata&&b.pcdata("&lt;!",f,C,E(b,c,j,e,f));break;case"<?":if(!e.noMoreGT){for(h=j+1;h<k&&">"!==c[h];h++);h<k?j=h+1:e.noMoreGT=!0}e.noMoreGT&&b.pcdata&&b.pcdata("&lt;?",f,C,E(b,c,j,e,f));break;case">":b.pcdata&&b.pcdata("&gt;",f,C,E(b,c,j,e,f));break;case"":break;default:b.pcdata&&b.pcdata(l,f,C,E(b,c,j,e,f))}}b.endDoc&&b.endDoc(f)}catch(a){if(a!==C)throw a}}function G(a){var b=/(<\/|<\!--|<[!?]|[&<>])/g;if(a+="",z)return a.split(b);for(var e,c=[],d=0;null!==(e=b.exec(a));)c.push(a.substring(d,e.index)),c.push(e[0]),d=e.index+e[0].length;return c.push(a.substring(d)),c}function H(a,b,c,d,e,f){var g=L(a,b);return g?(c.endTag&&c.endTag(g.name,d,e,E(c,a,b,f,d)),g.next):a.length}function I(a,b,c,d,e,f){var g=L(a,b);return g?(c.startTag&&c.startTag(g.name,g.attrs,d,e,E(c,a,g.next,f,d)),g.eflags&A?K(a,g,c,d,e,f):g.next):a.length}function K(b,c,d,e,f,g){var h=b.length;J.hasOwnProperty(c.name)||(J[c.name]=new RegExp("^"+c.name+"(?:[\\s\\/]|$)","i"));for(var i=J[c.name],j=c.next,k=c.next+1;k<h&&("</"!==b[k-1]||!i.test(b[k]));k++);k<h&&(k-=1);var l=b.slice(j,k).join("");if(c.eflags&a.eflags.CDATA)d.cdata&&d.cdata(l,e,f,E(d,b,k,g,e));else{if(!(c.eflags&a.eflags.RCDATA))throw new Error("bug");d.rcdata&&d.rcdata(x(l),e,f,E(d,b,k,g,e))}return k}function L(b,c){var d=/^([-\w:]+)/.exec(b[c]),e={};e.name=d[1].toLowerCase(),e.eflags=a.ELEMENTS[e.name];for(var f=b[c].substr(d[0].length),g=c+1,h=b.length;g<h&&">"!==b[g];g++)f+=b[g];if(!(h<=g)){for(var i=[];""!==f;)if(d=y.exec(f)){if(d[4]&&!d[5]||d[6]&&!d[7]){for(var j=d[4]||d[6],k=!1,l=[f,b[g++]];g<h;g++){if(k){if(">"===b[g])break}else 0<=b[g].indexOf(j)&&(k=!0);l.push(b[g])}if(h<=g)break;f=l.join("");continue}var m=d[1].toLowerCase(),n=d[2]?M(d[3]):"";i.push(m,n),f=f.substr(d[0].length)}else f=f.replace(/^[\s\S][^a-z\s]*/,"");return e.attrs=i,e.next=g+1,e}}function M(a){var b=a.charCodeAt(0);return 34!==b&&39!==b||(a=a.substr(1,a.length-2)),q(n(a))}function N(b){var c,d,e=function(a,b){d||b.push(a)};return B({startDoc:function(a){c=[],d=!1},startTag:function(e,f,g){if(!d&&a.ELEMENTS.hasOwnProperty(e)){var h=a.ELEMENTS[e];if(!(h&a.eflags.FOLDABLE)){var i=b(e,f);if(!i)return void(d=!(h&a.eflags.EMPTY));if("object"!=typeof i)throw new Error("tagPolicy did not return object (old API?)");if(!("attribs"in i))throw new Error("tagPolicy gave no attribs");f=i.attribs;var j,k;if("tagName"in i?(k=i.tagName,j=a.ELEMENTS[k]):(k=e,j=h),h&a.eflags.OPTIONAL_ENDTAG){var l=c[c.length-1];!l||l.orig!==e||l.rep===k&&e===k||g.push("</",l.rep,">")}h&a.eflags.EMPTY||c.push({orig:e,rep:k}),g.push("<",k);for(var m=0,n=f.length;m<n;m+=2){var o=f[m],p=f[m+1];null!==p&&void 0!==p&&g.push(" ",o,'="',w(p),'"')}g.push(">"),h&a.eflags.EMPTY&&!(j&a.eflags.EMPTY)&&g.push("</",k,">")}}},endTag:function(b,e){if(d)return void(d=!1);if(a.ELEMENTS.hasOwnProperty(b)){var f=a.ELEMENTS[b];if(!(f&(a.eflags.EMPTY|a.eflags.FOLDABLE))){var g;if(f&a.eflags.OPTIONAL_ENDTAG)for(g=c.length;--g>=0;){var h=c[g].orig;if(h===b)break;if(!(a.ELEMENTS[h]&a.eflags.OPTIONAL_ENDTAG))return}else for(g=c.length;--g>=0&&c[g].orig!==b;);if(g<0)return;for(var i=c.length;--i>g;){var j=c[i].rep;a.ELEMENTS[j]&a.eflags.OPTIONAL_ENDTAG||e.push("</",j,">")}g<c.length&&(b=c[g].rep),c.length=g,e.push("</",b,">")}}},pcdata:e,rcdata:e,cdata:e,endDoc:function(a){for(;c.length;c.length--)a.push("</",c[c.length-1].rep,">")}})}function P(a,b,c,e,f){if(!f)return null;try{var g=d.parse(""+a);if(g&&(!g.hasScheme()||O.test(g.getScheme()))){var h=f(g,b,c,e);return h?h.toString():null}}catch(a){return null}return null}function Q(a,b,c,d,e){if(c||a(b+" removed",{change:"removed",tagName:b}),d!==e){var f="changed";d&&!e?f="removed":!d&&e&&(f="added"),a(b+"."+c+" "+f,{change:f,tagName:b,attribName:c,oldValue:d,newValue:e})}}function R(a,b,c){var d;return d=b+"::"+c,a.hasOwnProperty(d)?a[d]:(d="*::"+c,a.hasOwnProperty(d)?a[d]:void 0)}function T(b,c){return R(a.LOADERTYPES,b,c)}function U(b,c){return R(a.URIEFFECTS,b,c)}function V(d,f,g,h,i){for(var j=0;j<f.length;j+=2){var o,k=f[j],l=f[j+1],m=l,n=null;if(o=d+"::"+k,(a.ATTRIBS.hasOwnProperty(o)||(o="*::"+k,a.ATTRIBS.hasOwnProperty(o)))&&(n=a.ATTRIBS[o]),null!==n)switch(n){case a.atype.NONE:break;case a.atype.SCRIPT:l=null,i&&Q(i,d,k,m,l);break;case a.atype.STYLE:if("undefined"==typeof b){l=null,i&&Q(i,d,k,m,l);break}var p=[];b(l,{declaration:function(b,d){var f=b.toLowerCase(),h=e[f];h&&(c(f,h,d,g?function(b){return P(b,a.ueffects.SAME_DOCUMENT,a.ltypes.SANDBOXED,{TYPE:"CSS",CSS_PROP:f},g)}:null),p.push(b+": "+d.join(" ")))}}),l=p.length>0?p.join(" ; "):null,i&&Q(i,d,k,m,l);break;case a.atype.ID:case a.atype.IDREF:case a.atype.IDREFS:case a.atype.GLOBAL_NAME:case a.atype.LOCAL_NAME:case a.atype.CLASSES:l=h?h(l):l,i&&Q(i,d,k,m,l);break;case a.atype.URI:l=P(l,U(d,k),T(d,k),{TYPE:"MARKUP",XML_ATTR:k,XML_TAG:d},g),i&&Q(i,d,k,m,l);break;case a.atype.URI_FRAGMENT:l&&"#"===l.charAt(0)?(l=l.substring(1),l=h?h(l):l,null!==l&&void 0!==l&&(l="#"+l)):l=null,i&&Q(i,d,k,m,l);break;default:l=null,i&&Q(i,d,k,m,l)}else l=null,i&&Q(i,d,k,m,l);f[j+1]=l}return f}function W(b,c,d){return function(e,f){return a.ELEMENTS[e]&a.eflags.UNSAFE?void(d&&Q(d,e,void 0,void 0,void 0)):{attribs:V(e,f,b,c,d)}}}function X(a,b){var c=[];return N(b)(a,c),c.join("")}function Y(a,b,c,d){var e=W(b,c,d);return X(a,e)}var b,c,e;"undefined"!=typeof window&&(b=window.parseCssDeclarations,c=window.sanitizeCssProperty,e=window.cssSchema);var f={lt:"<",LT:"<",gt:">",GT:">",amp:"&",AMP:"&",quot:'"',apos:"'",nbsp:"Â "},g=/^#(\d+)$/,h=/^#x([0-9A-Fa-f]+)$/,i=/^[A-Za-z][A-za-z0-9]+$/,j="undefined"!=typeof window&&window.document?window.document.createElement("textarea"):null,m=/\0/g,o=/&(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/g,p=/^(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/,r=/&/g,s=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi,t=/[<]/g,u=/>/g,v=/\"/g,y=new RegExp("^\\s*([-.:\\w]+)(?:\\s*(=)\\s*((\")[^\"]*(\"|$)|(')[^']*('|$)|(?=[a-z][-\\w]*\\s*=)|[^\"'\\s]*))?","i"),z=3==="a,b".split(/(,)/).length,A=a.eflags.CDATA|a.eflags.RCDATA,C={},J={},O=/^(?:https?|mailto|data)$/i,Z={};return Z.escapeAttrib=Z.escapeAttrib=w,Z.makeHtmlSanitizer=Z.makeHtmlSanitizer=N,Z.makeSaxParser=Z.makeSaxParser=B,Z.makeTagPolicy=Z.makeTagPolicy=W,Z.normalizeRCData=Z.normalizeRCData=x,Z.sanitize=Z.sanitize=Y,Z.sanitizeAttribs=Z.sanitizeAttribs=V,Z.sanitizeWithPolicy=Z.sanitizeWithPolicy=X,Z.unescapeEntities=Z.unescapeEntities=q,Z}(e),g=f.sanitize;e.ATTRIBS["*::style"]=0,
e.ELEMENTS.style=0,e.ATTRIBS["a::target"]=0,e.ELEMENTS.video=0,e.ATTRIBS["video::src"]=0,e.ATTRIBS["video::poster"]=0,e.ATTRIBS["video::controls"]=0,e.ELEMENTS.audio=0,e.ATTRIBS["audio::src"]=0,e.ATTRIBS["video::autoplay"]=0,e.ATTRIBS["video::controls"]=0,"undefined"!=typeof b&&(b.exports=g)},{}],34:[function(a,b,c){a("./leaflet"),a("./mapbox")},{"./leaflet":35,"./mapbox":36}],35:[function(a,b,c){window.L=a("leaflet/dist/leaflet-src")},{"leaflet/dist/leaflet-src":39}],36:[function(a,b,c){window.L.Icon.Default.imagePath="//api.tiles.mapbox.com/mapbox.js/v"+a("./package.json").version+"/images",L.mapbox=b.exports={VERSION:a("./package.json").version,geocoder:a("./src/geocoder"),marker:a("./src/marker"),tileLayer:a("./src/tile_layer"),shareControl:a("./src/share_control"),legendControl:a("./src/legend_control"),geocoderControl:a("./src/geocoder_control"),gridControl:a("./src/grid_control"),gridLayer:a("./src/grid_layer"),markerLayer:a("./src/marker_layer"),map:a("./src/map"),config:a("./src/config"),sanitize:a("./src/sanitize"),template:a("mustache").to_html}},{"./package.json":41,"./src/config":42,"./src/geocoder":43,"./src/geocoder_control":44,"./src/grid_control":46,"./src/grid_layer":47,"./src/legend_control":48,"./src/map":50,"./src/marker":51,"./src/marker_layer":52,"./src/sanitize":54,"./src/share_control":55,"./src/tile_layer":56,mustache:40}],37:[function(a,b,c){function d(a,b,c){function g(a){return a>=200&&a<300||304===a}function h(){void 0===f.status||g(f.status)?b.call(f,null,f):b.call(f,f,null)}if("undefined"==typeof window.XMLHttpRequest)return b(Error("Browser not supported"));if("undefined"==typeof c){var e=a.match(/^\s*https?:\/\/[^\/]*/);c=e&&e[0]!==location.protocol+"//"+location.domain+(location.port?":"+location.port:"")}var f;return f=!c||"object"!=typeof window.XDomainRequest&&"function"!=typeof window.XDomainRequest?new window.XMLHttpRequest:new window.XDomainRequest,"onload"in f?f.onload=h:f.onreadystatechange=function(){4===f.readyState&&h()},f.onerror=function(c){b.call(this,c,null),b=function(){}},f.onprogress=function(){},f.ontimeout=function(a){b.call(this,a,null),b=function(){}},f.onabort=function(a){b.call(this,a,null),b=function(){}},f.open("GET",a,!0),f.send(null),d}"undefined"!=typeof b&&(b.exports=d)},{}],38:[function(a,b,c){!function(a){function k(a){if(k[a]!==f)return k[a];var c;if("bug-string-char-index"==a)c="a"!="a"[0];else if("json"==a)c=k("json-stringify")&&k("json-parse");else{var d,e='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==a){var g=i.stringify,h="function"==typeof g&&j;if(h){(d=function(){return 1}).toJSON=d;try{h="0"===g(0)&&"0"===g(new Number)&&'""'==g(new String)&&g(b)===f&&g(f)===f&&g()===f&&"1"===g(d)&&"[1]"==g([d])&&"[null]"==g([f])&&"null"==g(null)&&"[null,null,null]"==g([f,b,null])&&g({a:[d,!0,!1,null,"\0\b\n\f\r\t"]})==e&&"1"===g(null,d)&&"[\n 1,\n 2\n]"==g([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==g(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==g(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==g(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==g(new Date(-1))}catch(a){h=!1}}c=h}if("json-parse"==a){var l=i.parse;if("function"==typeof l)try{if(0===l("0")&&!l(!1)){d=l(e);var m=5==d.a.length&&1===d.a[0];if(m){try{m=!l('"\t"')}catch(a){}if(m)try{m=1!==l("01")}catch(a){}if(m)try{m=1!==l("1.")}catch(a){}}}}catch(a){m=!1}c=m}}return k[a]=!!c}var d,e,f,b={}.toString,g="function"==typeof define&&define.amd,h="object"==typeof JSON&&JSON,i="object"==typeof c&&c&&!c.nodeType&&c;i&&h?(i.stringify=h.stringify,i.parse=h.parse):i=a.JSON=h||{};var j=new Date(-0xc782b5b800cec);try{j=j.getUTCFullYear()==-109252&&0===j.getUTCMonth()&&1===j.getUTCDate()&&10==j.getUTCHours()&&37==j.getUTCMinutes()&&6==j.getUTCSeconds()&&708==j.getUTCMilliseconds()}catch(a){}if(!k("json")){var l="[object Function]",m="[object Date]",n="[object Number]",o="[object String]",p="[object Array]",q="[object Boolean]",r=k("bug-string-char-index");if(!j)var s=Math.floor,t=[0,31,59,90,120,151,181,212,243,273,304,334],u=function(a,b){return t[b]+365*(a-1970)+s((a-1969+(b=+(b>1)))/4)-s((a-1901+b)/100)+s((a-1601+b)/400)};(d={}.hasOwnProperty)||(d=function(a){var e,c={};return(c.__proto__=null,c.__proto__={toString:1},c).toString!=b?d=function(a){var b=this.__proto__,c=a in(this.__proto__=null,this);return this.__proto__=b,c}:(e=c.constructor,d=function(a){var b=(this.constructor||e).prototype;return a in this&&!(a in b&&this[a]===b[a])}),c=null,d.call(this,a)});var v={boolean:1,number:1,string:1,undefined:1},w=function(a,b){var c=typeof a[b];return"object"==c?!!a[b]:!v[c]};if(e=function(a,c){var g,h,i,f=0;(g=function(){this.valueOf=0}).prototype.valueOf=0,h=new g;for(i in h)d.call(h,i)&&f++;return g=h=null,f?e=2==f?function(a,c){var g,e={},f=b.call(a)==l;for(g in a)f&&"prototype"==g||d.call(e,g)||!(e[g]=1)||!d.call(a,g)||c(g)}:function(a,c){var f,g,e=b.call(a)==l;for(f in a)e&&"prototype"==f||!d.call(a,f)||(g="constructor"===f)||c(f);(g||d.call(a,f="constructor"))&&c(f)}:(h=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],e=function(a,c){var f,g,e=b.call(a)==l,i=!e&&"function"!=typeof a.constructor&&w(a,"hasOwnProperty")?a.hasOwnProperty:d;for(f in a)e&&"prototype"==f||!i.call(a,f)||c(f);for(g=h.length;f=h[--g];i.call(a,f)&&c(f));}),e(a,c)},!k("json-stringify")){var x={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},y="000000",z=function(a,b){return(y+(b||0)).slice(-a)},A="\\u00",B=function(a){var f,b='"',c=0,d=a.length,e=d>10&&r;for(e&&(f=a.split(""));c<d;c++){var g=a.charCodeAt(c);switch(g){case 8:case 9:case 10:case 12:case 13:case 34:case 92:b+=x[g];break;default:if(g<32){b+=A+z(2,g.toString(16));break}b+=e?f[c]:r?a.charAt(c):a[c]}}return b+'"'},C=function(a,c,g,h,i,j,k){var l,r,t,v,w,x,y,A,D,E,F,G,H,I,J,K;try{l=c[a]}catch(a){}if("object"==typeof l&&l)if(r=b.call(l),r!=m||d.call(l,"toJSON"))"function"==typeof l.toJSON&&(r!=n&&r!=o&&r!=p||d.call(l,"toJSON"))&&(l=l.toJSON(a));else if(l>-1/0&&l<1/0){if(u){for(w=s(l/864e5),t=s(w/365.2425)+1970-1;u(t+1,0)<=w;t++);for(v=s((w-u(t,0))/30.42);u(t,v+1)<=w;v++);w=1+w-u(t,v),x=(l%864e5+864e5)%864e5,y=s(x/36e5)%24,A=s(x/6e4)%60,D=s(x/1e3)%60,E=x%1e3}else t=l.getUTCFullYear(),v=l.getUTCMonth(),w=l.getUTCDate(),y=l.getUTCHours(),A=l.getUTCMinutes(),D=l.getUTCSeconds(),E=l.getUTCMilliseconds();l=(t<=0||t>=1e4?(t<0?"-":"+")+z(6,t<0?-t:t):z(4,t))+"-"+z(2,v+1)+"-"+z(2,w)+"T"+z(2,y)+":"+z(2,A)+":"+z(2,D)+"."+z(3,E)+"Z"}else l=null;if(g&&(l=g.call(c,a,l)),null===l)return"null";if(r=b.call(l),r==q)return""+l;if(r==n)return l>-1/0&&l<1/0?""+l:"null";if(r==o)return B(""+l);if("object"==typeof l){for(I=k.length;I--;)if(k[I]===l)throw TypeError();if(k.push(l),F=[],J=j,j+=i,r==p){for(H=0,I=l.length;H<I;H++)G=C(H,l,g,h,i,j,k),F.push(G===f?"null":G);K=F.length?i?"[\n"+j+F.join(",\n"+j)+"\n"+J+"]":"["+F.join(",")+"]":"[]"}else e(h||l,function(a){var b=C(a,l,g,h,i,j,k);b!==f&&F.push(B(a)+":"+(i?" ":"")+b)}),K=F.length?i?"{\n"+j+F.join(",\n"+j)+"\n"+J+"}":"{"+F.join(",")+"}":"{}";return k.pop(),K}};i.stringify=function(a,c,d){var e,f,g,h;if("function"==typeof c||"object"==typeof c&&c)if((h=b.call(c))==l)f=c;else if(h==p){g={};for(var k,i=0,j=c.length;i<j;k=c[i++],h=b.call(k),(h==o||h==n)&&(g[k]=1));}if(d)if((h=b.call(d))==n){if((d-=d%1)>0)for(e="",d>10&&(d=10);e.length<d;e+=" ");}else h==o&&(e=d.length<=10?d:d.slice(0,10));return C("",(k={},k[""]=a,k),f,g,e,"",[])}}if(!k("json-parse")){var F,G,D=String.fromCharCode,E={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},H=function(){throw F=G=null,SyntaxError()},I=function(){for(var c,d,e,f,g,a=G,b=a.length;F<b;)switch(g=a.charCodeAt(F)){case 9:case 10:case 13:case 32:F++;break;case 123:case 125:case 91:case 93:case 58:case 44:return c=r?a.charAt(F):a[F],F++,c;case 34:for(c="@",F++;F<b;)if(g=a.charCodeAt(F),g<32)H();else if(92==g)switch(g=a.charCodeAt(++F)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:c+=E[g],F++;break;case 117:for(d=++F,e=F+4;F<e;F++)g=a.charCodeAt(F),g>=48&&g<=57||g>=97&&g<=102||g>=65&&g<=70||H();c+=D("0x"+a.slice(d,F));break;default:H()}else{if(34==g)break;for(g=a.charCodeAt(F),d=F;g>=32&&92!=g&&34!=g;)g=a.charCodeAt(++F);c+=a.slice(d,F)}if(34==a.charCodeAt(F))return F++,c;H();default:if(d=F,45==g&&(f=!0,g=a.charCodeAt(++F)),g>=48&&g<=57){for(48==g&&(g=a.charCodeAt(F+1),g>=48&&g<=57)&&H(),f=!1;F<b&&(g=a.charCodeAt(F),g>=48&&g<=57);F++);if(46==a.charCodeAt(F)){for(e=++F;e<b&&(g=a.charCodeAt(e),g>=48&&g<=57);e++);e==F&&H(),F=e}if(g=a.charCodeAt(F),101==g||69==g){for(g=a.charCodeAt(++F),43!=g&&45!=g||F++,e=F;e<b&&(g=a.charCodeAt(e),g>=48&&g<=57);e++);e==F&&H(),F=e}return+a.slice(d,F)}if(f&&H(),"true"==a.slice(F,F+4))return F+=4,!0;if("false"==a.slice(F,F+5))return F+=5,!1;if("null"==a.slice(F,F+4))return F+=4,null;H()}return"$"},J=function(a){var b,c;if("$"==a&&H(),"string"==typeof a){if("@"==(r?a.charAt(0):a[0]))return a.slice(1);if("["==a){for(b=[];a=I(),"]"!=a;c||(c=!0))c&&(","==a?(a=I(),"]"==a&&H()):H()),","==a&&H(),b.push(J(a));return b}if("{"==a){for(b={};a=I(),"}"!=a;c||(c=!0))c&&(","==a?(a=I(),"}"==a&&H()):H()),","!=a&&"string"==typeof a&&"@"==(r?a.charAt(0):a[0])&&":"==I()||H(),b[a.slice(1)]=J(I());return b}H()}return a},K=function(a,b,c){var d=L(a,b,c);d===f?delete a[b]:a[b]=d},L=function(a,c,d){var g,f=a[c];if("object"==typeof f&&f)if(b.call(f)==p)for(g=f.length;g--;)K(f,g,d);else e(f,function(a){K(f,a,d)});return d.call(a,c,f)};i.parse=function(a,c){var d,e;return F=0,G=""+a,d=J(I()),"$"!=I()&&H(),F=G=null,c&&b.call(c)==l?L((e={},e[""]=d,e),"",c):d}}}g&&define(function(){return i})}(this)},{}],39:[function(a,b,c){!function(a,c,d){var e=a.L,f={};f.version="0.6.2","object"==typeof b&&"object"==typeof b.exports?b.exports=f:"function"==typeof define&&define.amd&&define(f),f.noConflict=function(){return a.L=e,this},a.L=f,f.Util={extend:function(a){var c,d,e,f,b=Array.prototype.slice.call(arguments,1);for(d=0,e=b.length;d<e;d++){f=b[d]||{};for(c in f)f.hasOwnProperty(c)&&(a[c]=f[c])}return a},bind:function(a,b){var c=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return a.apply(b,c||arguments)}},stamp:function(){var a=0,b="_leaflet_id";return function(c){return c[b]=c[b]||++a,c[b]}}(),invokeEach:function(a,b,c){var d,e;if("object"==typeof a){e=Array.prototype.slice.call(arguments,3);for(d in a)b.apply(c,[d,a[d]].concat(e));return!0}return!1},limitExecByInterval:function(a,b,c){var d,e;return function f(){var g=arguments;return d?void(e=!0):(d=!0,setTimeout(function(){d=!1,e&&(f.apply(c,g),e=!1)},b),void a.apply(c,g))}},falseFn:function(){return!1},formatNum:function(a,b){var c=Math.pow(10,b||5);return Math.round(a*c)/c},trim:function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},splitWords:function(a){return f.Util.trim(a).split(/\s+/)},setOptions:function(a,b){return a.options=f.extend({},a.options,b),a.options},getParamString:function(a,b,c){var d=[];for(var e in a)d.push(encodeURIComponent(c?e.toUpperCase():e)+"="+encodeURIComponent(a[e]));return(b&&b.indexOf("?")!==-1?"&":"?")+d.join("&")},template:function(a,b){return a.replace(/\{ *([\w_]+) *\}/g,function(a,c){var e=b[c];if(e===d)throw new Error("No value provided for variable "+a);return"function"==typeof e&&(e=e(b)),e})},isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function b(b){var c,d,e=["webkit","moz","o","ms"];for(c=0;c<e.length&&!d;c++)d=a[e[c]+b];return d}function d(b){var d=+new Date,e=Math.max(0,16-(d-c));return c=d+e,a.setTimeout(b,e)}var c=0,e=a.requestAnimationFrame||b("RequestAnimationFrame")||d,g=a.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(b){a.clearTimeout(b)};f.Util.requestAnimFrame=function(b,c,g,h){return b=f.bind(b,c),g&&e===d?void b():e.call(a,b,h)},f.Util.cancelAnimFrame=function(b){b&&g.call(a,b)}}(),f.extend=f.Util.extend,f.bind=f.Util.bind,f.stamp=f.Util.stamp,f.setOptions=f.Util.setOptions,f.Class=function(){},f.Class.extend=function(a){var b=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},c=function(){};c.prototype=this.prototype;var d=new c;d.constructor=b,b.prototype=d;for(var e in this)this.hasOwnProperty(e)&&"prototype"!==e&&(b[e]=this[e]);a.statics&&(f.extend(b,a.statics),delete a.statics),a.includes&&(f.Util.extend.apply(null,[d].concat(a.includes)),delete a.includes),a.options&&d.options&&(a.options=f.extend({},d.options,a.options)),f.extend(d,a),d._initHooks=[];var g=this;return b.__super__=g.prototype,d.callInitHooks=function(){if(!this._initHooksCalled){g.prototype.callInitHooks&&g.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var a=0,b=d._initHooks.length;a<b;a++)d._initHooks[a].call(this)}},b},f.Class.include=function(a){f.extend(this.prototype,a)},f.Class.mergeOptions=function(a){f.extend(this.prototype.options,a)},f.Class.addInitHook=function(a){var b=Array.prototype.slice.call(arguments,1),c="function"==typeof a?a:function(){this[a].apply(this,b)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c)};var g="_leaflet_events";f.Mixin={},f.Mixin.Events={addEventListener:function(a,b,c){if(f.Util.invokeEach(a,this.addEventListener,this,b,c))return this;var h,i,j,k,l,m,n,d=this[g]=this[g]||{},e=c&&f.stamp(c);for(a=f.Util.splitWords(a),h=0,i=a.length;h<i;h++)j={action:b,context:c||this},k=a[h],c?(l=k+"_idx",m=l+"_len",n=d[l]=d[l]||{},n[e]||(n[e]=[],d[m]=(d[m]||0)+1),n[e].push(j)):(d[k]=d[k]||[],d[k].push(j));return this},hasEventListeners:function(a){var b=this[g];return!!b&&(a in b&&b[a].length>0||a+"_idx"in b&&b[a+"_idx_len"]>0)},removeEventListener:function(a,b,c){if(!this[g])return this;if(!a)return this.clearAllEventListeners();if(f.Util.invokeEach(a,this.removeEventListener,this,b,c))return this;var h,i,j,k,l,m,n,o,p,d=this[g],e=c&&f.stamp(c);for(a=f.Util.splitWords(a),h=0,i=a.length;h<i;h++)if(j=a[h],m=j+"_idx",n=m+"_len",o=d[m],b){if(k=c&&o?o[e]:d[j]){for(l=k.length-1;l>=0;l--)k[l].action!==b||c&&k[l].context!==c||(p=k.splice(l,1),p[0].action=f.Util.falseFn);c&&o&&0===k.length&&(delete o[e],d[n]--)}}else delete d[j],delete d[m];return this},clearAllEventListeners:function(){return delete this[g],this},fireEvent:function(a,b){if(!this.hasEventListeners(a))return this;var e,h,i,j,k,c=f.Util.extend({},b,{type:a,target:this}),d=this[g];if(d[a])for(e=d[a].slice(),h=0,i=e.length;h<i;h++)e[h].action.call(e[h].context||this,c);j=d[a+"_idx"];for(k in j)if(e=j[k].slice())for(h=0,i=e.length;h<i;h++)e[h].action.call(e[h].context||this,c);return this},addOneTimeEventListener:function(a,b,c){if(f.Util.invokeEach(a,this.addOneTimeEventListener,this,b,c))return this;var d=f.bind(function(){this.removeEventListener(a,b,c).removeEventListener(a,d,c)},this);return this.addEventListener(a,b,c).addEventListener(a,d,c)}},f.Mixin.Events.on=f.Mixin.Events.addEventListener,f.Mixin.Events.off=f.Mixin.Events.removeEventListener,f.Mixin.Events.once=f.Mixin.Events.addOneTimeEventListener,f.Mixin.Events.fire=f.Mixin.Events.fireEvent,function(){var b=!!a.ActiveXObject,e=b&&!a.XMLHttpRequest,g=b&&!c.querySelector,h=b&&!c.addEventListener,i=navigator.userAgent.toLowerCase(),j=i.indexOf("webkit")!==-1,k=i.indexOf("chrome")!==-1,l=i.indexOf("phantom")!==-1,m=i.indexOf("android")!==-1,n=i.search("android [23]")!==-1,o=typeof orientation!=d+"",p=a.navigator&&a.navigator.msPointerEnabled&&a.navigator.msMaxTouchPoints,q="devicePixelRatio"in a&&a.devicePixelRatio>1||"matchMedia"in a&&a.matchMedia("(min-resolution:144dpi)")&&a.matchMedia("(min-resolution:144dpi)").matches,r=c.documentElement,s=b&&"transition"in r.style,t="WebKitCSSMatrix"in a&&"m11"in new a.WebKitCSSMatrix,u="MozPerspective"in r.style,v="OTransition"in r.style,w=!a.L_DISABLE_3D&&(s||t||u||v)&&!l,x=!a.L_NO_TOUCH&&!l&&function(){var a="ontouchstart";if(p||a in r)return!0;var b=c.createElement("div"),d=!1;return!!b.setAttribute&&(b.setAttribute(a,"return;"),"function"==typeof b[a]&&(d=!0),b.removeAttribute(a),b=null,d)}();f.Browser={ie:b,ie6:e,ie7:g,ielt9:h,webkit:j,android:m,android23:n,chrome:k,ie3d:s,webkit3d:t,gecko3d:u,opera3d:v,any3d:w,mobile:o,mobileWebkit:o&&j,mobileWebkit3d:o&&t,mobileOpera:o&&a.opera,touch:x,msTouch:p,retina:q}}(),f.Point=function(a,b,c){this.x=c?Math.round(a):a,this.y=c?Math.round(b):b},f.Point.prototype={clone:function(){return new f.Point(this.x,this.y)},add:function(a){return this.clone()._add(f.point(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(f.point(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(a){a=f.point(a);var b=a.x-this.x,c=a.y-this.y;return Math.sqrt(b*b+c*c)},equals:function(a){return a=f.point(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=f.point(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+f.Util.formatNum(this.x)+", "+f.Util.formatNum(this.y)+")"}},f.point=function(a,b,c){return a instanceof f.Point?a:f.Util.isArray(a)?new f.Point(a[0],a[1]):a===d||null===a?a:new f.Point(a,b,c)},f.Bounds=function(a,b){if(a)for(var c=b?[a,b]:a,d=0,e=c.length;d<e;d++)this.extend(c[d])},f.Bounds.prototype={extend:function(a){return a=f.point(a),this.min||this.max?(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(a.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(a.y,this.max.y)):(this.min=a.clone(),this.max=a.clone()),this},getCenter:function(a){return new f.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return new f.Point(this.min.x,this.max.y)},getTopRight:function(){return new f.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var b,c;return a="number"==typeof a[0]||a instanceof f.Point?f.point(a):f.bounds(a),a instanceof f.Bounds?(b=a.min,c=a.max):b=c=a,b.x>=this.min.x&&c.x<=this.max.x&&b.y>=this.min.y&&c.y<=this.max.y},intersects:function(a){a=f.bounds(a);var b=this.min,c=this.max,d=a.min,e=a.max,g=e.x>=b.x&&d.x<=c.x,h=e.y>=b.y&&d.y<=c.y;return g&&h},isValid:function(){return!(!this.min||!this.max)}},f.bounds=function(a,b){return!a||a instanceof f.Bounds?a:new f.Bounds(a,b)},f.Transformation=function(a,b,c,d){this._a=a,this._b=b,this._c=c,this._d=d},f.Transformation.prototype={transform:function(a,b){return this._transform(a.clone(),b)},_transform:function(a,b){return b=b||1,a.x=b*(this._a*a.x+this._b),a.y=b*(this._c*a.y+this._d),a},untransform:function(a,b){return b=b||1,new f.Point((a.x/b-this._b)/this._a,(a.y/b-this._d)/this._c)}},f.DomUtil={get:function(a){return"string"==typeof a?c.getElementById(a):a},getStyle:function(a,b){var d=a.style[b];if(!d&&a.currentStyle&&(d=a.currentStyle[b]),(!d||"auto"===d)&&c.defaultView){var e=c.defaultView.getComputedStyle(a,null);d=e?e[b]:null}return"auto"===d?null:d},getViewportOffset:function(a){var i,b=0,d=0,e=a,g=c.body,h=c.documentElement,j=f.Browser.ie7;do{if(b+=e.offsetTop||0,d+=e.offsetLeft||0,b+=parseInt(f.DomUtil.getStyle(e,"borderTopWidth"),10)||0,d+=parseInt(f.DomUtil.getStyle(e,"borderLeftWidth"),10)||0,i=f.DomUtil.getStyle(e,"position"),e.offsetParent===g&&"absolute"===i)break;if("fixed"===i){b+=g.scrollTop||h.scrollTop||0,d+=g.scrollLeft||h.scrollLeft||0;break}if("relative"===i&&!e.offsetLeft){var k=f.DomUtil.getStyle(e,"width"),l=f.DomUtil.getStyle(e,"max-width"),m=e.getBoundingClientRect();"none"===k&&"none"===l||(d+=m.left+e.clientLeft),b+=m.top+(g.scrollTop||h.scrollTop||0);break}e=e.offsetParent}while(e);e=a;do{if(e===g)break;b-=e.scrollTop||0,d-=e.scrollLeft||0,f.DomUtil.documentIsLtr()||!f.Browser.webkit&&!j||(d+=e.scrollWidth-e.clientWidth,j&&"hidden"!==f.DomUtil.getStyle(e,"overflow-y")&&"hidden"!==f.DomUtil.getStyle(e,"overflow")&&(d+=17)),e=e.parentNode}while(e);return new f.Point(d,b)},documentIsLtr:function(){return f.DomUtil._docIsLtrCached||(f.DomUtil._docIsLtrCached=!0,f.DomUtil._docIsLtr="ltr"===f.DomUtil.getStyle(c.body,"direction")),f.DomUtil._docIsLtr},create:function(a,b,d){var e=c.createElement(a);return e.className=b,d&&d.appendChild(e),e},hasClass:function(a,b){return a.className.length>0&&new RegExp("(^|\\s)"+b+"(\\s|$)").test(a.className)},addClass:function(a,b){f.DomUtil.hasClass(a,b)||(a.className+=(a.className?" ":"")+b)},removeClass:function(a,b){a.className=f.Util.trim((" "+a.className+" ").replace(" "+b+" "," "))},setOpacity:function(a,b){if("opacity"in a.style)a.style.opacity=b;else if("filter"in a.style){var c=!1,d="DXImageTransform.Microsoft.Alpha";try{c=a.filters.item(d)}catch(a){if(1===b)return}b=Math.round(100*b),c?(c.Enabled=100!==b,c.Opacity=b):a.style.filter+=" progid:"+d+"(opacity="+b+")"}},testProp:function(a){for(var b=c.documentElement.style,d=0;d<a.length;d++)if(a[d]in b)return a[d];return!1},getTranslateString:function(a){var b=f.Browser.webkit3d,c="translate"+(b?"3d":"")+"(",d=(b?",0":"")+")";return c+a.x+"px,"+a.y+"px"+d},getScaleString:function(a,b){var c=f.DomUtil.getTranslateString(b.add(b.multiplyBy(-1*a))),d=" scale("+a+") ";return c+d},setPosition:function(a,b,c){a._leaflet_pos=b,!c&&f.Browser.any3d?(a.style[f.DomUtil.TRANSFORM]=f.DomUtil.getTranslateString(b),f.Browser.mobileWebkit3d&&(a.style.WebkitBackfaceVisibility="hidden")):(a.style.left=b.x+"px",a.style.top=b.y+"px")},getPosition:function(a){return a._leaflet_pos}},f.DomUtil.TRANSFORM=f.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),f.DomUtil.TRANSITION=f.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),f.DomUtil.TRANSITION_END="webkitTransition"===f.DomUtil.TRANSITION||"OTransition"===f.DomUtil.TRANSITION?f.DomUtil.TRANSITION+"End":"transitionend",function(){var b=f.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]),d=f.DomUtil.testProp(["userDrag","WebkitUserDrag","OUserDrag","MozUserDrag","msUserDrag"]);f.extend(f.DomUtil,{disableTextSelection:function(){if(b){var d=c.documentElement.style;this._userSelect=d[b],d[b]="none"}else f.DomEvent.on(a,"selectstart",f.DomEvent.stop)},enableTextSelection:function(){b?(c.documentElement.style[b]=this._userSelect,delete this._userSelect):f.DomEvent.off(a,"selectstart",f.DomEvent.stop)},disableImageDrag:function(){if(d){var b=c.documentElement.style;this._userDrag=b[d],b[d]="none"}else f.DomEvent.on(a,"dragstart",f.DomEvent.stop)},enableImageDrag:function(){d?(c.documentElement.style[d]=this._userDrag,delete this._userDrag):f.DomEvent.off(a,"dragstart",f.DomEvent.stop)}})}(),f.LatLng=function(a,b){var c=parseFloat(a),d=parseFloat(b);if(isNaN(c)||isNaN(d))throw new Error("Invalid LatLng object: ("+a+", "+b+")");this.lat=c,this.lng=d},f.extend(f.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),f.LatLng.prototype={equals:function(a){if(!a)return!1;a=f.latLng(a);var b=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return b<=f.LatLng.MAX_MARGIN},toString:function(a){return"LatLng("+f.Util.formatNum(this.lat,a)+", "+f.Util.formatNum(this.lng,a)+")"},distanceTo:function(a){a=f.latLng(a);var b=6378137,c=f.LatLng.DEG_TO_RAD,d=(a.lat-this.lat)*c,e=(a.lng-this.lng)*c,g=this.lat*c,h=a.lat*c,i=Math.sin(d/2),j=Math.sin(e/2),k=i*i+j*j*Math.cos(g)*Math.cos(h);return 2*b*Math.atan2(Math.sqrt(k),Math.sqrt(1-k))},wrap:function(a,b){var c=this.lng;return a=a||-180,b=b||180,c=(c+b)%(b-a)+(c<a||c===b?b:a),new f.LatLng(this.lat,c)}},f.latLng=function(a,b){return a instanceof f.LatLng?a:f.Util.isArray(a)?new f.LatLng(a[0],a[1]):a===d||null===a?a:"object"==typeof a&&"lat"in a?new f.LatLng(a.lat,"lng"in a?a.lng:a.lon):new f.LatLng(a,b)},f.LatLngBounds=function(a,b){if(a)for(var c=b?[a,b]:a,d=0,e=c.length;d<e;d++)this.extend(c[d])},f.LatLngBounds.prototype={extend:function(a){return a?(a="number"==typeof a[0]||"string"==typeof a[0]||a instanceof f.LatLng?f.latLng(a):f.latLngBounds(a),a instanceof f.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(a.lat,this._southWest.lat),this._southWest.lng=Math.min(a.lng,this._southWest.lng),this._northEast.lat=Math.max(a.lat,this._northEast.lat),this._northEast.lng=Math.max(a.lng,this._northEast.lng)):(this._southWest=new f.LatLng(a.lat,a.lng),this._northEast=new f.LatLng(a.lat,a.lng)):a instanceof f.LatLngBounds&&(this.extend(a._southWest),this.extend(a._northEast)),this):this},pad:function(a){var b=this._southWest,c=this._northEast,d=Math.abs(b.lat-c.lat)*a,e=Math.abs(b.lng-c.lng)*a;return new f.LatLngBounds(new f.LatLng(b.lat-d,b.lng-e),new f.LatLng(c.lat+d,c.lng+e))},getCenter:function(){return new f.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new f.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new f.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){a="number"==typeof a[0]||a instanceof f.LatLng?f.latLng(a):f.latLngBounds(a);var d,e,b=this._southWest,c=this._northEast;return a instanceof f.LatLngBounds?(d=a.getSouthWest(),e=a.getNorthEast()):d=e=a,d.lat>=b.lat&&e.lat<=c.lat&&d.lng>=b.lng&&e.lng<=c.lng},intersects:function(a){a=f.latLngBounds(a);var b=this._southWest,c=this._northEast,d=a.getSouthWest(),e=a.getNorthEast(),g=e.lat>=b.lat&&d.lat<=c.lat,h=e.lng>=b.lng&&d.lng<=c.lng;return g&&h},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a){return!!a&&(a=f.latLngBounds(a),this._southWest.equals(a.getSouthWest())&&this._northEast.equals(a.getNorthEast()))},isValid:function(){return!(!this._southWest||!this._northEast)}},f.latLngBounds=function(a,b){return!a||a instanceof f.LatLngBounds?a:new f.LatLngBounds(a,b)},f.Projection={},f.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(a){var b=f.LatLng.DEG_TO_RAD,c=this.MAX_LATITUDE,d=Math.max(Math.min(c,a.lat),-c),e=a.lng*b,g=d*b;return g=Math.log(Math.tan(Math.PI/4+g/2)),new f.Point(e,g)},unproject:function(a){var b=f.LatLng.RAD_TO_DEG,c=a.x*b,d=(2*Math.atan(Math.exp(a.y))-Math.PI/2)*b;return new f.LatLng(d,c)}},f.Projection.LonLat={project:function(a){return new f.Point(a.lng,a.lat)},unproject:function(a){return new f.LatLng(a.y,a.x)}},f.CRS={latLngToPoint:function(a,b){var c=this.projection.project(a),d=this.scale(b);return this.transformation._transform(c,d)},pointToLatLng:function(a,b){var c=this.scale(b),d=this.transformation.untransform(a,c);return this.projection.unproject(d)},project:function(a){return this.projection.project(a)},scale:function(a){return 256*Math.pow(2,a)}},f.CRS.Simple=f.extend({},f.CRS,{projection:f.Projection.LonLat,transformation:new f.Transformation(1,0,-1,0),scale:function(a){return Math.pow(2,a)}}),f.CRS.EPSG3857=f.extend({},f.CRS,{code:"EPSG:3857",projection:f.Projection.SphericalMercator,transformation:new f.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(a){var b=this.projection.project(a),c=6378137;return b.multiplyBy(c)}}),f.CRS.EPSG900913=f.extend({},f.CRS.EPSG3857,{code:"EPSG:900913"}),f.CRS.EPSG4326=f.extend({},f.CRS,{code:"EPSG:4326",projection:f.Projection.LonLat,transformation:new f.Transformation(1/360,.5,-1/360,.5)}),f.Map=f.Class.extend({includes:f.Mixin.Events,options:{crs:f.CRS.EPSG3857,fadeAnimation:f.DomUtil.TRANSITION&&!f.Browser.android23,trackResize:!0,markerZoomAnimation:f.DomUtil.TRANSITION&&f.Browser.any3d},initialize:function(a,b){b=f.setOptions(this,b),this._initContainer(a),this._initLayout(),this._initEvents(),b.maxBounds&&this.setMaxBounds(b.maxBounds),b.center&&b.zoom!==d&&this.setView(f.latLng(b.center),b.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0,this.callInitHooks(),this._addLayers(b.layers)},setView:function(a,b){return this._resetView(f.latLng(a),this._limitZoom(b)),this},setZoom:function(a,b){return this.setView(this.getCenter(),a,{zoom:b})},zoomIn:function(a,b){return this.setZoom(this._zoom+(a||1),b)},zoomOut:function(a,b){return this.setZoom(this._zoom-(a||1),b)},setZoomAround:function(a,b,c){var d=this.getZoomScale(b),e=this.getSize().divideBy(2),g=a instanceof f.Point?a:this.latLngToContainerPoint(a),h=g.subtract(e).multiplyBy(1-1/d),i=this.containerPointToLatLng(e.add(h));return this.setView(i,b,{zoom:c})},fitBounds:function(a,b){b=b||{},a=a.getBounds?a.getBounds():f.latLngBounds(a);var c=f.point(b.paddingTopLeft||b.padding||[0,0]),d=f.point(b.paddingBottomRight||b.padding||[0,0]),e=this.getBoundsZoom(a,!1,c.add(d)),g=d.subtract(c).divideBy(2),h=this.project(a.getSouthWest(),e),i=this.project(a.getNorthEast(),e),j=this.unproject(h.add(i).divideBy(2).add(g),e);return this.setView(j,e,b)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,b){return this.setView(a,this._zoom,{pan:b})},panBy:function(a){return this.fire("movestart"),this._rawPanBy(f.point(a)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(a){if(a=f.latLngBounds(a),this.options.maxBounds=a,!a)return this._boundsMinZoom=null,this.off("moveend",this._panInsideMaxBounds,this),this;var b=this.getBoundsZoom(a,!0);return this._boundsMinZoom=b,this._loaded&&(this._zoom<b?this.setView(a.getCenter(),b):this.panInsideBounds(a)),this.on("moveend",this._panInsideMaxBounds,this),this},panInsideBounds:function(a){a=f.latLngBounds(a);var b=this.getPixelBounds(),c=b.getBottomLeft(),d=b.getTopRight(),e=this.project(a.getSouthWest()),g=this.project(a.getNorthEast()),h=0,i=0;return d.y<g.y&&(i=Math.ceil(g.y-d.y)),d.x>g.x&&(h=Math.floor(g.x-d.x)),c.y>e.y&&(i=Math.floor(e.y-c.y)),c.x<e.x&&(h=Math.ceil(e.x-c.x)),h||i?this.panBy([h,i]):this},addLayer:function(a){var b=f.stamp(a);return this._layers[b]?this:(this._layers[b]=a,!a.options||isNaN(a.options.maxZoom)&&isNaN(a.options.minZoom)||(this._zoomBoundLayers[b]=a,this._updateZoomLevels()),this.options.zoomAnimation&&f.TileLayer&&a instanceof f.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,a.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(a),this)},removeLayer:function(a){var b=f.stamp(a);if(this._layers[b])return this._loaded&&(a.onRemove(this),this.fire("layerremove",{layer:a})),delete this._layers[b],this._zoomBoundLayers[b]&&(delete this._zoomBoundLayers[b],this._updateZoomLevels()),this.options.zoomAnimation&&f.TileLayer&&a instanceof f.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,a.off("load",this._onTileLayerLoad,this)),this},hasLayer:function(a){return!!a&&f.stamp(a)in this._layers},eachLayer:function(a,b){for(var c in this._layers)a.call(b,this._layers[c]);return this},invalidateSize:function(a){a=f.extend({animate:!1,pan:!0},a===!0?{animate:!0}:a);var b=this.getSize();if(this._sizeChanged=!0,this.options.maxBounds&&this.setMaxBounds(this.options.maxBounds),!this._loaded)return this;var c=this.getSize(),d=b.subtract(c).divideBy(2).round();return d.x||d.y?(a.animate&&a.pan?this.panBy(d):(a.pan&&this._rawPanBy(d),this.fire("move"),clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f.bind(this.fire,this,"moveend"),200)),this.fire("resize",{oldSize:b,newSize:c})):this},addHandler:function(a,b){
if(b){var c=this[a]=new b(this);return this._handlers.push(c),this.options[a]&&c.enable(),this}},remove:function(){return this._loaded&&this.fire("unload"),this._initEvents("off"),delete this._container._leaflet,this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._moved()?this.layerPointToLatLng(this._getCenterLayerPoint()):this._initialCenter},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),b=this.unproject(a.getBottomLeft()),c=this.unproject(a.getTopRight());return new f.LatLngBounds(b,c)},getMinZoom:function(){var a=this.options.minZoom||0,b=this._layersMinZoom||0,c=this._boundsMinZoom||0;return Math.max(a,b,c)},getMaxZoom:function(){var a=this.options.maxZoom===d?1/0:this.options.maxZoom,b=this._layersMaxZoom===d?1/0:this._layersMaxZoom;return Math.min(a,b)},getBoundsZoom:function(a,b,c){a=f.latLngBounds(a);var k,d=this.getMinZoom()-(b?1:0),e=this.getMaxZoom(),g=this.getSize(),h=a.getNorthWest(),i=a.getSouthEast(),j=!0;c=f.point(c||[0,0]);do d++,k=this.project(i,d).subtract(this.project(h,d)).add(c),j=b?k.x<g.x||k.y<g.y:g.contains(k);while(j&&d<=e);return j&&b?null:b?d:d-1},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new f.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var a=this._getTopLeftPoint();return new f.Bounds(a,a.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a){var b=this.options.crs;return b.scale(a)/b.scale(this._zoom)},getScaleZoom:function(a){return this._zoom+Math.log(a)/Math.LN2},project:function(a,b){return b=b===d?this._zoom:b,this.options.crs.latLngToPoint(f.latLng(a),b)},unproject:function(a,b){return b=b===d?this._zoom:b,this.options.crs.pointToLatLng(f.point(a),b)},layerPointToLatLng:function(a){var b=f.point(a).add(this.getPixelOrigin());return this.unproject(b)},latLngToLayerPoint:function(a){var b=this.project(f.latLng(a))._round();return b._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(a){return f.point(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return f.point(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var b=this.containerPointToLayerPoint(f.point(a));return this.layerPointToLatLng(b)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(f.latLng(a)))},mouseEventToContainerPoint:function(a){return f.DomEvent.getMousePosition(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var b=this._container=f.DomUtil.get(a);if(!b)throw new Error("Map container not found.");if(b._leaflet)throw new Error("Map container is already initialized.");b._leaflet=!0},_initLayout:function(){var a=this._container;f.DomUtil.addClass(a,"leaflet-container"+(f.Browser.touch?" leaflet-touch":"")+(f.Browser.retina?" leaflet-retina":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var b=f.DomUtil.getStyle(a,"position");"absolute"!==b&&"relative"!==b&&"fixed"!==b&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._mapPane=a.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=a.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),a.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),a.shadowPane=this._createPane("leaflet-shadow-pane"),a.overlayPane=this._createPane("leaflet-overlay-pane"),a.markerPane=this._createPane("leaflet-marker-pane"),a.popupPane=this._createPane("leaflet-popup-pane");var b=" leaflet-zoom-hide";this.options.markerZoomAnimation||(f.DomUtil.addClass(a.markerPane,b),f.DomUtil.addClass(a.shadowPane,b),f.DomUtil.addClass(a.popupPane,b))},_createPane:function(a,b){return f.DomUtil.create("div",a,b||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(a){a=a?f.Util.isArray(a)?a:[a]:[];for(var b=0,c=a.length;b<c;b++)this.addLayer(a[b])},_resetView:function(a,b,c,d){var e=this._zoom!==b;d||(this.fire("movestart"),e&&this.fire("zoomstart")),this._zoom=b,this._initialCenter=a,this._initialTopLeftPoint=this._getNewTopLeftPoint(a),c?this._initialTopLeftPoint._add(this._getMapPanePos()):f.DomUtil.setPosition(this._mapPane,new f.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var g=!this._loaded;this._loaded=!0,g&&(this.fire("load"),this.eachLayer(this._layerAdd,this)),this.fire("viewreset",{hard:!c}),this.fire("move"),(e||d)&&this.fire("zoomend"),this.fire("moveend",{hard:!c})},_rawPanBy:function(a){f.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var a,b=1/0,c=-(1/0),e=this._getZoomSpan();for(a in this._zoomBoundLayers){var f=this._zoomBoundLayers[a];isNaN(f.options.minZoom)||(b=Math.min(b,f.options.minZoom)),isNaN(f.options.maxZoom)||(c=Math.max(c,f.options.maxZoom))}a===d?this._layersMaxZoom=this._layersMinZoom=d:(this._layersMaxZoom=c,this._layersMinZoom=b),e!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(b){if(f.DomEvent){b=b||"on",f.DomEvent[b](this._container,"click",this._onMouseClick,this);var d,e,c=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(d=0,e=c.length;d<e;d++)f.DomEvent[b](this._container,c[d],this._fireMouseEvent,this);this.options.trackResize&&f.DomEvent[b](a,"resize",this._onResize,this)}},_onResize:function(){f.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=f.Util.requestAnimFrame(this.invalidateSize,this,!1,this._container)},_onMouseClick:function(a){!this._loaded||!a._simulated&&this.dragging&&this.dragging.moved()||a._leaflet_stop||(this.fire("preclick"),this._fireMouseEvent(a))},_fireMouseEvent:function(a){if(this._loaded&&!a._leaflet_stop){var b=a.type;if(b="mouseenter"===b?"mouseover":"mouseleave"===b?"mouseout":b,this.hasEventListeners(b)){"contextmenu"===b&&f.DomEvent.preventDefault(a);var c=this.mouseEventToContainerPoint(a),d=this.containerPointToLayerPoint(c),e=this.layerPointToLatLng(d);this.fire(b,{latlng:e,layerPoint:d,containerPoint:c,originalEvent:a})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var a=0,b=this._handlers.length;a<b;a++)this._handlers[a].disable()},whenReady:function(a,b){return this._loaded?a.call(b||this,this):this.on("load",a,b),this},_layerAdd:function(a){a.onAdd(this),this.fire("layeradd",{layer:a})},_getMapPanePos:function(){return f.DomUtil.getPosition(this._mapPane)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(a,b){var c=this.getSize()._divideBy(2);return this.project(a,b)._subtract(c)._round()},_latLngToNewLayerPoint:function(a,b,c){var d=this._getNewTopLeftPoint(c,b).add(this._getMapPanePos());return this.project(a,b)._subtract(d)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitZoom:function(a){var b=this.getMinZoom(),c=this.getMaxZoom();return Math.max(b,Math.min(c,a))}}),f.map=function(a,b){return new f.Map(a,b)},f.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(a){var b=f.LatLng.DEG_TO_RAD,c=this.MAX_LATITUDE,d=Math.max(Math.min(c,a.lat),-c),e=this.R_MAJOR,g=this.R_MINOR,h=a.lng*b*e,i=d*b,j=g/e,k=Math.sqrt(1-j*j),l=k*Math.sin(i);l=Math.pow((1-l)/(1+l),.5*k);var m=Math.tan(.5*(.5*Math.PI-i))/l;return i=-e*Math.log(m),new f.Point(h,i)},unproject:function(a){for(var o,b=f.LatLng.RAD_TO_DEG,c=this.R_MAJOR,d=this.R_MINOR,e=a.x*b/c,g=d/c,h=Math.sqrt(1-g*g),i=Math.exp(-a.y/c),j=Math.PI/2-2*Math.atan(i),k=15,l=1e-7,m=k,n=.1;Math.abs(n)>l&&--m>0;)o=h*Math.sin(j),n=Math.PI/2-2*Math.atan(i*Math.pow((1-o)/(1+o),.5*h))-j,j+=n;return new f.LatLng(j*b,e)}},f.CRS.EPSG3395=f.extend({},f.CRS,{code:"EPSG:3395",projection:f.Projection.Mercator,transformation:function(){var a=f.Projection.Mercator,b=a.R_MAJOR,c=a.R_MINOR;return new f.Transformation(.5/(Math.PI*b),.5,-.5/(Math.PI*c),.5)}()}),f.TileLayer=f.Class.extend({includes:f.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:f.Browser.mobile,updateWhenIdle:f.Browser.mobile},initialize:function(a,b){b=f.setOptions(this,b),b.detectRetina&&f.Browser.retina&&b.maxZoom>0&&(b.tileSize=Math.floor(b.tileSize/2),b.zoomOffset++,b.minZoom>0&&b.minZoom--,this.options.maxZoom--),b.bounds&&(b.bounds=f.latLngBounds(b.bounds)),this._url=a;var c=this.options.subdomains;"string"==typeof c&&(this.options.subdomains=c.split(""))},onAdd:function(a){this._map=a,this._animated=a._zoomAnimated,this._initContainer(),this._createTileProto(),a.on({viewreset:this._reset,moveend:this._update},this),this._animated&&a.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||(this._limitedUpdate=f.Util.limitExecByInterval(this._update,150,this),a.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(a){return a.addLayer(this),this},onRemove:function(a){this._container.parentNode.removeChild(this._container),a.off({viewreset:this._reset,moveend:this._update},this),this._animated&&a.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||a.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var a=this._map._panes.tilePane;return this._container&&(a.appendChild(this._container),this._setAutoZIndex(a,Math.max)),this},bringToBack:function(){var a=this._map._panes.tilePane;return this._container&&(a.insertBefore(this._container,a.firstChild),this._setAutoZIndex(a,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},setUrl:function(a,b){return this._url=a,b||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==d&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a,b){var e,f,g,c=a.children,d=-b(1/0,-(1/0));for(f=0,g=c.length;f<g;f++)c[f]!==this._container&&(e=parseInt(c[f].style.zIndex,10),isNaN(e)||(d=b(d,e)));this.options.zIndex=this._container.style.zIndex=(isFinite(d)?d:0)+b(1,-1)},_updateOpacity:function(){var a,b=this._tiles;if(f.Browser.ielt9)for(a in b)f.DomUtil.setOpacity(b[a],this.options.opacity);else f.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var a=this._map._panes.tilePane;if(!this._container){if(this._container=f.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated){var b="leaflet-tile-container leaflet-zoom-animated";this._bgBuffer=f.DomUtil.create("div",b,this._container),this._tileContainer=f.DomUtil.create("div",b,this._container)}else this._tileContainer=this._container;a.appendChild(this._container),this.options.opacity<1&&this._updateOpacity()}},_reset:function(a){for(var b in this._tiles)this.fire("tileunload",{tile:this._tiles[b]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),this._tileContainer.innerHTML="",this._animated&&a&&a.hard&&this._clearBgBuffer(),this._initContainer()},_update:function(){if(this._map){var a=this._map.getPixelBounds(),b=this._map.getZoom(),c=this.options.tileSize;if(!(b>this.options.maxZoom||b<this.options.minZoom)){var d=f.bounds(a.min.divideBy(c)._floor(),a.max.divideBy(c)._floor());this._addTilesFromCenterOut(d),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(d)}}},_addTilesFromCenterOut:function(a){var e,g,h,b=[],d=a.getCenter();for(e=a.min.y;e<=a.max.y;e++)for(g=a.min.x;g<=a.max.x;g++)h=new f.Point(g,e),this._tileShouldBeLoaded(h)&&b.push(h);var i=b.length;if(0!==i){b.sort(function(a,b){return a.distanceTo(d)-b.distanceTo(d)});var j=c.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=i,g=0;g<i;g++)this._addTile(b[g],j);this._tileContainer.appendChild(j)}},_tileShouldBeLoaded:function(a){if(a.x+":"+a.y in this._tiles)return!1;var b=this.options;if(!b.continuousWorld){var c=this._getWrapTileNum();if(b.noWrap&&(a.x<0||a.x>=c)||a.y<0||a.y>=c)return!1}if(b.bounds){var d=b.tileSize,e=a.multiplyBy(d),f=e.add([d,d]),g=this._map.unproject(e),h=this._map.unproject(f);if(b.continuousWorld||b.noWrap||(g=g.wrap(),h=h.wrap()),!b.bounds.intersects([g,h]))return!1}return!0},_removeOtherTiles:function(a){var b,c,d,e;for(e in this._tiles)b=e.split(":"),c=parseInt(b[0],10),d=parseInt(b[1],10),(c<a.min.x||c>a.max.x||d<a.min.y||d>a.max.y)&&this._removeTile(e)},_removeTile:function(a){var b=this._tiles[a];this.fire("tileunload",{tile:b,url:b.src}),this.options.reuseTiles?(f.DomUtil.removeClass(b,"leaflet-tile-loaded"),this._unusedTiles.push(b)):b.parentNode===this._tileContainer&&this._tileContainer.removeChild(b),f.Browser.android||(b.onload=null,b.src=f.Util.emptyImageUrl),delete this._tiles[a]},_addTile:function(a,b){var c=this._getTilePos(a),d=this._getTile();f.DomUtil.setPosition(d,c,f.Browser.chrome||f.Browser.android23),this._tiles[a.x+":"+a.y]=d,this._loadTile(d,a),d.parentNode!==this._tileContainer&&b.appendChild(d)},_getZoomForUrl:function(){var a=this.options,b=this._map.getZoom();return a.zoomReverse&&(b=a.maxZoom-b),b+a.zoomOffset},_getTilePos:function(a){var b=this._map.getPixelOrigin(),c=this.options.tileSize;return a.multiplyBy(c).subtract(b)},getTileUrl:function(a){return f.Util.template(this._url,f.extend({s:this._getSubdomain(a),z:a.z,x:a.x,y:a.y},this.options))},_getWrapTileNum:function(){return Math.pow(2,this._getZoomForUrl())},_adjustTilePoint:function(a){var b=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(a.x=(a.x%b+b)%b),this.options.tms&&(a.y=b-a.y-1),a.z=this._getZoomForUrl()},_getSubdomain:function(a){var b=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[b]},_createTileProto:function(){var a=this._tileImg=f.DomUtil.create("img","leaflet-tile");a.style.width=a.style.height=this.options.tileSize+"px",a.galleryimg="no"},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var a=this._unusedTiles.pop();return this._resetTile(a),a}return this._createTile()},_resetTile:function(){},_createTile:function(){var a=this._tileImg.cloneNode(!1);return a.onselectstart=a.onmousemove=f.Util.falseFn,f.Browser.ielt9&&this.options.opacity!==d&&f.DomUtil.setOpacity(a,this.options.opacity),a},_loadTile:function(a,b){a._layer=this,a.onload=this._tileOnLoad,a.onerror=this._tileOnError,this._adjustTilePoint(b),a.src=this.getTileUrl(b)},_tileLoaded:function(){this._tilesToLoad--,this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(f.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var a=this._layer;this.src!==f.Util.emptyImageUrl&&(f.DomUtil.addClass(this,"leaflet-tile-loaded"),a.fire("tileload",{tile:this,url:this.src})),a._tileLoaded()},_tileOnError:function(){var a=this._layer;a.fire("tileerror",{tile:this,url:this.src});var b=a.options.errorTileUrl;b&&(this.src=b),a._tileLoaded()}}),f.tileLayer=function(a,b){return new f.TileLayer(a,b)},f.TileLayer.WMS=f.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(a,b){this._url=a;var c=f.extend({},this.defaultWmsParams),d=b.tileSize||this.options.tileSize;b.detectRetina&&f.Browser.retina?c.width=c.height=2*d:c.width=c.height=d;for(var e in b)this.options.hasOwnProperty(e)||"crs"===e||(c[e]=b[e]);this.wmsParams=c,f.setOptions(this,b)},onAdd:function(a){this._crs=this.options.crs||a.options.crs;var b=parseFloat(this.wmsParams.version)>=1.3?"crs":"srs";this.wmsParams[b]=this._crs.code,f.TileLayer.prototype.onAdd.call(this,a)},getTileUrl:function(a,b){var c=this._map,d=this.options.tileSize,e=a.multiplyBy(d),g=e.add([d,d]),h=this._crs.project(c.unproject(e,b)),i=this._crs.project(c.unproject(g,b)),j=[h.x,i.y,i.x,h.y].join(","),k=f.Util.template(this._url,{s:this._getSubdomain(a)});return k+f.Util.getParamString(this.wmsParams,k,!0)+"&BBOX="+j},setParams:function(a,b){return f.extend(this.wmsParams,a),b||this.redraw(),this}}),f.tileLayer.wms=function(a,b){return new f.TileLayer.WMS(a,b)},f.TileLayer.Canvas=f.TileLayer.extend({options:{async:!1},initialize:function(a){f.setOptions(this,a)},redraw:function(){for(var a in this._tiles)this._redrawTile(this._tiles[a]);return this},_redrawTile:function(a){this.drawTile(a,a._tilePoint,this._map._zoom)},_createTileProto:function(){var a=this._canvasProto=f.DomUtil.create("canvas","leaflet-tile");a.width=a.height=this.options.tileSize},_createTile:function(){var a=this._canvasProto.cloneNode(!1);return a.onselectstart=a.onmousemove=f.Util.falseFn,a},_loadTile:function(a,b){a._layer=this,a._tilePoint=b,this._redrawTile(a),this.options.async||this.tileDrawn(a)},drawTile:function(){},tileDrawn:function(a){this._tileOnLoad.call(a)}}),f.tileLayer.canvas=function(a){return new f.TileLayer.Canvas(a)},f.ImageOverlay=f.Class.extend({includes:f.Mixin.Events,options:{opacity:1},initialize:function(a,b,c){this._url=a,this._bounds=f.latLngBounds(b),f.setOptions(this,c)},onAdd:function(a){this._map=a,this._image||this._initImage(),a._panes.overlayPane.appendChild(this._image),a.on("viewreset",this._reset,this),a.options.zoomAnimation&&f.Browser.any3d&&a.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(a){a.getPanes().overlayPane.removeChild(this._image),a.off("viewreset",this._reset,this),a.options.zoomAnimation&&a.off("zoomanim",this._animateZoom,this)},addTo:function(a){return a.addLayer(this),this},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var a=this._map._panes.overlayPane;return this._image&&a.insertBefore(this._image,a.firstChild),this},_initImage:function(){this._image=f.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&f.Browser.any3d?f.DomUtil.addClass(this._image,"leaflet-zoom-animated"):f.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),f.extend(this._image,{galleryimg:"no",onselectstart:f.Util.falseFn,onmousemove:f.Util.falseFn,onload:f.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(a){var b=this._map,c=this._image,d=b.getZoomScale(a.zoom),e=this._bounds.getNorthWest(),g=this._bounds.getSouthEast(),h=b._latLngToNewLayerPoint(e,a.zoom,a.center),i=b._latLngToNewLayerPoint(g,a.zoom,a.center)._subtract(h),j=h._add(i._multiplyBy(.5*(1-1/d)));c.style[f.DomUtil.TRANSFORM]=f.DomUtil.getTranslateString(j)+" scale("+d+") "},_reset:function(){var a=this._image,b=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),c=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(b);f.DomUtil.setPosition(a,b),a.style.width=c.x+"px",a.style.height=c.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){f.DomUtil.setOpacity(this._image,this.options.opacity)}}),f.imageOverlay=function(a,b,c){return new f.ImageOverlay(a,b,c)},f.Icon=f.Class.extend({options:{className:""},initialize:function(a){f.setOptions(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,b){var c=this._getIconUrl(a);if(!c){if("icon"===a)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var d;return d=b&&"IMG"===b.tagName?this._createImg(c,b):this._createImg(c),this._setIconStyles(d,a),d},_setIconStyles:function(a,b){var e,c=this.options,d=f.point(c[b+"Size"]);e="shadow"===b?f.point(c.shadowAnchor||c.iconAnchor):f.point(c.iconAnchor),!e&&d&&(e=d.divideBy(2,!0)),a.className="leaflet-marker-"+b+" "+c.className,e&&(a.style.marginLeft=-e.x+"px",a.style.marginTop=-e.y+"px"),d&&(a.style.width=d.x+"px",a.style.height=d.y+"px")},_createImg:function(a,b){return f.Browser.ie6?(b||(b=c.createElement("div")),b.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+a+'")'):(b||(b=c.createElement("img")),b.src=a),b},_getIconUrl:function(a){return f.Browser.retina&&this.options[a+"RetinaUrl"]?this.options[a+"RetinaUrl"]:this.options[a+"Url"]}}),f.icon=function(a){return new f.Icon(a)},f.Icon.Default=f.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(a){var b=a+"Url";if(this.options[b])return this.options[b];f.Browser.retina&&"icon"===a&&(a+="-2x");var c=f.Icon.Default.imagePath;if(!c)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return c+"/marker-"+a+".png"}}),f.Icon.Default.imagePath=function(){var d,e,f,g,h,a=c.getElementsByTagName("script"),b=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(d=0,e=a.length;d<e;d++)if(f=a[d].src,g=f.match(b))return h=f.split(b)[0],(h?h+"/":"")+"images"}(),f.Marker=f.Class.extend({includes:f.Mixin.Events,options:{icon:new f.Icon.Default,title:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(a,b){f.setOptions(this,b),this._latlng=f.latLng(a)},onAdd:function(a){this._map=a,a.on("viewreset",this.update,this),this._initIcon(),this.update(),a.options.zoomAnimation&&a.options.markerZoomAnimation&&a.on("zoomanim",this._animateZoom,this)},addTo:function(a){return a.addLayer(this),this},onRemove:function(a){this.dragging&&this.dragging.disable(),this._removeIcon(),this._removeShadow(),this.fire("remove"),a.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=f.latLng(a),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update(),this},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this},update:function(){if(this._icon){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,b=this._map,c=b.options.zoomAnimation&&b.options.markerZoomAnimation,d=c?"leaflet-zoom-animated":"leaflet-zoom-hide",e=a.icon.createIcon(this._icon),g=!1;e!==this._icon&&(this._icon&&this._removeIcon(),g=!0,a.title&&(e.title=a.title)),f.DomUtil.addClass(e,d),a.keyboard&&(e.tabIndex="0"),this._icon=e,this._initInteraction(),a.riseOnHover&&f.DomEvent.on(e,"mouseover",this._bringToFront,this).on(e,"mouseout",this._resetZIndex,this);var h=a.icon.createShadow(this._shadow),i=!1;h!==this._shadow&&(this._removeShadow(),i=!0,h&&f.DomUtil.addClass(h,d)),this._shadow=h,a.opacity<1&&this._updateOpacity();var j=this._map._panes;g&&j.markerPane.appendChild(this._icon),h&&i&&j.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&f.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),this._map._panes.markerPane.removeChild(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow),this._shadow=null},_setPos:function(a){f.DomUtil.setPosition(this._icon,a),this._shadow&&f.DomUtil.setPosition(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon.style.zIndex=this._zIndex+a},_animateZoom:function(a){var b=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPos(b)},_initInteraction:function(){if(this.options.clickable){var a=this._icon,b=["dblclick","mousedown","mouseover","mouseout","contextmenu"];f.DomUtil.addClass(a,"leaflet-clickable"),f.DomEvent.on(a,"click",this._onMouseClick,this),f.DomEvent.on(a,"keypress",this._onKeyPress,this);for(var c=0;c<b.length;c++)f.DomEvent.on(a,b[c],this._fireMouseEvent,this);f.Handler.MarkerDrag&&(this.dragging=new f.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(a){var b=this.dragging&&this.dragging.moved();(this.hasEventListeners(a.type)||b)&&f.DomEvent.stopPropagation(a),b||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(a.type,{originalEvent:a,latlng:this._latlng})},_onKeyPress:function(a){13===a.keyCode&&this.fire("click",{originalEvent:a,latlng:this._latlng})},_fireMouseEvent:function(a){this.fire(a.type,{originalEvent:a,latlng:this._latlng}),"contextmenu"===a.type&&this.hasEventListeners(a.type)&&f.DomEvent.preventDefault(a),"mousedown"!==a.type?f.DomEvent.stopPropagation(a):f.DomEvent.preventDefault(a)},setOpacity:function(a){this.options.opacity=a,this._map&&this._updateOpacity()},_updateOpacity:function(){f.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&f.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),f.marker=function(a,b){return new f.Marker(a,b)},f.DivIcon=f.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(a){var b=a&&"DIV"===a.tagName?a:c.createElement("div"),d=this.options;return d.html!==!1?b.innerHTML=d.html:b.innerHTML="",d.bgPos&&(b.style.backgroundPosition=-d.bgPos.x+"px "+-d.bgPos.y+"px"),this._setIconStyles(b,"icon"),b},createShadow:function(){return null}}),f.divIcon=function(a){return new f.DivIcon(a)},f.Map.mergeOptions({closePopupOnClick:!0}),f.Popup=f.Class.extend({includes:f.Mixin.Events,options:{minWidth:50,maxWidth:300,maxHeight:null,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(a,b){f.setOptions(this,a),this._source=b,this._animated=f.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(a){this._map=a,this._container||this._initLayout(),this._updateContent();var b=a.options.fadeAnimation;b&&f.DomUtil.setOpacity(this._container,0),a._panes.popupPane.appendChild(this._container),a.on(this._getEvents(),this),this._update(),b&&f.DomUtil.setOpacity(this._container,1),this.fire("open"),a.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(a){return a.addLayer(this),this},openOn:function(a){return a.openPopup(this),this},onRemove:function(a){a._panes.popupPane.removeChild(this._container),f.Util.falseFn(this._container.offsetWidth),a.off(this._getEvents(),this),a.options.fadeAnimation&&f.DomUtil.setOpacity(this._container,0),this._map=null,this.fire("close"),a.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this})},setLatLng:function(a){return this._latlng=f.latLng(a),this._update(),this},setContent:function(a){return this._content=a,this._update(),this},_getEvents:function(){var a={viewreset:this._updatePosition};return this._animated&&(a.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this._close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var d,a="leaflet-popup",b=a+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),c=this._container=f.DomUtil.create("div",b);this.options.closeButton&&(d=this._closeButton=f.DomUtil.create("a",a+"-close-button",c),d.href="#close",d.innerHTML="&#215;",f.DomEvent.disableClickPropagation(d),f.DomEvent.on(d,"click",this._onCloseButtonClick,this));var e=this._wrapper=f.DomUtil.create("div",a+"-content-wrapper",c);f.DomEvent.disableClickPropagation(e),this._contentNode=f.DomUtil.create("div",a+"-content",e),f.DomEvent.on(this._contentNode,"mousewheel",f.DomEvent.stopPropagation),f.DomEvent.on(e,"contextmenu",f.DomEvent.stopPropagation),this._tipContainer=f.DomUtil.create("div",a+"-tip-container",c),this._tip=f.DomUtil.create("div",a+"-tip",this._tipContainer)},_update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var a=this._contentNode,b=a.style;b.width="",b.whiteSpace="nowrap";var c=a.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),b.width=c+1+"px",b.whiteSpace="",b.height="";var d=a.offsetHeight,e=this.options.maxHeight,g="leaflet-popup-scrolled";e&&d>e?(b.height=e+"px",f.DomUtil.addClass(a,g)):f.DomUtil.removeClass(a,g),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),b=this._animated,c=f.point(this.options.offset);b&&f.DomUtil.setPosition(this._container,a),this._containerBottom=-c.y-(b?0:a.y),this._containerLeft=-Math.round(this._containerWidth/2)+c.x+(b?0:a.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(a){var b=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);f.DomUtil.setPosition(this._container,b)},_adjustPan:function(){if(this.options.autoPan){var a=this._map,b=this._container.offsetHeight,c=this._containerWidth,d=new f.Point(this._containerLeft,-b-this._containerBottom);this._animated&&d._add(f.DomUtil.getPosition(this._container));var e=a.layerPointToContainerPoint(d),g=f.point(this.options.autoPanPadding),h=a.getSize(),i=0,j=0;e.x+c>h.x&&(i=e.x+c-h.x+g.x),e.x-i<0&&(i=e.x-g.x),e.y+b>h.y&&(j=e.y+b-h.y+g.y),e.y-j<0&&(j=e.y-g.y),(i||j)&&a.fire("autopanstart").panBy([i,j])}},_onCloseButtonClick:function(a){this._close(),f.DomEvent.stop(a)}}),f.popup=function(a,b){return new f.Popup(a,b)},f.Map.include({openPopup:function(a,b,c){if(this.closePopup(),!(a instanceof f.Popup)){var d=a;a=new f.Popup(c).setLatLng(b).setContent(d)}return a._isOpen=!0,this._popup=a,this.addLayer(a)},closePopup:function(a){return a&&a!==this._popup||(a=this._popup,this._popup=null),a&&(this.removeLayer(a),a._isOpen=!1),this}}),f.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup()),this},bindPopup:function(a,b){
var c=f.point(this.options.icon.options.popupAnchor||[0,0]);return c=c.add(f.Popup.prototype.options.offset),b&&b.offset&&(c=c.add(b.offset)),b=f.extend({offset:c},b),this._popup||this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),a instanceof f.Popup?(f.setOptions(a,b),this._popup=a):this._popup=new f.Popup(b,this).setContent(a),this},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup).off("remove",this.closePopup).off("move",this._movePopup)),this},_movePopup:function(a){this._popup.setLatLng(a.latlng)}}),f.LayerGroup=f.Class.extend({initialize:function(a){this._layers={};var b,c;if(a)for(b=0,c=a.length;b<c;b++)this.addLayer(a[b])},addLayer:function(a){var b=this.getLayerId(a);return this._layers[b]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var b=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[b]&&this._map.removeLayer(this._layers[b]),delete this._layers[b],this},hasLayer:function(a){return!!a&&(a in this._layers||this.getLayerId(a)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(a){var c,d,b=Array.prototype.slice.call(arguments,1);for(c in this._layers)d=this._layers[c],d[a]&&d[a].apply(d,b);return this},onAdd:function(a){this._map=a,this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a),this._map=null},addTo:function(a){return a.addLayer(this),this},eachLayer:function(a,b){for(var c in this._layers)a.call(b,this._layers[c]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];for(var b in this._layers)a.push(this._layers[b]);return a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return f.stamp(a)}}),f.layerGroup=function(a){return new f.LayerGroup(a)},f.FeatureGroup=f.LayerGroup.extend({includes:f.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(a){return this.hasLayer(a)?this:(a.on(f.FeatureGroup.EVENTS,this._propagateEvent,this),f.LayerGroup.prototype.addLayer.call(this,a),this._popupContent&&a.bindPopup&&a.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return a in this._layers&&(a=this._layers[a]),a.off(f.FeatureGroup.EVENTS,this._propagateEvent,this),f.LayerGroup.prototype.removeLayer.call(this,a),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:a})},bindPopup:function(a,b){return this._popupContent=a,this._popupOptions=b,this.invoke("bindPopup",a,b)},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new f.LatLngBounds;return this.eachLayer(function(b){a.extend(b instanceof f.Marker?b.getLatLng():b.getBounds())}),a},_propagateEvent:function(a){a.layer||(a.layer=a.target),a.target=this,this.fire(a.type,a)}}),f.featureGroup=function(a){return new f.FeatureGroup(a)},f.Path=f.Class.extend({includes:[f.Mixin.Events],statics:{CLIP_PADDING:f.Browser.mobile?Math.max(0,Math.min(.5,(1280/Math.max(a.innerWidth,a.innerHeight)-1)/2)):.5},options:{stroke:!0,color:"#0033ff",dashArray:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(a){f.setOptions(this,a)},onAdd:function(a){this._map=a,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),a.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(a){return a.addLayer(this),this},onRemove:function(a){a._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,f.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),a.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(a){return f.setOptions(this,a),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),f.Map.include({_updatePathViewport:function(){var a=f.Path.CLIP_PADDING,b=this.getSize(),c=f.DomUtil.getPosition(this._mapPane),d=c.multiplyBy(-1)._subtract(b.multiplyBy(a)._round()),e=d.add(b.multiplyBy(1+2*a)._round());this._pathViewport=new f.Bounds(d,e)}}),f.Path.SVG_NS="http://www.w3.org/2000/svg",f.Browser.svg=!(!c.createElementNS||!c.createElementNS(f.Path.SVG_NS,"svg").createSVGRect),f.Path=f.Path.extend({statics:{SVG:f.Browser.svg},bringToFront:function(){var a=this._map._pathRoot,b=this._container;return b&&a.lastChild!==b&&a.appendChild(b),this},bringToBack:function(){var a=this._map._pathRoot,b=this._container,c=a.firstChild;return b&&c!==b&&a.insertBefore(b,c),this},getPathString:function(){},_createElement:function(a){return c.createElementNS(f.Path.SVG_NS,a)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents),this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events","none"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray")):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var a=this.getPathString();a||(a="M0 0"),this._path.setAttribute("d",a)},_initEvents:function(){if(this.options.clickable){!f.Browser.svg&&f.Browser.vml||this._path.setAttribute("class","leaflet-clickable"),f.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var a=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],b=0;b<a.length;b++)f.DomEvent.on(this._container,a[b],this._fireMouseEvent,this)}},_onMouseClick:function(a){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(a)},_fireMouseEvent:function(a){if(this.hasEventListeners(a.type)){var b=this._map,c=b.mouseEventToContainerPoint(a),d=b.containerPointToLayerPoint(c),e=b.layerPointToLatLng(d);this.fire(a.type,{latlng:e,layerPoint:d,containerPoint:c,originalEvent:a}),"contextmenu"===a.type&&f.DomEvent.preventDefault(a),"mousemove"!==a.type&&f.DomEvent.stopPropagation(a)}}}),f.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=f.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&f.Browser.any3d?(this._pathRoot.setAttribute("class"," leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):this._pathRoot.setAttribute("class"," leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(a){var b=this.getZoomScale(a.zoom),c=this._getCenterOffset(a.center)._multiplyBy(-b)._add(this._pathViewport.min);this._pathRoot.style[f.DomUtil.TRANSFORM]=f.DomUtil.getTranslateString(c)+" scale("+b+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var a=this._pathViewport,b=a.min,c=a.max,d=c.x-b.x,e=c.y-b.y,g=this._pathRoot,h=this._panes.overlayPane;f.Browser.mobileWebkit&&h.removeChild(g),f.DomUtil.setPosition(g,b),g.setAttribute("width",d),g.setAttribute("height",e),g.setAttribute("viewBox",[b.x,b.y,d,e].join(" ")),f.Browser.mobileWebkit&&h.appendChild(g)}}}),f.Path.include({bindPopup:function(a,b){return a instanceof f.Popup?this._popup=a:(this._popup&&!b||(this._popup=new f.Popup(b,this)),this._popup.setContent(a)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(a){return this._popup&&(a=a||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:a})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(a){this._popup.setLatLng(a.latlng),this._map.openPopup(this._popup)}}),f.Browser.vml=!f.Browser.svg&&function(){try{var a=c.createElement("div");a.innerHTML='<v:shape adj="1"/>';var b=a.firstChild;return b.style.behavior="url(#default#VML)",b&&"object"==typeof b.adj}catch(a){return!1}}(),f.Path=f.Browser.svg||!f.Browser.vml?f.Path:f.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return c.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return c.createElement("<lvml:"+a+' class="lvml">')}}catch(a){return function(a){return c.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var a=this._container=this._createElement("shape");f.DomUtil.addClass(a,"leaflet-vml-shape"),this.options.clickable&&f.DomUtil.addClass(a,"leaflet-clickable"),a.coordsize="1 1",this._path=this._createElement("path"),a.appendChild(this._path),this._map._pathRoot.appendChild(a)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var a=this._stroke,b=this._fill,c=this.options,d=this._container;d.stroked=c.stroke,d.filled=c.fill,c.stroke?(a||(a=this._stroke=this._createElement("stroke"),a.endcap="round",d.appendChild(a)),a.weight=c.weight+"px",a.color=c.color,a.opacity=c.opacity,c.dashArray?a.dashStyle=c.dashArray instanceof Array?c.dashArray.join(" "):c.dashArray.replace(/( *, *)/g," "):a.dashStyle=""):a&&(d.removeChild(a),this._stroke=null),c.fill?(b||(b=this._fill=this._createElement("fill"),d.appendChild(b)),b.color=c.fillColor||c.color,b.opacity=c.fillOpacity):b&&(d.removeChild(b),this._fill=null)},_updatePath:function(){var a=this._container.style;a.display="none",this._path.v=this.getPathString()+" ",a.display=""}}),f.Map.include(f.Browser.svg||!f.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var a=this._pathRoot=c.createElement("div");a.className="leaflet-vml-container",this._panes.overlayPane.appendChild(a),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),f.Browser.canvas=function(){return!!c.createElement("canvas").getContext}(),f.Path=f.Path.SVG&&!a.L_PREFER_CANVAS||!f.Browser.canvas?f.Path:f.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(a){return f.setOptions(this,a),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(a){a.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this)),this._requestUpdate(),this._map=null},_requestUpdate:function(){this._map&&!f.Path._updateRequest&&(f.Path._updateRequest=f.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){f.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var a=this.options;a.stroke&&(this._ctx.lineWidth=a.weight,this._ctx.strokeStyle=a.color),a.fill&&(this._ctx.fillStyle=a.fillColor||a.color)},_drawPath:function(){var a,b,c,d,e,g;for(this._ctx.beginPath(),a=0,c=this._parts.length;a<c;a++){for(b=0,d=this._parts[a].length;b<d;b++)e=this._parts[a][b],g=(0===b?"move":"line")+"To",this._ctx[g](e.x,e.y);this instanceof f.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var a=this._ctx,b=this.options;this._drawPath(),a.save(),this._updateStyle(),b.fill&&(a.globalAlpha=b.fillOpacity,a.fill()),b.stroke&&(a.globalAlpha=b.opacity,a.stroke()),a.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onClick,this))},_onClick:function(a){this._containsPoint(a.layerPoint)&&this.fire("click",a)},_onMouseMove:function(a){this._map&&!this._map._animatingZoom&&(this._containsPoint(a.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",a)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",a)))}}),f.Map.include(f.Path.SVG&&!a.L_PREFER_CANVAS||!f.Browser.canvas?{}:{_initPathRoot:function(){var b,a=this._pathRoot;a||(a=this._pathRoot=c.createElement("canvas"),a.style.position="absolute",b=this._canvasCtx=a.getContext("2d"),b.lineCap="round",b.lineJoin="round",this._panes.overlayPane.appendChild(a),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var a=this._pathViewport,b=a.min,c=a.max.subtract(b),d=this._pathRoot;f.DomUtil.setPosition(d,b),d.width=c.x,d.height=c.y,d.getContext("2d").translate(-b.x,-b.y)}}}),f.LineUtil={simplify:function(a,b){if(!b||!a.length)return a.slice();var c=b*b;return a=this._reducePoints(a,c),a=this._simplifyDP(a,c)},pointToSegmentDistance:function(a,b,c){return Math.sqrt(this._sqClosestPointOnSegment(a,b,c,!0))},closestPointOnSegment:function(a,b,c){return this._sqClosestPointOnSegment(a,b,c)},_simplifyDP:function(a,b){var c=a.length,e=typeof Uint8Array!=d+""?Uint8Array:Array,f=new e(c);f[0]=f[c-1]=1,this._simplifyDPStep(a,f,b,0,c-1);var g,h=[];for(g=0;g<c;g++)f[g]&&h.push(a[g]);return h},_simplifyDPStep:function(a,b,c,d,e){var g,h,i,f=0;for(h=d+1;h<=e-1;h++)i=this._sqClosestPointOnSegment(a[h],a[d],a[e],!0),i>f&&(g=h,f=i);f>c&&(b[g]=1,this._simplifyDPStep(a,b,c,d,g),this._simplifyDPStep(a,b,c,g,e))},_reducePoints:function(a,b){for(var c=[a[0]],d=1,e=0,f=a.length;d<f;d++)this._sqDist(a[d],a[e])>b&&(c.push(a[d]),e=d);return e<f-1&&c.push(a[f-1]),c},clipSegment:function(a,b,c,d){var g,h,i,e=d?this._lastCode:this._getBitCode(a,c),f=this._getBitCode(b,c);for(this._lastCode=f;;){if(!(e|f))return[a,b];if(e&f)return!1;g=e||f,h=this._getEdgeIntersection(a,b,g,c),i=this._getBitCode(h,c),g===e?(a=h,e=i):(b=h,f=i)}},_getEdgeIntersection:function(a,b,c,d){var e=b.x-a.x,g=b.y-a.y,h=d.min,i=d.max;return 8&c?new f.Point(a.x+e*(i.y-a.y)/g,i.y):4&c?new f.Point(a.x+e*(h.y-a.y)/g,h.y):2&c?new f.Point(i.x,a.y+g*(i.x-a.x)/e):1&c?new f.Point(h.x,a.y+g*(h.x-a.x)/e):void 0},_getBitCode:function(a,b){var c=0;return a.x<b.min.x?c|=1:a.x>b.max.x&&(c|=2),a.y<b.min.y?c|=4:a.y>b.max.y&&(c|=8),c},_sqDist:function(a,b){var c=b.x-a.x,d=b.y-a.y;return c*c+d*d},_sqClosestPointOnSegment:function(a,b,c,d){var k,e=b.x,g=b.y,h=c.x-e,i=c.y-g,j=h*h+i*i;return j>0&&(k=((a.x-e)*h+(a.y-g)*i)/j,k>1?(e=c.x,g=c.y):k>0&&(e+=h*k,g+=i*k)),h=a.x-e,i=a.y-g,d?h*h+i*i:new f.Point(e,g)}},f.Polyline=f.Path.extend({initialize:function(a,b){f.Path.prototype.initialize.call(this,b),this._latlngs=this._convertLatLngs(a)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var a=0,b=this._latlngs.length;a<b;a++)this._originalPoints[a]=this._map.latLngToLayerPoint(this._latlngs[a])},getPathString:function(){for(var a=0,b=this._parts.length,c="";a<b;a++)c+=this._getPathPartStr(this._parts[a]);return c},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._latlngs=this._convertLatLngs(a),this.redraw()},addLatLng:function(a){return this._latlngs.push(f.latLng(a)),this.redraw()},spliceLatLngs:function(){var a=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),a},closestLayerPoint:function(a){for(var d,e,b=1/0,c=this._parts,g=null,h=0,i=c.length;h<i;h++)for(var j=c[h],k=1,l=j.length;k<l;k++){d=j[k-1],e=j[k];var m=f.LineUtil._sqClosestPointOnSegment(a,d,e,!0);m<b&&(b=m,g=f.LineUtil._sqClosestPointOnSegment(a,d,e))}return g&&(g.distance=Math.sqrt(b)),g},getBounds:function(){return new f.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(a,b){var c,d,e=b?a:[];for(c=0,d=a.length;c<d;c++){if(f.Util.isArray(a[c])&&"number"!=typeof a[c][0])return;e[c]=f.latLng(a[c])}return e},_initEvents:function(){f.Path.prototype._initEvents.call(this)},_getPathPartStr:function(a){for(var g,b=f.Path.VML,c=0,d=a.length,e="";c<d;c++)g=a[c],b&&g._round(),e+=(c?"L":"M")+g.x+" "+g.y;return e},_clipPoints:function(){var c,d,e,a=this._originalPoints,b=a.length;if(this.options.noClip)return void(this._parts=[a]);this._parts=[];var g=this._parts,h=this._map._pathViewport,i=f.LineUtil;for(c=0,d=0;c<b-1;c++)e=i.clipSegment(a[c],a[c+1],h,c),e&&(g[d]=g[d]||[],g[d].push(e[0]),e[1]===a[c+1]&&c!==b-2||(g[d].push(e[1]),d++))},_simplifyPoints:function(){for(var a=this._parts,b=f.LineUtil,c=0,d=a.length;c<d;c++)a[c]=b.simplify(a[c],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),f.Path.prototype._updatePath.call(this))}}),f.polyline=function(a,b){return new f.Polyline(a,b)},f.PolyUtil={},f.PolyUtil.clipPolygon=function(a,b){var c,e,g,h,i,j,k,l,m,d=[1,4,2,8],n=f.LineUtil;for(e=0,k=a.length;e<k;e++)a[e]._code=n._getBitCode(a[e],b);for(h=0;h<4;h++){for(l=d[h],c=[],e=0,k=a.length,g=k-1;e<k;g=e++)i=a[e],j=a[g],i._code&l?j._code&l||(m=n._getEdgeIntersection(j,i,l,b),m._code=n._getBitCode(m,b),c.push(m)):(j._code&l&&(m=n._getEdgeIntersection(j,i,l,b),m._code=n._getBitCode(m,b),c.push(m)),c.push(i));a=c}return a},f.Polygon=f.Polyline.extend({options:{fill:!0},initialize:function(a,b){var c,d,e;if(f.Polyline.prototype.initialize.call(this,a,b),a&&f.Util.isArray(a[0])&&"number"!=typeof a[0][0])for(this._latlngs=this._convertLatLngs(a[0]),this._holes=a.slice(1),c=0,d=this._holes.length;c<d;c++)e=this._holes[c]=this._convertLatLngs(this._holes[c]),e[0].equals(e[e.length-1])&&e.pop();a=this._latlngs,a.length>=2&&a[0].equals(a[a.length-1])&&a.pop()},projectLatlngs:function(){if(f.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes){var a,b,c,d;for(a=0,c=this._holes.length;a<c;a++)for(this._holePoints[a]=[],b=0,d=this._holes[a].length;b<d;b++)this._holePoints[a][b]=this._map.latLngToLayerPoint(this._holes[a][b])}},_clipPoints:function(){var a=this._originalPoints,b=[];if(this._parts=[a].concat(this._holePoints),!this.options.noClip){for(var c=0,d=this._parts.length;c<d;c++){var e=f.PolyUtil.clipPolygon(this._parts[c],this._map._pathViewport);e.length&&b.push(e)}this._parts=b}},_getPathPartStr:function(a){var b=f.Polyline.prototype._getPathPartStr.call(this,a);return b+(f.Browser.svg?"z":"x")}}),f.polygon=function(a,b){return new f.Polygon(a,b)},function(){function a(a){return f.FeatureGroup.extend({initialize:function(a,b){this._layers={},this._options=b,this.setLatLngs(a)},setLatLngs:function(b){var c=0,d=b.length;for(this.eachLayer(function(a){c<d?a.setLatLngs(b[c++]):this.removeLayer(a)},this);c<d;)this.addLayer(new a(b[c++],this._options));return this}})}f.MultiPolyline=a(f.Polyline),f.MultiPolygon=a(f.Polygon),f.multiPolyline=function(a,b){return new f.MultiPolyline(a,b)},f.multiPolygon=function(a,b){return new f.MultiPolygon(a,b)}}(),f.Rectangle=f.Polygon.extend({initialize:function(a,b){f.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(a),b)},setBounds:function(a){this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=f.latLngBounds(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}}),f.rectangle=function(a,b){return new f.Rectangle(a,b)},f.Circle=f.Path.extend({initialize:function(a,b,c){f.Path.prototype.initialize.call(this,c),this._latlng=f.latLng(a),this._mRadius=b},options:{fill:!0},setLatLng:function(a){return this._latlng=f.latLng(a),this.redraw()},setRadius:function(a){return this._mRadius=a,this.redraw()},projectLatlngs:function(){var a=this._getLngRadius(),b=this._latlng,c=this._map.latLngToLayerPoint([b.lat,b.lng-a]);this._point=this._map.latLngToLayerPoint(b),this._radius=Math.max(this._point.x-c.x,1)},getBounds:function(){var a=this._getLngRadius(),b=this._mRadius/40075017*360,c=this._latlng;return new f.LatLngBounds([c.lat-b,c.lng-a],[c.lat+b,c.lng+a])},getLatLng:function(){return this._latlng},getPathString:function(){var a=this._point,b=this._radius;return this._checkIfEmpty()?"":f.Browser.svg?"M"+a.x+","+(a.y-b)+"A"+b+","+b+",0,1,1,"+(a.x-.1)+","+(a.y-b)+" z":(a._round(),b=Math.round(b),"AL "+a.x+","+a.y+" "+b+","+b+" 0,23592600")},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(f.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var a=this._map._pathViewport,b=this._radius,c=this._point;return c.x-b>a.max.x||c.y-b>a.max.y||c.x+b<a.min.x||c.y+b<a.min.y}}),f.circle=function(a,b,c){return new f.Circle(a,b,c)},f.CircleMarker=f.Circle.extend({options:{radius:10,weight:2},initialize:function(a,b){f.Circle.prototype.initialize.call(this,a,null,b),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){f.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()}}),f.circleMarker=function(a,b){return new f.CircleMarker(a,b)},f.Polyline.include(f.Path.CANVAS?{_containsPoint:function(a,b){var c,d,e,g,h,i,j,k=this.options.weight/2;for(f.Browser.touch&&(k+=10),c=0,g=this._parts.length;c<g;c++)for(j=this._parts[c],d=0,h=j.length,e=h-1;d<h;e=d++)if((b||0!==d)&&(i=f.LineUtil.pointToSegmentDistance(a,j[e],j[d]),i<=k))return!0;return!1}}:{}),f.Polygon.include(f.Path.CANVAS?{_containsPoint:function(a){var c,d,e,g,h,i,j,k,b=!1;if(f.Polyline.prototype._containsPoint.call(this,a,!0))return!0;for(g=0,j=this._parts.length;g<j;g++)for(c=this._parts[g],h=0,k=c.length,i=k-1;h<k;i=h++)d=c[h],e=c[i],d.y>a.y!=e.y>a.y&&a.x<(e.x-d.x)*(a.y-d.y)/(e.y-d.y)+d.x&&(b=!b);return b}}:{}),f.Circle.include(f.Path.CANVAS?{_drawPath:function(){var a=this._point;this._ctx.beginPath(),this._ctx.arc(a.x,a.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(a){var b=this._point,c=this.options.stroke?this.options.weight/2:0;return a.distanceTo(b)<=this._radius+c}}:{}),f.CircleMarker.include(f.Path.CANVAS?{_updateStyle:function(){f.Path.prototype._updateStyle.call(this)}}:{}),f.GeoJSON=f.FeatureGroup.extend({initialize:function(a,b){f.setOptions(this,b),this._layers={},a&&this.addData(a)},addData:function(a){var c,d,b=f.Util.isArray(a)?a:a.features;if(b){for(c=0,d=b.length;c<d;c++)(b[c].geometries||b[c].geometry||b[c].features)&&this.addData(b[c]);return this}var e=this.options;if(!e.filter||e.filter(a)){var g=f.GeoJSON.geometryToLayer(a,e.pointToLayer,e.coordsToLatLng);return g.feature=f.GeoJSON.asFeature(a),g.defaultOptions=g.options,this.resetStyle(g),e.onEachFeature&&e.onEachFeature(a,g),this.addLayer(g)}},resetStyle:function(a){var b=this.options.style;b&&(f.Util.extend(a.options,a.defaultOptions),this._setLayerStyle(a,b))},setStyle:function(a){this.eachLayer(function(b){this._setLayerStyle(b,a)},this)},_setLayerStyle:function(a,b){"function"==typeof b&&(b=b(a.feature)),a.setStyle&&a.setStyle(b)}}),f.extend(f.GeoJSON,{geometryToLayer:function(a,b,c){var h,i,j,k,l,d="Feature"===a.type?a.geometry:a,e=d.coordinates,g=[];switch(c=c||this.coordsToLatLng,d.type){case"Point":return h=c(e),b?b(a,h):new f.Marker(h);case"MultiPoint":for(j=0,k=e.length;j<k;j++)h=c(e[j]),l=b?b(a,h):new f.Marker(h),g.push(l);return new f.FeatureGroup(g);case"LineString":return i=this.coordsToLatLngs(e,0,c),new f.Polyline(i);case"Polygon":return i=this.coordsToLatLngs(e,1,c),new f.Polygon(i);case"MultiLineString":return i=this.coordsToLatLngs(e,1,c),new f.MultiPolyline(i);case"MultiPolygon":return i=this.coordsToLatLngs(e,2,c),new f.MultiPolygon(i);case"GeometryCollection":for(j=0,k=d.geometries.length;j<k;j++)l=this.geometryToLayer({geometry:d.geometries[j],type:"Feature",properties:a.properties},b,c),g.push(l);return new f.FeatureGroup(g);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(a){return new f.LatLng(a[1],a[0])},coordsToLatLngs:function(a,b,c){var d,e,f,g=[];for(e=0,f=a.length;e<f;e++)d=b?this.coordsToLatLngs(a[e],b-1,c):(c||this.coordsToLatLng)(a[e]),g.push(d);return g},latLngToCoords:function(a){return[a.lng,a.lat]},latLngsToCoords:function(a){for(var b=[],c=0,d=a.length;c<d;c++)b.push(f.GeoJSON.latLngToCoords(a[c]));return b},getFeature:function(a,b){return a.feature?f.extend({},a.feature,{geometry:b}):f.GeoJSON.asFeature(b)},asFeature:function(a){return"Feature"===a.type?a:{type:"Feature",properties:{},geometry:a}}});var h={toGeoJSON:function(){return f.GeoJSON.getFeature(this,{type:"Point",coordinates:f.GeoJSON.latLngToCoords(this.getLatLng())})}};f.Marker.include(h),f.Circle.include(h),f.CircleMarker.include(h),f.Polyline.include({toGeoJSON:function(){return f.GeoJSON.getFeature(this,{type:"LineString",coordinates:f.GeoJSON.latLngsToCoords(this.getLatLngs())})}}),f.Polygon.include({toGeoJSON:function(){var b,c,d,a=[f.GeoJSON.latLngsToCoords(this.getLatLngs())];if(a[0].push(a[0][0]),this._holes)for(b=0,c=this._holes.length;b<c;b++)d=f.GeoJSON.latLngsToCoords(this._holes[b]),d.push(d[0]),a.push(d);return f.GeoJSON.getFeature(this,{type:"Polygon",coordinates:a})}}),function(){function a(a,b){a.include({toGeoJSON:function(){var a=[];return this.eachLayer(function(b){a.push(b.toGeoJSON().geometry.coordinates)}),f.GeoJSON.getFeature(this,{type:b,coordinates:a})}})}a(f.MultiPolyline,"MultiLineString"),a(f.MultiPolygon,"MultiPolygon")}(),f.LayerGroup.include({toGeoJSON:function(){var a=[];return this.eachLayer(function(b){b.toGeoJSON&&a.push(f.GeoJSON.asFeature(b.toGeoJSON()))}),{type:"FeatureCollection",features:a}}}),f.geoJson=function(a,b){return new f.GeoJSON(a,b)},f.DomEvent={addListener:function(a,b,c,d){var h,i,j,e=f.stamp(c),g="_leaflet_"+b+e;return a[g]?this:(h=function(b){return c.call(d||a,b||f.DomEvent._getEvent())},f.Browser.msTouch&&0===b.indexOf("touch")?this.addMsTouchListener(a,b,h,e):(f.Browser.touch&&"dblclick"===b&&this.addDoubleTapListener&&this.addDoubleTapListener(a,h,e),"addEventListener"in a?"mousewheel"===b?(a.addEventListener("DOMMouseScroll",h,!1),a.addEventListener(b,h,!1)):"mouseenter"===b||"mouseleave"===b?(i=h,j="mouseenter"===b?"mouseover":"mouseout",h=function(b){if(f.DomEvent._checkMouse(a,b))return i(b)},a.addEventListener(j,h,!1)):"click"===b&&f.Browser.android?(i=h,h=function(a){return f.DomEvent._filterClick(a,i)},a.addEventListener(b,h,!1)):a.addEventListener(b,h,!1):"attachEvent"in a&&a.attachEvent("on"+b,h),a[g]=h,this))},removeListener:function(a,b,c){var d=f.stamp(c),e="_leaflet_"+b+d,g=a[e];return g?(f.Browser.msTouch&&0===b.indexOf("touch")?this.removeMsTouchListener(a,b,d):f.Browser.touch&&"dblclick"===b&&this.removeDoubleTapListener?this.removeDoubleTapListener(a,d):"removeEventListener"in a?"mousewheel"===b?(a.removeEventListener("DOMMouseScroll",g,!1),a.removeEventListener(b,g,!1)):"mouseenter"===b||"mouseleave"===b?a.removeEventListener("mouseenter"===b?"mouseover":"mouseout",g,!1):a.removeEventListener(b,g,!1):"detachEvent"in a&&a.detachEvent("on"+b,g),a[e]=null,this):this},stopPropagation:function(a){return a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,this},disableClickPropagation:function(a){for(var b=f.DomEvent.stopPropagation,c=f.Draggable.START.length-1;c>=0;c--)f.DomEvent.addListener(a,f.Draggable.START[c],b);return f.DomEvent.addListener(a,"click",f.DomEvent._fakeStop).addListener(a,"dblclick",b)},preventDefault:function(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this},stop:function(a){return f.DomEvent.preventDefault(a).stopPropagation(a)},getMousePosition:function(a,b){var d=c.body,e=c.documentElement,g=a.pageX?a.pageX:a.clientX+d.scrollLeft+e.scrollLeft,h=a.pageY?a.pageY:a.clientY+d.scrollTop+e.scrollTop,i=new f.Point(g,h);return b?i._subtract(f.DomUtil.getViewportOffset(b)):i},getWheelDelta:function(a){var b=0;return a.wheelDelta&&(b=a.wheelDelta/120),a.detail&&(b=-a.detail/3),b},_fakeStop:function(b){b._leaflet_stop=!0},_checkMouse:function(a,b){var c=b.relatedTarget;if(!c)return!0;try{for(;c&&c!==a;)c=c.parentNode}catch(a){return!1}return c!==a},_getEvent:function(){var b=a.event;if(!b)for(var c=arguments.callee.caller;c&&(b=c.arguments[0],!b||a.Event!==b.constructor);)c=c.caller;return b},_filterClick:function(a,b){var c=a.timeStamp||a.originalEvent.timeStamp,d=f.DomEvent._lastClick&&c-f.DomEvent._lastClick;return d&&d>100&&d<1e3||a.target._simulatedClick&&!a._simulated?void f.DomEvent.stop(a):(f.DomEvent._lastClick=c,b(a))}},f.DomEvent.on=f.DomEvent.addListener,f.DomEvent.off=f.DomEvent.removeListener,f.Draggable=f.Class.extend({includes:f.Mixin.Events,statics:{START:f.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",MSPointerDown:"touchmove"}},initialize:function(a,b){this._element=a,this._dragStartTarget=b||a},enable:function(){if(!this._enabled){for(var a=f.Draggable.START.length-1;a>=0;a--)f.DomEvent.on(this._dragStartTarget,f.Draggable.START[a],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var a=f.Draggable.START.length-1;a>=0;a--)f.DomEvent.off(this._dragStartTarget,f.Draggable.START[a],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(a){if(!a.shiftKey&&(1===a.which||1===a.button||a.touches)&&(f.DomEvent.stopPropagation(a),!f.Draggable._disabled)){f.DomUtil.disableImageDrag(),f.DomUtil.disableTextSelection();var b=a.touches?a.touches[0]:a,d=b.target;f.Browser.touch&&"a"===d.tagName.toLowerCase()&&f.DomUtil.addClass(d,"leaflet-active"),this._moved=!1,this._moving||(this._startPoint=new f.Point(b.clientX,b.clientY),this._startPos=this._newPos=f.DomUtil.getPosition(this._element),f.DomEvent.on(c,f.Draggable.MOVE[a.type],this._onMove,this).on(c,f.Draggable.END[a.type],this._onUp,this))}},_onMove:function(a){if(!(a.touches&&a.touches.length>1)){var b=a.touches&&1===a.touches.length?a.touches[0]:a,d=new f.Point(b.clientX,b.clientY),e=d.subtract(this._startPoint);(e.x||e.y)&&(f.DomEvent.preventDefault(a),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=f.DomUtil.getPosition(this._element).subtract(e),f.Browser.touch||f.DomUtil.addClass(c.body,"leaflet-dragging")),this._newPos=this._startPos.add(e),this._moving=!0,f.Util.cancelAnimFrame(this._animRequest),this._animRequest=f.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget))}},_updatePosition:function(){this.fire("predrag"),f.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(){f.Browser.touch||f.DomUtil.removeClass(c.body,"leaflet-dragging");for(var a in f.Draggable.MOVE)f.DomEvent.off(c,f.Draggable.MOVE[a],this._onMove).off(c,f.Draggable.END[a],this._onUp);f.DomUtil.enableImageDrag(),
f.DomUtil.enableTextSelection(),this._moved&&(f.Util.cancelAnimFrame(this._animRequest),this.fire("dragend")),this._moving=!1}}),f.Handler=f.Class.extend({initialize:function(a){this._map=a},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),f.Map.mergeOptions({dragging:!0,inertia:!f.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:f.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1}),f.Map.Drag=f.Handler.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new f.Draggable(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),a.on("viewreset",this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var a=this._map;a._panAnim&&a._panAnim.stop(),a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var a=this._lastTime=+new Date,b=this._lastPos=this._draggable._newPos;this._positions.push(b),this._times.push(a),a-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var a=this._map.getSize()._divideBy(2),b=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=b.subtract(a).x,this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var a=this._worldWidth,b=Math.round(a/2),c=this._initialWorldOffset,d=this._draggable._newPos.x,e=(d-b+c)%a+b-c,f=(d+b+c)%a-b-c,g=Math.abs(e+c)<Math.abs(f+c)?e:f;this._draggable._newPos.x=g},_onDragEnd:function(){var a=this._map,b=a.options,c=+new Date-this._lastTime,d=!b.inertia||c>b.inertiaThreshold||!this._positions[0];if(a.fire("dragend"),d)a.fire("moveend");else{var e=this._lastPos.subtract(this._positions[0]),g=(this._lastTime+c-this._times[0])/1e3,h=b.easeLinearity,i=e.multiplyBy(h/g),j=i.distanceTo([0,0]),k=Math.min(b.inertiaMaxSpeed,j),l=i.multiplyBy(k/j),m=k/(b.inertiaDeceleration*h),n=l.multiplyBy(-m/2).round();n.x&&n.y?f.Util.requestAnimFrame(function(){a.panBy(n,{duration:m,easeLinearity:h,noMoveStart:!0})}):a.fire("moveend")}}}),f.Map.addInitHook("addHandler","dragging",f.Map.Drag),f.Map.mergeOptions({doubleClickZoom:!0}),f.Map.DoubleClickZoom=f.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick)},_onDoubleClick:function(a){this.setZoomAround(a.containerPoint,this._zoom+1)}}),f.Map.addInitHook("addHandler","doubleClickZoom",f.Map.DoubleClickZoom),f.Map.mergeOptions({scrollWheelZoom:!0}),f.Map.ScrollWheelZoom=f.Handler.extend({addHooks:function(){f.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),f.DomEvent.on(this._map._container,"MozMousePixelScroll",f.DomEvent.preventDefault),this._delta=0},removeHooks:function(){f.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll),f.DomEvent.off(this._map._container,"MozMousePixelScroll",f.DomEvent.preventDefault)},_onWheelScroll:function(a){var b=f.DomEvent.getWheelDelta(a);this._delta+=b,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var c=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f.bind(this._performZoom,this),c),f.DomEvent.preventDefault(a),f.DomEvent.stopPropagation(a)},_performZoom:function(){var a=this._map,b=this._delta,c=a.getZoom();b=b>0?Math.ceil(b):Math.floor(b),b=Math.max(Math.min(b,4),-4),b=a._limitZoom(c+b)-c,this._delta=0,this._startTime=null,b&&a.setZoomAround(this._lastMousePos,c+b)}}),f.Map.addInitHook("addHandler","scrollWheelZoom",f.Map.ScrollWheelZoom),f.extend(f.DomEvent,{_touchstart:f.Browser.msTouch?"MSPointerDown":"touchstart",_touchend:f.Browser.msTouch?"MSPointerUp":"touchend",addDoubleTapListener:function(a,b,d){function n(a){var b;if(f.Browser.msTouch?(m.push(a.pointerId),b=m.length):b=a.touches.length,!(b>1)){var c=Date.now(),d=c-(e||c);i=a.touches?a.touches[0]:a,g=d>0&&d<=h,e=c}}function o(a){if(f.Browser.msTouch){var c=m.indexOf(a.pointerId);if(c===-1)return;m.splice(c,1)}if(g){if(f.Browser.msTouch){var h,d={};for(var j in i)h=i[j],"function"==typeof h?d[j]=h.bind(i):d[j]=h;i=d}i.type="dblclick",b(i),e=null}}var e,i,g=!1,h=250,j="_leaflet_",k=this._touchstart,l=this._touchend,m=[];a[j+k+d]=n,a[j+l+d]=o;var p=f.Browser.msTouch?c.documentElement:a;return a.addEventListener(k,n,!1),p.addEventListener(l,o,!1),f.Browser.msTouch&&p.addEventListener("MSPointerCancel",o,!1),this},removeDoubleTapListener:function(a,b){var d="_leaflet_";return a.removeEventListener(this._touchstart,a[d+this._touchstart+b],!1),(f.Browser.msTouch?c.documentElement:a).removeEventListener(this._touchend,a[d+this._touchend+b],!1),f.Browser.msTouch&&c.documentElement.removeEventListener("MSPointerCancel",a[d+this._touchend+b],!1),this}}),f.extend(f.DomEvent,{_msTouches:[],_msDocumentListener:!1,addMsTouchListener:function(a,b,c,d){switch(b){case"touchstart":return this.addMsTouchListenerStart(a,b,c,d);case"touchend":return this.addMsTouchListenerEnd(a,b,c,d);case"touchmove":return this.addMsTouchListenerMove(a,b,c,d);default:throw"Unknown touch event type"}},addMsTouchListenerStart:function(a,b,d,e){var f="_leaflet_",g=this._msTouches,h=function(a){for(var b=!1,c=0;c<g.length;c++)if(g[c].pointerId===a.pointerId){b=!0;break}b||g.push(a),a.touches=g.slice(),a.changedTouches=[a],d(a)};if(a[f+"touchstart"+e]=h,a.addEventListener("MSPointerDown",h,!1),!this._msDocumentListener){var i=function(a){for(var b=0;b<g.length;b++)if(g[b].pointerId===a.pointerId){g.splice(b,1);break}};c.documentElement.addEventListener("MSPointerUp",i,!1),c.documentElement.addEventListener("MSPointerCancel",i,!1),this._msDocumentListener=!0}return this},addMsTouchListenerMove:function(a,b,c,d){function g(a){if(a.pointerType!==a.MSPOINTER_TYPE_MOUSE||0!==a.buttons){for(var b=0;b<f.length;b++)if(f[b].pointerId===a.pointerId){f[b]=a;break}a.touches=f.slice(),a.changedTouches=[a],c(a)}}var e="_leaflet_",f=this._msTouches;return a[e+"touchmove"+d]=g,a.addEventListener("MSPointerMove",g,!1),this},addMsTouchListenerEnd:function(a,b,c,d){var e="_leaflet_",f=this._msTouches,g=function(a){for(var b=0;b<f.length;b++)if(f[b].pointerId===a.pointerId){f.splice(b,1);break}a.touches=f.slice(),a.changedTouches=[a],c(a)};return a[e+"touchend"+d]=g,a.addEventListener("MSPointerUp",g,!1),a.addEventListener("MSPointerCancel",g,!1),this},removeMsTouchListener:function(a,b,c){var d="_leaflet_",e=a[d+b+c];switch(b){case"touchstart":a.removeEventListener("MSPointerDown",e,!1);break;case"touchmove":a.removeEventListener("MSPointerMove",e,!1);break;case"touchend":a.removeEventListener("MSPointerUp",e,!1),a.removeEventListener("MSPointerCancel",e,!1)}return this}}),f.Map.mergeOptions({touchZoom:f.Browser.touch&&!f.Browser.android23}),f.Map.TouchZoom=f.Handler.extend({addHooks:function(){f.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){f.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var b=this._map;if(a.touches&&2===a.touches.length&&!b._animatingZoom&&!this._zooming){var d=b.mouseEventToLayerPoint(a.touches[0]),e=b.mouseEventToLayerPoint(a.touches[1]),g=b._getCenterLayerPoint();this._startCenter=d.add(e)._divideBy(2),this._startDist=d.distanceTo(e),this._moved=!1,this._zooming=!0,this._centerOffset=g.subtract(this._startCenter),b._panAnim&&b._panAnim.stop(),f.DomEvent.on(c,"touchmove",this._onTouchMove,this).on(c,"touchend",this._onTouchEnd,this),f.DomEvent.preventDefault(a)}},_onTouchMove:function(a){var b=this._map;if(a.touches&&2===a.touches.length&&this._zooming){var c=b.mouseEventToLayerPoint(a.touches[0]),d=b.mouseEventToLayerPoint(a.touches[1]);this._scale=c.distanceTo(d)/this._startDist,this._delta=c._add(d)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(this._moved||(f.DomUtil.addClass(b._mapPane,"leaflet-touching"),b.fire("movestart").fire("zoomstart"),this._moved=!0),f.Util.cancelAnimFrame(this._animRequest),this._animRequest=f.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),f.DomEvent.preventDefault(a))}},_updateOnMove:function(){var a=this._map,b=this._getScaleOrigin(),c=a.layerPointToLatLng(b),d=a.getScaleZoom(this._scale);a._animateZoom(c,d,this._startCenter,this._scale,this._delta)},_onTouchEnd:function(){if(!this._moved||!this._zooming)return void(this._zooming=!1);var a=this._map;this._zooming=!1,f.DomUtil.removeClass(a._mapPane,"leaflet-touching"),f.Util.cancelAnimFrame(this._animRequest),f.DomEvent.off(c,"touchmove",this._onTouchMove).off(c,"touchend",this._onTouchEnd);var b=this._getScaleOrigin(),d=a.layerPointToLatLng(b),e=a.getZoom(),g=a.getScaleZoom(this._scale)-e,h=g>0?Math.ceil(g):Math.floor(g),i=a._limitZoom(e+h),j=a.getZoomScale(i)/this._scale;a._animateZoom(d,i,b,j)},_getScaleOrigin:function(){var a=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(a)}}),f.Map.addInitHook("addHandler","touchZoom",f.Map.TouchZoom),f.Map.mergeOptions({tap:!0,tapTolerance:15}),f.Map.Tap=f.Handler.extend({addHooks:function(){f.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){f.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(a.touches){if(f.DomEvent.preventDefault(a),this._fireClick=!0,a.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var b=a.touches[0],d=b.target;this._startPos=this._newPos=new f.Point(b.clientX,b.clientY),"a"===d.tagName.toLowerCase()&&f.DomUtil.addClass(d,"leaflet-active"),this._holdTimeout=setTimeout(f.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",b))},this),1e3),f.DomEvent.on(c,"touchmove",this._onMove,this).on(c,"touchend",this._onUp,this)}},_onUp:function(a){if(clearTimeout(this._holdTimeout),f.DomEvent.off(c,"touchmove",this._onMove,this).off(c,"touchend",this._onUp,this),this._fireClick&&a&&a.changedTouches){var b=a.changedTouches[0],d=b.target;"a"===d.tagName.toLowerCase()&&f.DomUtil.removeClass(d,"leaflet-active"),this._isTapValid()&&this._simulateEvent("click",b)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(a){var b=a.touches[0];this._newPos=new f.Point(b.clientX,b.clientY)},_simulateEvent:function(b,d){var e=c.createEvent("MouseEvents");e._simulated=!0,d.target._simulatedClick=!0,e.initMouseEvent(b,!0,!0,a,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),d.target.dispatchEvent(e)}}),f.Browser.touch&&!f.Browser.msTouch&&f.Map.addInitHook("addHandler","tap",f.Map.Tap),f.Map.mergeOptions({boxZoom:!0}),f.Map.BoxZoom=f.Handler.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane},addHooks:function(){f.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){f.DomEvent.off(this._container,"mousedown",this._onMouseDown)},_onMouseDown:function(a){return!(!a.shiftKey||1!==a.which&&1!==a.button)&&(f.DomUtil.disableTextSelection(),f.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(a),this._box=f.DomUtil.create("div","leaflet-zoom-box",this._pane),f.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",f.DomEvent.on(c,"mousemove",this._onMouseMove,this).on(c,"mouseup",this._onMouseUp,this).on(c,"keydown",this._onKeyDown,this),void this._map.fire("boxzoomstart"))},_onMouseMove:function(a){var b=this._startLayerPoint,c=this._box,d=this._map.mouseEventToLayerPoint(a),e=d.subtract(b),g=new f.Point(Math.min(d.x,b.x),Math.min(d.y,b.y));f.DomUtil.setPosition(c,g),c.style.width=Math.max(0,Math.abs(e.x)-4)+"px",c.style.height=Math.max(0,Math.abs(e.y)-4)+"px"},_finish:function(){this._pane.removeChild(this._box),this._container.style.cursor="",f.DomUtil.enableTextSelection(),f.DomUtil.enableImageDrag(),f.DomEvent.off(c,"mousemove",this._onMouseMove).off(c,"mouseup",this._onMouseUp).off(c,"keydown",this._onKeyDown)},_onMouseUp:function(a){this._finish();var b=this._map,c=b.mouseEventToLayerPoint(a);if(!this._startLayerPoint.equals(c)){var d=new f.LatLngBounds(b.layerPointToLatLng(this._startLayerPoint),b.layerPointToLatLng(c));b.fitBounds(d),b.fire("boxzoomend",{boxZoomBounds:d})}},_onKeyDown:function(a){27===a.keyCode&&this._finish()}}),f.Map.addInitHook("addHandler","boxZoom",f.Map.BoxZoom),f.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),f.Map.Keyboard=f.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61],zoomOut:[189,109,173]},initialize:function(a){this._map=a,this._setPanOffset(a.options.keyboardPanOffset),this._setZoomOffset(a.options.keyboardZoomOffset)},addHooks:function(){var a=this._map._container;a.tabIndex===-1&&(a.tabIndex="0"),f.DomEvent.on(a,"focus",this._onFocus,this).on(a,"blur",this._onBlur,this).on(a,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var a=this._map._container;f.DomEvent.off(a,"focus",this._onFocus,this).off(a,"blur",this._onBlur,this).off(a,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var b=c.body,d=c.documentElement,e=b.scrollTop||d.scrollTop,f=b.scrollTop||d.scrollLeft;this._map._container.focus(),a.scrollTo(f,e)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(a){var d,e,b=this._panKeys={},c=this.keyCodes;for(d=0,e=c.left.length;d<e;d++)b[c.left[d]]=[-1*a,0];for(d=0,e=c.right.length;d<e;d++)b[c.right[d]]=[a,0];for(d=0,e=c.down.length;d<e;d++)b[c.down[d]]=[0,a];for(d=0,e=c.up.length;d<e;d++)b[c.up[d]]=[0,-1*a]},_setZoomOffset:function(a){var d,e,b=this._zoomKeys={},c=this.keyCodes;for(d=0,e=c.zoomIn.length;d<e;d++)b[c.zoomIn[d]]=a;for(d=0,e=c.zoomOut.length;d<e;d++)b[c.zoomOut[d]]=-a},_addHooks:function(){f.DomEvent.on(c,"keydown",this._onKeyDown,this)},_removeHooks:function(){f.DomEvent.off(c,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){var b=a.keyCode,c=this._map;if(b in this._panKeys){if(c._panAnim&&c._panAnim._inProgress)return;c.panBy(this._panKeys[b]),c.options.maxBounds&&c.panInsideBounds(c.options.maxBounds)}else{if(!(b in this._zoomKeys))return;c.setZoom(c.getZoom()+this._zoomKeys[b])}f.DomEvent.stop(a)}}),f.Map.addInitHook("addHandler","keyboard",f.Map.Keyboard),f.Handler.MarkerDrag=f.Handler.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new f.Draggable(a,a)),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this),this._draggable.enable()},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var a=this._marker,b=a._shadow,c=f.DomUtil.getPosition(a._icon),d=a._map.layerPointToLatLng(c);b&&f.DomUtil.setPosition(b,c),a._latlng=d,a.fire("move",{latlng:d}).fire("drag")},_onDragEnd:function(){this._marker.fire("moveend").fire("dragend")}}),f.Control=f.Class.extend({options:{position:"topright"},initialize:function(a){f.setOptions(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var b=this._map;return b&&b.removeControl(this),this.options.position=a,b&&b.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this._map=a;var b=this._container=this.onAdd(a),c=this.getPosition(),d=a._controlCorners[c];return f.DomUtil.addClass(b,"leaflet-control"),c.indexOf("bottom")!==-1?d.insertBefore(b,d.firstChild):d.appendChild(b),this},removeFrom:function(a){var b=this.getPosition(),c=a._controlCorners[b];return c.removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(a),this}}),f.control=function(a){return new f.Control(a)},f.Map.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.removeFrom(this),this},_initControlPos:function(){function d(d,e){var g=b+d+" "+b+e;a[d+e]=f.DomUtil.create("div",g,c)}var a=this._controlCorners={},b="leaflet-",c=this._controlContainer=f.DomUtil.create("div",b+"control-container",this._container);d("top","left"),d("top","right"),d("bottom","left"),d("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}}),f.Control.Zoom=f.Control.extend({options:{position:"topleft"},onAdd:function(a){var b="leaflet-control-zoom",c=f.DomUtil.create("div",b+" leaflet-bar");return this._map=a,this._zoomInButton=this._createButton("+","Zoom in",b+"-in",c,this._zoomIn,this),this._zoomOutButton=this._createButton("-","Zoom out",b+"-out",c,this._zoomOut,this),a.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(a){this._map.zoomIn(a.shiftKey?3:1)},_zoomOut:function(a){this._map.zoomOut(a.shiftKey?3:1)},_createButton:function(a,b,c,d,e,g){var h=f.DomUtil.create("a",c,d);h.innerHTML=a,h.href="#",h.title=b;var i=f.DomEvent.stopPropagation;return f.DomEvent.on(h,"click",i).on(h,"mousedown",i).on(h,"dblclick",i).on(h,"click",f.DomEvent.preventDefault).on(h,"click",e,g),h},_updateDisabled:function(){var a=this._map,b="leaflet-disabled";f.DomUtil.removeClass(this._zoomInButton,b),f.DomUtil.removeClass(this._zoomOutButton,b),a._zoom===a.getMinZoom()&&f.DomUtil.addClass(this._zoomOutButton,b),a._zoom===a.getMaxZoom()&&f.DomUtil.addClass(this._zoomInButton,b)}}),f.Map.mergeOptions({zoomControl:!0}),f.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new f.Control.Zoom,this.addControl(this.zoomControl))}),f.control.zoom=function(a){return new f.Control.Zoom(a)},f.Control.Attribution=f.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(a){f.setOptions(this,a),this._attributions={}},onAdd:function(a){return this._container=f.DomUtil.create("div","leaflet-control-attribution"),f.DomEvent.disableClickPropagation(this._container),a.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(a){a.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){if(a)return this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this},removeAttribution:function(a){if(a)return this._attributions[a]&&(this._attributions[a]--,this._update()),this},_update:function(){if(this._map){var a=[];for(var b in this._attributions)this._attributions[b]&&a.push(b);var c=[];this.options.prefix&&c.push(this.options.prefix),a.length&&c.push(a.join(", ")),this._container.innerHTML=c.join(" | ")}},_onLayerAdd:function(a){a.layer.getAttribution&&this.addAttribution(a.layer.getAttribution())},_onLayerRemove:function(a){a.layer.getAttribution&&this.removeAttribution(a.layer.getAttribution())}}),f.Map.mergeOptions({attributionControl:!0}),f.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new f.Control.Attribution).addTo(this))}),f.control.attribution=function(a){return new f.Control.Attribution(a)},f.Control.Scale=f.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(a){this._map=a;var b="leaflet-control-scale",c=f.DomUtil.create("div",b),d=this.options;return this._addScales(d,b,c),a.on(d.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),c},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,b,c){a.metric&&(this._mScale=f.DomUtil.create("div",b+"-line",c)),a.imperial&&(this._iScale=f.DomUtil.create("div",b+"-line",c))},_update:function(){var a=this._map.getBounds(),b=a.getCenter().lat,c=6378137*Math.PI*Math.cos(b*Math.PI/180),d=c*(a.getNorthEast().lng-a.getSouthWest().lng)/180,e=this._map.getSize(),f=this.options,g=0;e.x>0&&(g=d*(f.maxWidth/e.x)),this._updateScales(f,g)},_updateScales:function(a,b){a.metric&&b&&this._updateMetric(b),a.imperial&&b&&this._updateImperial(b)},_updateMetric:function(a){var b=this._getRoundNum(a);this._mScale.style.width=this._getScaleWidth(b/a)+"px",this._mScale.innerHTML=b<1e3?b+" m":b/1e3+" km"},_updateImperial:function(a){var d,e,f,b=3.2808399*a,c=this._iScale;b>5280?(d=b/5280,e=this._getRoundNum(d),c.style.width=this._getScaleWidth(e/d)+"px",c.innerHTML=e+" mi"):(f=this._getRoundNum(b),c.style.width=this._getScaleWidth(f/b)+"px",c.innerHTML=f+" ft")},_getScaleWidth:function(a){return Math.round(this.options.maxWidth*a)-10},_getRoundNum:function(a){var b=Math.pow(10,(Math.floor(a)+"").length-1),c=a/b;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,b*c}}),f.control.scale=function(a){return new f.Control.Scale(a)},f.Control.Layers=f.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(a,b,c){f.setOptions(this,c),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var d in a)this._addLayer(a[d],d);for(d in b)this._addLayer(b[d],d,!0)},onAdd:function(a){return this._initLayout(),this._update(),a.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(a){a.off("layeradd",this._onLayerChange).off("layerremove",this._onLayerChange)},addBaseLayer:function(a,b){return this._addLayer(a,b),this._update(),this},addOverlay:function(a,b){return this._addLayer(a,b,!0),this._update(),this},removeLayer:function(a){var b=f.stamp(a);return delete this._layers[b],this._update(),this},_initLayout:function(){var a="leaflet-control-layers",b=this._container=f.DomUtil.create("div",a);b.setAttribute("aria-haspopup",!0),f.Browser.touch?f.DomEvent.on(b,"click",f.DomEvent.stopPropagation):(f.DomEvent.disableClickPropagation(b),f.DomEvent.on(b,"mousewheel",f.DomEvent.stopPropagation));var c=this._form=f.DomUtil.create("form",a+"-list");if(this.options.collapsed){f.Browser.android||f.DomEvent.on(b,"mouseover",this._expand,this).on(b,"mouseout",this._collapse,this);var d=this._layersLink=f.DomUtil.create("a",a+"-toggle",b);d.href="#",d.title="Layers",f.Browser.touch?f.DomEvent.on(d,"click",f.DomEvent.stop).on(d,"click",this._expand,this):f.DomEvent.on(d,"focus",this._expand,this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=f.DomUtil.create("div",a+"-base",c),this._separator=f.DomUtil.create("div",a+"-separator",c),this._overlaysList=f.DomUtil.create("div",a+"-overlays",c),b.appendChild(c)},_addLayer:function(a,b,c){var d=f.stamp(a);this._layers[d]={layer:a,name:b,overlay:c},this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var c,d,a=!1,b=!1;for(c in this._layers)d=this._layers[c],this._addItem(d),b=b||d.overlay,a=a||!d.overlay;this._separator.style.display=b&&a?"":"none"}},_onLayerChange:function(a){var b=this._layers[f.stamp(a.layer)];if(b){this._handlingClick||this._update();var c=b.overlay?"layeradd"===a.type?"overlayadd":"overlayremove":"layeradd"===a.type?"baselayerchange":null;c&&this._map.fire(c,b)}},_createRadioElement:function(a,b){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"';b&&(d+=' checked="checked"'),d+="/>";var e=c.createElement("div");return e.innerHTML=d,e.firstChild},_addItem:function(a){var d,b=c.createElement("label"),e=this._map.hasLayer(a.layer);a.overlay?(d=c.createElement("input"),d.type="checkbox",d.className="leaflet-control-layers-selector",d.defaultChecked=e):d=this._createRadioElement("leaflet-base-layers",e),d.layerId=f.stamp(a.layer),f.DomEvent.on(d,"click",this._onInputClick,this);var g=c.createElement("span");g.innerHTML=" "+a.name,b.appendChild(d),b.appendChild(g);var h=a.overlay?this._overlaysList:this._baseLayersList;return h.appendChild(b),b},_onInputClick:function(){var a,b,c,d=this._form.getElementsByTagName("input"),e=d.length;for(this._handlingClick=!0,a=0;a<e;a++)b=d[a],c=this._layers[b.layerId],b.checked&&!this._map.hasLayer(c.layer)?this._map.addLayer(c.layer):!b.checked&&this._map.hasLayer(c.layer)&&this._map.removeLayer(c.layer);this._handlingClick=!1},_expand:function(){f.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),f.control.layers=function(a,b,c){return new f.Control.Layers(a,b,c)},f.PosAnimation=f.Class.extend({includes:f.Mixin.Events,run:function(a,b,c,d){this.stop(),this._el=a,this._inProgress=!0,this._newPos=b,this.fire("start"),a.style[f.DomUtil.TRANSITION]="all "+(c||.25)+"s cubic-bezier(0,0,"+(d||.5)+",1)",f.DomEvent.on(a,f.DomUtil.TRANSITION_END,this._onTransitionEnd,this),f.DomUtil.setPosition(a,b),f.Util.falseFn(a.offsetWidth),this._stepTimer=setInterval(f.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(f.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),f.Util.falseFn(this._el.offsetWidth))},_onStep:function(){this._el._leaflet_pos=this._getPos(),this.fire("step")},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var b,c,d,e=this._el,g=a.getComputedStyle(e);return f.Browser.any3d?(d=g[f.DomUtil.TRANSFORM].match(this._transformRe),b=d?parseFloat(d[1]):0,c=d?parseFloat(d[2]):0):(b=parseFloat(g.left),c=parseFloat(g.top)),new f.Point(b,c,!0)},_onTransitionEnd:function(){f.DomEvent.off(this._el,f.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[f.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),f.Map.include({setView:function(a,b,c){if(b=this._limitZoom(b),a=f.latLng(a),c=c||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==d&&(c.zoom=f.extend({animate:c.animate},c.zoom),c.pan=f.extend({animate:c.animate},c.pan));var e=this._zoom!==b?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,b,c.zoom):this._tryAnimatedPan(a,c.pan);if(e)return clearTimeout(this._sizeTimer),this}return this._resetView(a,b),this},panBy:function(a,b){if(a=f.point(a).round(),b=b||{},!a.x&&!a.y)return this;if(this._panAnim||(this._panAnim=new f.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),b.noMoveStart||this.fire("movestart"),b.animate!==!1){f.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(a);this._panAnim.run(this._mapPane,c,b.duration||.25,b.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){f.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,b){var c=this._getCenterOffset(a)._floor();return!((b&&b.animate)!==!0&&!this.getSize().contains(c))&&(this.panBy(c,b),!0)}}),f.PosAnimation=f.DomUtil.TRANSITION?f.PosAnimation:f.PosAnimation.extend({run:function(a,b,c,d){this.stop(),this._el=a,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(d||.5,.2),this._startPos=f.DomUtil.getPosition(a),this._offset=b.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=f.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var a=+new Date-this._startTime,b=1e3*this._duration;a<b?this._runFrame(this._easeOut(a/b)):(this._runFrame(1),this._complete())},_runFrame:function(a){var b=this._startPos.add(this._offset.multiplyBy(a));f.DomUtil.setPosition(this._el,b),this.fire("step")},_complete:function(){f.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),f.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4}),f.DomUtil.TRANSITION&&f.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&f.DomUtil.TRANSITION&&f.Browser.any3d&&!f.Browser.android23&&!f.Browser.mobileOpera,this._zoomAnimated&&f.DomEvent.on(this._mapPane,f.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),f.Map.include(f.DomUtil.TRANSITION?{_catchTransitionEnd:function(){this._animatingZoom&&this._onZoomTransitionEnd()},_tryAnimatedZoom:function(a,b,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||Math.abs(b-this._zoom)>this.options.zoomAnimationThreshold)return!1;var d=this.getZoomScale(b),e=this._getCenterOffset(a)._divideBy(1-1/d),f=this._getCenterLayerPoint()._add(e);return!(c.animate!==!0&&!this.getSize().contains(e))&&(this.fire("movestart").fire("zoomstart"),this._animateZoom(a,b,f,d,null,!0),!0)},_animateZoom:function(a,b,c,d,e,g){this._animatingZoom=!0,f.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this._animateToCenter=a,this._animateToZoom=b,f.Draggable&&(f.Draggable._disabled=!0),this.fire("zoomanim",{center:a,zoom:b,origin:c,scale:d,delta:e,backwards:g})},_onZoomTransitionEnd:function(){this._animatingZoom=!1,f.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),f.Draggable&&(f.Draggable._disabled=!1)}}:{}),f.TileLayer.include({_animateZoom:function(a){this._animating||(this._animating=!0,this._prepareBgBuffer());var b=this._bgBuffer,c=f.DomUtil.TRANSFORM,d=a.delta?f.DomUtil.getTranslateString(a.delta):b.style[c],e=f.DomUtil.getScaleString(a.scale,a.origin);b.style[c]=a.backwards?e+" "+d:d+" "+e},_endZoomAnim:function(){var a=this._tileContainer,b=this._bgBuffer;a.style.visibility="",a.parentNode.appendChild(a),f.Util.falseFn(b.offsetWidth),this._animating=!1},_clearBgBuffer:function(){var a=this._map;!a||a._animatingZoom||a.touchZoom._zooming||(this._bgBuffer.innerHTML="",this._bgBuffer.style[f.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var a=this._tileContainer,b=this._bgBuffer,c=this._getLoadedTilesPercentage(b),d=this._getLoadedTilesPercentage(a);return b&&c>.5&&d<.5?(a.style.visibility="hidden",void this._stopLoadingImages(a)):(b.style.visibility="hidden",b.style[f.DomUtil.TRANSFORM]="",this._tileContainer=b,b=this._bgBuffer=a,this._stopLoadingImages(b),void clearTimeout(this._clearBgBufferTimer))},_getLoadedTilesPercentage:function(a){var c,d,b=a.getElementsByTagName("img"),e=0;for(c=0,d=b.length;c<d;c++)b[c].complete&&e++;return e/d},_stopLoadingImages:function(a){var c,d,e,b=Array.prototype.slice.call(a.getElementsByTagName("img"));for(c=0,d=b.length;c<d;c++)e=b[c],e.complete||(e.onload=f.Util.falseFn,e.onerror=f.Util.falseFn,e.src=f.Util.emptyImageUrl,e.parentNode.removeChild(e))}}),f.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(a){if(a=this._locateOptions=f.extend(this._defaultLocateOptions,a),!navigator.geolocation)return this._handleGeolocationError({code:0,
message:"Geolocation not supported."}),this;var b=f.bind(this._handleGeolocationResponse,this),c=f.bind(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(b,c,a):navigator.geolocation.getCurrentPosition(b,c,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){var b=a.code,c=a.message||(1===b?"permission denied":2===b?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:b,message:"Geolocation error: "+c+"."})},_handleGeolocationResponse:function(a){var b=a.coords.latitude,c=a.coords.longitude,d=new f.LatLng(b,c),e=180*a.coords.accuracy/40075017,g=e/Math.cos(f.LatLng.DEG_TO_RAD*b),h=f.latLngBounds([b-e,c-g],[b+e,c+g]),i=this._locateOptions;if(i.setView){var j=Math.min(this.getBoundsZoom(h),i.maxZoom);this.setView(d,j)}var k={latlng:d,bounds:h};for(var l in a.coords)"number"==typeof a.coords[l]&&(k[l]=a.coords[l]);this.fire("locationfound",k)}})}(window,document)},{}],40:[function(a,b,c){!function(a,b){if("object"==typeof c&&c)b(c);else{var d={};b(d),"function"==typeof define&&define.amd?define(d):a.Mustache=d}}(this,function(a){function i(a,b){return h.call(a,b)}function j(a){return!i(d,a)}function m(a){return"function"==typeof a}function n(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function p(a){return String(a).replace(/[&<>"'\/]/g,function(a){return o[a]})}function q(a){this.string=a,this.tail=a,this.pos=0}function r(a,b){this.view=null==a?{}:a,this.parent=b,this._cache={".":this.view}}function s(){this.clearCache()}function t(b,c,d,e){function g(a){return c.render(a,d)}for(var h,i,j,f="",k=0,n=b.length;k<n;++k)switch(h=b[k],i=h[1],h[0]){case"#":if(j=d.lookup(i),"object"==typeof j||"string"==typeof j)if(l(j))for(var o=0,p=j.length;o<p;++o)f+=t(h[4],c,d.push(j[o]),e);else j&&(f+=t(h[4],c,d.push(j),e));else if(m(j)){var q=null==e?null:e.slice(h[3],h[5]);j=j.call(d.view,q,g),null!=j&&(f+=j)}else j&&(f+=t(h[4],c,d,e));break;case"^":j=d.lookup(i),(!j||l(j)&&0===j.length)&&(f+=t(h[4],c,d,e));break;case">":j=c.getPartial(i),m(j)&&(f+=j(d));break;case"&":j=d.lookup(i),null!=j&&(f+=j);break;case"name":j=d.lookup(i),null!=j&&(f+=a.escape(j));break;case"text":f+=i}return f}function u(a){for(var e,b=[],c=b,d=[],f=0,g=a.length;f<g;++f)switch(e=a[f],e[0]){case"#":case"^":d.push(e),c.push(e),c=e[4]=[];break;case"/":var h=d.pop();h[5]=e[2],c=d.length>0?d[d.length-1][4]:b;break;default:c.push(e)}return b}function v(a){for(var c,d,b=[],e=0,f=a.length;e<f;++e)c=a[e],c&&("text"===c[0]&&d&&"text"===d[0]?(d[1]+=c[1],d[3]=c[3]):(d=c,b.push(c)));return b}function w(a){return[new RegExp(n(a[0])+"\\s*"),new RegExp("\\s*"+n(a[1]))]}function x(d,h){function s(){if(p&&!r)for(;o.length;)delete m[o.pop()];else o=[];p=!1,r=!1}if(d=d||"",h=h||a.tags,"string"==typeof h&&(h=h.split(c)),2!==h.length)throw new Error("Invalid tags: "+h.join(", "));for(var t,x,y,z,A,B,i=w(h),k=new q(d),l=[],m=[],o=[],p=!1,r=!1;!k.eos();){if(t=k.pos,y=k.scanUntil(i[0]))for(var C=0,D=y.length;C<D;++C)z=y.charAt(C),j(z)?o.push(m.length):r=!0,m.push(["text",z,t,t+1]),t+=1,"\n"==z&&s();if(!k.scan(i[0]))break;if(p=!0,x=k.scan(g)||"name",k.scan(b),"="===x?(y=k.scanUntil(e),k.scan(e),k.scanUntil(i[1])):"{"===x?(y=k.scanUntil(new RegExp("\\s*"+n("}"+h[1]))),k.scan(f),k.scanUntil(i[1]),x="&"):y=k.scanUntil(i[1]),!k.scan(i[1]))throw new Error("Unclosed tag at "+k.pos);if(A=[x,y,t,k.pos],m.push(A),"#"===x||"^"===x)l.push(A);else if("/"===x){if(B=l.pop(),!B)throw new Error('Unopened section "'+y+'" at '+t);if(B[1]!==y)throw new Error('Unclosed section "'+B[1]+'" at '+t)}else if("name"===x||"{"===x||"&"===x)r=!0;else if("="===x){if(h=y.split(c),2!==h.length)throw new Error("Invalid tags at "+t+": "+h.join(", "));i=w(h)}}if(B=l.pop())throw new Error('Unclosed section "'+B[1]+'" at '+k.pos);return u(v(m))}var b=/\s*/,c=/\s+/,d=/\S/,e=/\s*=/,f=/\s*\}/,g=/#|\^|\/|>|\{|&|=|!/,h=RegExp.prototype.test,k=Object.prototype.toString,l=Array.isArray||function(a){return"[object Array]"===k.call(a)},o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};q.prototype.eos=function(){return""===this.tail},q.prototype.scan=function(a){var b=this.tail.match(a);if(b&&0===b.index){var c=b[0];return this.tail=this.tail.substring(c.length),this.pos+=c.length,c}return""},q.prototype.scanUntil=function(a){var c,b=this.tail.search(a);switch(b){case-1:c=this.tail,this.tail="";break;case 0:c="";break;default:c=this.tail.substring(0,b),this.tail=this.tail.substring(b)}return this.pos+=c.length,c},r.make=function(a){return a instanceof r?a:new r(a)},r.prototype.push=function(a){return new r(a,this)},r.prototype.lookup=function(a){var b;if(a in this._cache)b=this._cache[a];else{for(var c=this;c;){if(a.indexOf(".")>0){b=c.view;for(var d=a.split("."),e=0;null!=b&&e<d.length;)b=b[d[e++]]}else b=c.view[a];if(null!=b)break;c=c.parent}this._cache[a]=b}return m(b)&&(b=b.call(this.view)),b},s.prototype.clearCache=function(){this._cache={},this._partialCache={}},s.prototype.compile=function(b,c){var d=this._cache[b];if(!d){var e=a.parse(b,c);d=this._cache[b]=this.compileTokens(e,b)}return d},s.prototype.compilePartial=function(a,b,c){var d=this.compile(b,c);return this._partialCache[a]=d,d},s.prototype.getPartial=function(a){return a in this._partialCache||!this._loadPartial||this.compilePartial(a,this._loadPartial(a)),this._partialCache[a]},s.prototype.compileTokens=function(a,b){var c=this;return function(d,e){if(e)if(m(e))c._loadPartial=e;else for(var f in e)c.compilePartial(f,e[f]);return t(a,c,r.make(d),b)}},s.prototype.render=function(a,b,c){return this.compile(a)(b,c)},a.name="mustache.js",a.version="0.7.3",a.tags=["{{","}}"],a.Scanner=q,a.Context=r,a.Writer=s,a.parse=x,a.escape=p;var y=new s;a.clearCache=function(){return y.clearCache()},a.compile=function(a,b){return y.compile(a,b)},a.compilePartial=function(a,b,c){return y.compilePartial(a,b,c)},a.compileTokens=function(a,b){return y.compileTokens(a,b)},a.render=function(a,b,c){return y.render(a,b,c)},a.to_html=function(b,c,d,e){var f=a.render(b,c,d);return m(e)?void e(f):f}})},{}],41:[function(a,b,c){b.exports={author:{name:"MapBox"},name:"mapbox.js",description:"mapbox javascript api",version:"1.3.1",homepage:"http://mapbox.com/",repository:{type:"git",url:"git://github.com/mapbox/mapbox.js.git"},main:"index.js",dependencies:{leaflet:"0.6.2",mustache:"~0.7.2",corslite:"0.0.3",json3:"~3.2.5"},scripts:{test:"mocha-phantomjs test/index.html"},devDependencies:{"leaflet-hash":"git://github.com/mlevans/leaflet-hash.git#b039a3aa4e2492a5c7448075172ac26769e601d6","leaflet-fullscreen":"0.0.0","uglify-js":"~2.2.5",mocha:"~1.9","expect.js":"~0.2.0",sinon:"~1.7.3","mocha-phantomjs":"~1.1.1",happen:"~0.1.2",browserify:"~2.22.0"},optionalDependencies:{},engines:{node:"*"},readme:"# mapbox.js\n\n[![Build Status](https://travis-ci.org/mapbox/mapbox.js.png?branch=v1)](https://travis-ci.org/mapbox/mapbox.js)\n\nThis is the MapBox Javascript API, version 1.x. It's built as a [Leaflet](http://leafletjs.com/)\nplugin. You can [read about its launch](http://mapbox.com/blog/mapbox-js-with-leaflet/).\n\n## [API](http://mapbox.com/mapbox.js/api/)\n\nManaged as Markdown in `API.md`, following the standards in `DOCUMENTING.md`\n\n## [Examples](http://mapbox.com/mapbox.js/example/v1.0.0/)\n\n## Building\n\n    git clone https://github.com/mapbox/mapbox.js.git\n    npm install\n    make\n\nThis project uses [browserify](https://github.com/substack/node-browserify) to combine\ndependencies and installs a local copy when you run `npm install`.\n`make` will build the project in `dist/`.\n\n### Tests\n\nTest with [phantomjs](http://phantomjs.org/):\n\n    npm test\n\nTo test in a browser, run a [local development server](https://gist.github.com/tmcw/4989751)\nand go to `/test`.\n\n### Version v0.x.x\n\n[Version v0.x.x can be accessed in the old master branch.](https://github.com/mapbox/mapbox.js/tree/master).\n",readmeFilename:"README.md",bugs:{url:"https://github.com/mapbox/mapbox.js/issues"},_id:"mapbox.js@1.3.1",_from:"mapbox.js@~1.3.1"}},{}],42:[function(a,b,c){"use strict";b.exports={HTTP_URLS:["http://a.tiles.mapbox.com/v3/","http://b.tiles.mapbox.com/v3/","http://c.tiles.mapbox.com/v3/","http://d.tiles.mapbox.com/v3/"],FORCE_HTTPS:!1,HTTPS_URLS:["https://a.tiles.mapbox.com/v3/","https://b.tiles.mapbox.com/v3/","https://c.tiles.mapbox.com/v3/","https://d.tiles.mapbox.com/v3/"]}},{}],43:[function(a,b,c){"use strict";var d=a("./util"),e=a("./url"),f=a("./request");b.exports=function(a){var c,b={};return b.getURL=function(a){return c},b.setURL=function(a){return c=e.jsonify(a),b},b.setID=function(a){return d.strict(a,"string"),b.setURL(e.base()+a+"/geocode/{query}.json"),b},b.setTileJSON=function(a){return d.strict(a,"object"),b.setURL(a.geocoder),b},b.queryURL=function(a){if(d.strict(a,"string"),!b.getURL())throw new Error("Geocoding map ID not set");return L.Util.template(b.getURL(),{query:encodeURIComponent(a)})},b.query=function(a,c){return d.strict(a,"string"),d.strict(c,"function"),f(b.queryURL(a),function(a,b){if(b&&b.results&&b.results.length){var e={results:b.results,latlng:[b.results[0][0].lat,b.results[0][0].lon]};void 0!==b.results[0][0].bounds&&(e.bounds=b.results[0][0].bounds,e.lbounds=d.lbounds(e.bounds)),c(null,e)}else c(a||!0)}),b},b.reverseQuery=function(a,c){function e(a){return void 0!==a.lat&&void 0!==a.lng?a.lng+","+a.lat:void 0!==a.lat&&void 0!==a.lon?a.lon+","+a.lat:a[0]+","+a[1]}var d="";if(a.length&&a[0].length){for(var g=0,h=[];g<a.length;g++)h.push(e(a[g]));d=h.join(";")}else d=e(a);return f(b.queryURL(d),function(a,b){c(a,b)}),b},"string"==typeof a?a.indexOf("/")==-1?b.setID(a):b.setURL(a):"object"==typeof a&&b.setTileJSON(a),b}},{"./request":53,"./url":57,"./util":58}],44:[function(a,b,c){"use strict";var d=a("./geocoder"),e=L.Control.extend({includes:L.Mixin.Events,options:{position:"topleft"},initialize:function(a){this.geocoder=d(a)},setURL:function(a){return this.geocoder.setURL(a),this},getURL:function(){return this.geocoder.getURL()},setID:function(a){return this.geocoder.setID(a),this},setTileJSON:function(a){return this.geocoder.setTileJSON(a),this},_toggle:function(a){a&&L.DomEvent.stop(a),L.DomUtil.hasClass(this._container,"active")?(L.DomUtil.removeClass(this._container,"active"),this._results.innerHTML="",this._input.blur()):(L.DomUtil.addClass(this._container,"active"),this._input.focus(),this._input.select())},_closeIfOpen:function(a){L.DomUtil.hasClass(this._container,"active")&&(L.DomUtil.removeClass(this._container,"active"),this._results.innerHTML="",this._input.blur())},onAdd:function(a){var b=L.DomUtil.create("div","leaflet-control-mapbox-geocoder leaflet-bar leaflet-control"),c=L.DomUtil.create("a","leaflet-control-mapbox-geocoder-toggle mapbox-icon mapbox-icon-geocoder",b),d=L.DomUtil.create("div","leaflet-control-mapbox-geocoder-results",b),e=L.DomUtil.create("div","leaflet-control-mapbox-geocoder-wrap",b),f=L.DomUtil.create("form","leaflet-control-mapbox-geocoder-form",e),g=L.DomUtil.create("input","",f);return c.href="#",c.innerHTML="&nbsp;",g.type="text",g.setAttribute("placeholder","Search"),L.DomEvent.addListener(c,"click",this._toggle,this),L.DomEvent.addListener(f,"submit",this._geocode,this),L.DomEvent.disableClickPropagation(b),this._map=a,this._results=d,this._input=g,this._form=f,this._map.on("click",this._closeIfOpen,this),b},_geocode:function(a){L.DomEvent.preventDefault(a),L.DomUtil.addClass(this._container,"searching");var b=this._map;this.geocoder.query(this._input.value,L.bind(function(a,c){if(L.DomUtil.removeClass(this._container,"searching"),!a&&c&&c.results&&c.results.length){if(this._results.innerHTML="",1===c.results.length&&c.lbounds)this._map.fitBounds(c.lbounds),this._closeIfOpen();else{for(var d=0,e=Math.min(c.results.length,5);d<e;d++){for(var f=[],g=0;g<c.results[d].length;g++)c.results[d][g].name&&f.push(c.results[d][g].name);if(f.length){var h=L.DomUtil.create("a","",this._results);h.innerHTML=f.join(", "),h.href="#",function(a){L.DomEvent.addListener(h,"click",function(c){var d=a[0].bounds;b.fitBounds(L.latLngBounds([[d[1],d[0]],[d[3],d[2]]])),L.DomEvent.stop(c)})}(c.results[d])}}if(c.results.length>5){var i=L.DomUtil.create("span","",this._results);i.innerHTML="Top 5 of "+c.results.length+"  results"}}this.fire("found",c)}else this.fire("error",{error:a})},this))}});b.exports=function(a){return new e(a)}},{"./geocoder":43}],45:[function(a,b,c){"use strict";function d(a){return a>=93&&a--,a>=35&&a--,a-32}b.exports=function(a){return function(b,c){if(a){var e=d(a.grid[c].charCodeAt(b)),f=a.keys[e];return a.data[f]}}}},{}],46:[function(a,b,c){"use strict";var d=a("./util"),e=a("mustache"),f=L.Control.extend({options:{pinnable:!0,follow:!1,sanitizer:a("./sanitize"),touchTeaser:!0,location:!0},_currentContent:"",_pinned:!1,initialize:function(a,b){L.Util.setOptions(this,b),d.strict_instance(a,L.Class,"L.mapbox.gridLayer"),this._layer=a},setTemplate:function(a){this.options.template=a},_template:function(a,b){if(b){var c=this.options.template||this._layer.getTileJSON().template;if(c){var d={};return d["__"+a+"__"]=!0,this.options.sanitizer(e.to_html(c,L.extend(d,b)))}}},_show:function(a,b){a!==this._currentContent&&(this._currentContent=a,this.options.follow?(this._popup.setContent(a).setLatLng(b.latLng),this._map._popup!==this._popup&&this._popup.openOn(this._map)):(this._container.style.display="block",this._contentWrapper.innerHTML=a))},_hide:function(){this._pinned=!1,this._currentContent="",this._map.closePopup(),this._container.style.display="none",this._contentWrapper.innerHTML="",L.DomUtil.removeClass(this._container,"closable")},_mouseover:function(a){if(a.data?L.DomUtil.addClass(this._map._container,"map-clickable"):L.DomUtil.removeClass(this._map._container,"map-clickable"),!this._pinned){var b=this._template("teaser",a.data);b?this._show(b,a):this._hide()}},_mousemove:function(a){this._pinned||this.options.follow&&this._popup.setLatLng(a.latLng)},_navigateTo:function(a){window.top.location.href=a},_click:function(a){var b=this._template("location",a.data);if(this.options.location&&b&&0===b.search(/^https?:/))return this._navigateTo(this._template("location",a.data));if(this.options.pinnable){var c=this._template("full",a.data);!c&&this.options.touchTeaser&&L.Browser.touch&&(c=this._template("teaser",a.data)),c?(L.DomUtil.addClass(this._container,"closable"),this._pinned=!0,this._show(c,a)):this._pinned&&(L.DomUtil.removeClass(this._container,"closable"),this._pinned=!1,this._hide())}},_onPopupClose:function(){this._currentContent=null,this._pinned=!1},_createClosebutton:function(a,b){var c=L.DomUtil.create("a","close",a);return c.innerHTML="close",c.href="#",c.title="close",L.DomEvent.on(c,"click",L.DomEvent.stopPropagation).on(c,"mousedown",L.DomEvent.stopPropagation).on(c,"dblclick",L.DomEvent.stopPropagation).on(c,"click",L.DomEvent.preventDefault).on(c,"click",b,this),c},onAdd:function(a){this._map=a;var b="leaflet-control-grid map-tooltip",c=L.DomUtil.create("div",b),d=L.DomUtil.create("div","map-tooltip-content");return c.style.display="none",this._createClosebutton(c,this._hide),c.appendChild(d),this._contentWrapper=d,this._popup=new L.Popup({autoPan:!1,closeOnClick:!1}),a.on("popupclose",this._onPopupClose,this),L.DomEvent.disableClickPropagation(c).addListener(c,"mousewheel",L.DomEvent.stopPropagation),this._layer.on("mouseover",this._mouseover,this).on("mousemove",this._mousemove,this).on("click",this._click,this),c},onRemove:function(a){a.off("popupclose",this._onPopupClose,this),this._layer.off("mouseover",this._mouseover,this).off("mousemove",this._mousemove,this).off("click",this._click,this)}});b.exports=function(a,b){return new f(a,b)}},{"./sanitize":54,"./util":58,mustache:40}],47:[function(a,b,c){"use strict";var d=a("./util"),f=(a("./url"),a("./request")),g=a("./grid"),h=L.Class.extend({includes:[L.Mixin.Events,a("./load_tilejson")],options:{template:function(){return""}},_mouseOn:null,_tilejson:{},_cache:{},initialize:function(a,b){L.Util.setOptions(this,b),this._loadTileJSON(a)},_setTileJSON:function(a){return d.strict(a,"object"),L.extend(this.options,{grids:a.grids,minZoom:a.minzoom,maxZoom:a.maxzoom,bounds:a.bounds&&d.lbounds(a.bounds)}),this._tilejson=a,this._cache={},this._update(),this},getTileJSON:function(){return this._tilejson},active:function(){return!!(this._map&&this.options.grids&&this.options.grids.length)},addTo:function(a){return a.addLayer(this),this},onAdd:function(a){this._map=a,this._update(),this._map.on("click",this._click,this).on("mousemove",this._move,this).on("moveend",this._update,this)},onRemove:function(){this._map.off("click",this._click,this).off("mousemove",this._move,this).off("moveend",this._update,this)},getData:function(a,b){if(this.active()){var c=this._map,d=c.project(a),e=256,f=4,g=Math.floor(d.x/e),h=Math.floor(d.y/e),i=c.options.crs.scale(c.getZoom())/e;return g=(g+i)%i,h=(h+i)%i,this._getTile(c.getZoom(),g,h,function(a){var c=Math.floor((d.x-g*e)/f),i=Math.floor((d.y-h*e)/f);b(a(c,i))}),this}},_click:function(a){this.getData(a.latlng,L.bind(function(b){this.fire("click",{latLng:a.latlng,data:b})},this))},_move:function(a){this.getData(a.latlng,L.bind(function(b){b!==this._mouseOn?(this._mouseOn&&this.fire("mouseout",{latLng:a.latlng,data:this._mouseOn}),this.fire("mouseover",{latLng:a.latlng,data:b}),this._mouseOn=b):this.fire("mousemove",{latLng:a.latlng,data:b})},this))},_getTileURL:function(a){var b=this.options.grids,c=(a.x+a.y)%b.length,d=b[c];return L.Util.template(d,a)},_update:function(){if(this.active()){var a=this._map.getPixelBounds(),b=this._map.getZoom(),c=256;if(!(b>this.options.maxZoom||b<this.options.minZoom))for(var d=new L.Point(Math.floor(a.min.x/c),Math.floor(a.min.y/c)),e=new L.Point(Math.floor(a.max.x/c),Math.floor(a.max.y/c)),f=this._map.options.crs.scale(b)/c,g=d.x;g<=e.x;g++)for(var h=d.y;h<=e.y;h++){var i=(g+f)%f,j=(h+f)%f;this._getTile(b,i,j)}}},_getTile:function(a,b,c,d){var e=a+"_"+b+"_"+c,h=L.point(b,c);if(h.z=a,this._tileShouldBeLoaded(h)){if(e in this._cache){if(!d)return;return void("function"==typeof this._cache[e]?d(this._cache[e]):this._cache[e].push(d))}this._cache[e]=[],d&&this._cache[e].push(d),f(this._getTileURL(h),L.bind(function(a,b){var c=this._cache[e];this._cache[e]=g(b);for(var d=0;d<c.length;++d)c[d](this._cache[e])},this))}},_tileShouldBeLoaded:function(a){if(a.z>this.options.maxZoom||a.z<this.options.minZoom)return!1;if(this.options.bounds){var b=256,c=a.multiplyBy(b),d=c.add(new L.Point(b,b)),e=this._map.unproject(c),f=this._map.unproject(d),g=new L.LatLngBounds([e,f]);if(!this.options.bounds.intersects(g))return!1}return!0}});b.exports=function(a,b){return new h(a,b)}},{"./grid":45,"./load_tilejson":49,"./request":53,"./url":57,"./util":58}],48:[function(a,b,c){"use strict";var d=L.Control.extend({options:{position:"bottomright",sanitizer:a("./sanitize")},initialize:function(a){L.setOptions(this,a),this._legends={}},onAdd:function(a){return this._container=L.DomUtil.create("div","map-legends wax-legends"),L.DomEvent.disableClickPropagation(this._container),this._update(),this._container},addLegend:function(a){return a?(this._legends[a]||(this._legends[a]=0),this._legends[a]++,this._update()):this},removeLegend:function(a){return a?(this._legends[a]&&this._legends[a]--,this._update()):this},_update:function(){if(!this._map)return this;this._container.innerHTML="";var a="none";for(var b in this._legends)if(this._legends.hasOwnProperty(b)&&this._legends[b]){var c=this._container.appendChild(document.createElement("div"));c.className="map-legend wax-legend",c.innerHTML=this.options.sanitizer(b),a="block"}return this._container.style.display=a,this}});b.exports=function(a){return new d(a)}},{"./sanitize":54}],49:[function(a,b,c){"use strict";var d=a("./request"),e=a("./url"),f=a("./util");b.exports={_loadTileJSON:function(a){"string"==typeof a?(a.indexOf("/")==-1&&(a=e.base()+a+".json"),d(e.secureFlag(a),L.bind(function(b,c){b?(f.log("could not load TileJSON at "+a),this.fire("error",{error:b})):c&&(this._setTileJSON(c),this.fire("ready"))},this))):a&&"object"==typeof a&&this._setTileJSON(a)}}},{"./request":53,"./url":57,"./util":58}],50:[function(a,b,c){"use strict";var e=(a("./util"),a("./tile_layer")),f=a("./marker_layer"),g=a("./grid_layer"),h=a("./grid_control"),i=a("./legend_control"),j=L.Map.extend({includes:[a("./load_tilejson")],options:{tileLayer:{},markerLayer:{},gridLayer:{},legendControl:{},gridControl:{}},_tilejson:{},initialize:function(a,b,c){L.Map.prototype.initialize.call(this,a,c),this.attributionControl&&this.attributionControl.setPrefix(""),this.options.tileLayer&&(this.tileLayer=e(void 0,this.options.tileLayer),this.addLayer(this.tileLayer)),this.options.markerLayer&&(this.markerLayer=f(void 0,this.options.markerLayer),this.addLayer(this.markerLayer)),this.options.gridLayer&&(this.gridLayer=g(void 0,this.options.gridLayer),this.addLayer(this.gridLayer)),this.options.gridLayer&&this.options.gridControl&&(this.gridControl=h(this.gridLayer,this.options.gridControl),this.addControl(this.gridControl)),this.options.legendControl&&(this.legendControl=i(this.options.legendControl),this.addControl(this.legendControl)),this._loadTileJSON(b)},addLayer:function(a){return"on"in a&&a.on("ready",L.bind(function(){this._updateLayer(a)},this)),L.Map.prototype.addLayer.call(this,a)},_setTileJSON:function(a){return this._tilejson=a,this._initialize(a),this},getTileJSON:function(){return this._tilejson},_initialize:function(a){if(this.tileLayer&&(this.tileLayer._setTileJSON(a),this._updateLayer(this.tileLayer)),this.markerLayer&&!this.markerLayer.getGeoJSON()&&a.data&&a.data[0]&&this.markerLayer.loadURL(a.data[0]),this.gridLayer&&(this.gridLayer._setTileJSON(a),this._updateLayer(this.gridLayer)),this.legendControl&&a.legend&&this.legendControl.addLegend(a.legend),!this._loaded){var b=a.center[2],c=L.latLng(a.center[1],a.center[0]);this.setView(c,b)}},_updateLayer:function(a){a.options&&(this.attributionControl&&this._loaded&&this.attributionControl.addAttribution(a.options.attribution),L.stamp(a)in this._zoomBoundLayers||!a.options.maxZoom&&!a.options.minZoom||(this._zoomBoundLayers[L.stamp(a)]=a),this._updateZoomLevels())}});b.exports=function(a,b,c){return new j(a,b,c)}},{"./grid_control":46,"./grid_layer":47,"./legend_control":48,"./load_tilejson":49,"./marker_layer":52,"./tile_layer":56,"./util":58}],51:[function(a,b,c){"use strict";function f(a){a=a||{};var b={small:[20,50],medium:[30,70],large:[35,90]},c=a["marker-size"]||"medium",e=a["marker-symbol"]?"-"+a["marker-symbol"]:"",f=(a["marker-color"]||"7e7e7e").replace("#","");return L.icon({iconUrl:d.base()+"marker/pin-"+c.charAt(0)+e+"+"+f+(L.Browser.retina?"@2x":"")+".png",iconSize:b[c],iconAnchor:[b[c][0]/2,b[c][1]/2],popupAnchor:[0,-b[c][1]/2]})}function g(a,b){return L.marker(b,{icon:f(a.properties),title:a.properties.title})}function h(a,b){if(!a||!a.properties)return"";var c="";return a.properties.title&&(c+='<div class="marker-title">'+a.properties.title+"</div>"),a.properties.description&&(c+='<div class="marker-description">'+a.properties.description+"</div>"),(b||e)(c)}var d=a("./url"),e=a("./sanitize");b.exports={icon:f,style:g,createPopup:h}},{"./sanitize":54,"./url":57}],52:[function(a,b,c){"use strict";var d=a("./util"),e=a("./url"),f=a("./request"),g=a("./marker"),h=L.FeatureGroup.extend({options:{filter:function(){return!0},sanitizer:a("./sanitize")},initialize:function(a,b){L.setOptions(this,b),this._layers={},"string"==typeof a?d.idUrl(a,this):a&&"object"==typeof a&&this.setGeoJSON(a)},setGeoJSON:function(a){this._geojson=a,this.clearLayers(),this._initialize(a)},getGeoJSON:function(){return this._geojson},loadURL:function(a){return a=e.jsonify(a),f(a,L.bind(function(b,c){b?(d.log("could not load markers at "+a),this.fire("error",{error:b})):c&&(this.setGeoJSON(c),this.fire("ready"))},this)),this},loadID:function(a){return this.loadURL(e.base()+a+"/markers.geojson")},setFilter:function(a){return this.options.filter=a,this._geojson&&(this.clearLayers(),this._initialize(this._geojson)),this},getFilter:function(){return this.options.filter},_initialize:function(a){var c,d,b=L.Util.isArray(a)?a:a.features;if(b)for(c=0,d=b.length;c<d;c++)(b[c].geometries||b[c].geometry||b[c].features)&&this._initialize(b[c]);else if(this.options.filter(a)){var e=L.GeoJSON.geometryToLayer(a,g.style),f=g.createPopup(a,this.options.sanitizer);e.feature=a,f&&e.bindPopup(f,{closeButton:!1}),this.addLayer(e)}}});b.exports=function(a,b){return new h(a,b)}},{"./marker":51,"./request":53,"./sanitize":54,"./url":57,"./util":58}],53:[function(a,b,c){"use strict";var d=a("corslite"),e=a("json3"),f=a("./util").strict;b.exports=function(a,b){f(a,"string"),f(b,"function"),d(a,function(a,c){!a&&c&&(c="g"==c.responseText[0]?e.parse(c.responseText.substring(5,c.responseText.length-2)):e.parse(c.responseText)),b(a,c)})}},{"./util":58,corslite:37,json3:38}],54:[function(a,b,c){"use strict";function e(a){return/^https?/.test(a.getScheme())?a.toString():"data"==a.getScheme()&&/^image/.test(a.getPath())?a.toString():void 0}function f(a){return a}var d=a("../ext/sanitizer/html-sanitizer-bundle.js");b.exports=function(a){return a?d(a,e,f):""}},{"../ext/sanitizer/html-sanitizer-bundle.js":33}],55:[function(a,b,c){"use strict";var d=L.Control.extend({includes:[a("./load_tilejson")],options:{position:"topleft",url:""},initialize:function(a,b){L.setOptions(this,b),this._loadTileJSON(a)},_setTileJSON:function(a){this._tilejson=a},onAdd:function(a){this._map=a;var b=L.DomUtil.create("div","leaflet-control-mapbox-share leaflet-bar"),c=L.DomUtil.create("a","mapbox-share mapbox-icon mapbox-icon-share",b);return c.href="#",L.DomEvent.addListener(c,"click",this._share,this),L.DomEvent.disableClickPropagation(b),this._map.on("mousedown",this._clickOut,this),b},_clickOut:function(a){if(this._popup)return this._map.removeLayer(this._popup),void(this._popup=null)},_share:function(a){function f(a){if(a.originalEvent&&"TEXTAREA"===a.originalEvent.target.nodeName){var b=a.originalEvent.target;b.focus(),b.select()}else a.originalEvent&&"#close"===a.originalEvent.target.getAttribute("href")&&this._clickOut(a);L.DomEvent.stop(a.originalEvent)}L.DomEvent.stop(a);var b=this._tilejson||this._map._tilejson||{},c="http://twitter.com/intent/tweet?status="+encodeURIComponent(b.name+"\n"+(b.webpage||window.location)),d="https://www.facebook.com/sharer.php?u="+encodeURIComponent(this.options.url||b.webpage||window.location)+"&t="+encodeURIComponent(b.name),e="<a class='leaflet-popup-close-button' href='#close'>Ã</a>"+"<h3>Share this map</h3><div class='mapbox-share-buttons'><a class='mapbox-share-facebook mapbox-icon mapbox-icon-facebook' target='_blank' href='{{facebook}}'>Facebook</a><a class='mapbox-share-twitter mapbox-icon mapbox-icon-twitter' target='_blank' href='{{twitter}}'>Twitter</a></div>".replace("{{twitter}}",c).replace("{{facebook}}",d)+"<h3>Get the embed code</h3><small>Copy and paste this HTML into your website or blog.</small>"+"<textarea rows=4>{{value}}</textarea>".replace("{{value}}","&lt;iframe width='500' height='300' frameBorder='0' src='{{embed}}'&gt;&lt;/iframe&gt;".replace("{{embed}}",b.embed||window.location));this._popup=L.marker(this._map.getCenter(),{zIndexOffset:1e4,icon:L.divIcon({className:"mapbox-share-popup",iconSize:L.point(360,240),iconAnchor:L.point(180,120),html:e})}).on("mousedown",function(a){L.DomEvent.stopPropagation(a.originalEvent)}).on("click",f,this).addTo(this._map)}});b.exports=function(a,b){return new d(a,b)}},{"./load_tilejson":49}],56:[function(a,b,c){"use strict";var d=a("./util"),f=(a("./url"),L.TileLayer.extend({includes:[a("./load_tilejson")],options:{format:"png"},formats:["png","png32","png64","png128","png256","jpg70","jpg80","jpg90"],initialize:function(a,b){L.TileLayer.prototype.initialize.call(this,void 0,b),this._tilejson={},b&&b.detectRetina&&L.Browser.retina&&b.retinaVersion&&(a=b.retinaVersion),b&&b.format&&d.strict_oneof(b.format,this.formats),this._loadTileJSON(a)},setFormat:function(a){return d.strict(a,"string"),this.options.format=a,this.redraw(),this},setUrl:null,_setTileJSON:function(a){return d.strict(a,"object"),L.extend(this.options,{tiles:a.tiles,attribution:a.attribution,minZoom:a.minzoom,maxZoom:a.maxzoom,tms:"tms"===a.scheme,bounds:a.bounds&&d.lbounds(a.bounds)}),this._tilejson=a,this.redraw(),this},getTileJSON:function(){return this._tilejson},getTileUrl:function(a){var b=this.options.tiles,c=Math.abs(a.x+a.y)%b.length,d=b[c],e=L.Util.template(d,a);return e?e.replace(".png","."+this.options.format):e},_update:function(){this.options.tiles&&L.TileLayer.prototype._update.call(this)}}));b.exports=function(a,b){return new f(a,b)}},{"./load_tilejson":49,"./url":57,"./util":58}],57:[function(a,b,c){"use strict";var d=a("./config");b.exports={isSSL:function(){return"https:"===document.location.protocol||d.FORCE_HTTPS},base:function(a){var b=this.isSSL()?d.HTTPS_URLS:d.HTTP_URLS;return void 0===a||"number"!=typeof a?b[0]:b[a%b.length]},secureFlag:function(a){return this.isSSL()?a.match(/(\?|&)secure/)?a:a.indexOf("?")!==-1?a+"&secure":a+"?secure":a},jsonify:function(a){return a.replace(/\.(geo)?jsonp(?=$|\?)/,".$1json")}}},{"./config":42}],58:[function(a,b,c){"use strict";b.exports={idUrl:function(a,b){a.indexOf("/")==-1?b.loadID(a):b.loadURL(a)},log:function(a){console&&"function"==typeof console.error&&console.error(a)},strict:function(a,b){if(typeof a!==b)throw new Error("Invalid argument: "+b+" expected")},strict_instance:function(a,b,c){if(!(a instanceof b))throw new Error("Invalid argument: "+c+" expected")},strict_oneof:function(a,b){if(b.indexOf(a)==-1)throw new Error("Invalid argument: "+a+" given, valid values are "+b.join(", "))},lbounds:function(a){return new L.LatLngBounds([[a[1],a[0]],[a[3],a[2]]])}}},{}],59:[function(a,b,c){function e(a,b){var c=[];a.data.forEach(function(a){var d=JSON.stringify(a).toLowerCase();d.match(b.toLowerCase())&&c.push(a)}),0===c.length?($(".noMatches").css("visibility","inherit"),i(a,c)):($(".noMatches").css("visibility","hidden"),i(a,c))}function f(a,b,c,d){if(a.tableDiv==d){a.data.sort(function(a,c){return a[b]<c[b]?-1:a[b]>c[b]?1:0}),"descending"===c&&a.data.reverse(),i(a);var e;$(d+" .tHeader").each(function(a,c){var d=g($(c).text());d===b&&(e=c)}),$(e).attr("data-sorted",c)}}function g(a){var b=a.toLowerCase().replace(/\s/g,"").replace(/\W/g,"");return b}function h(a){function b(b){var c="#"+$(b.target).closest("div").attr("id"),d=$(b.target).attr("data-sorted");d=d?"descending"===d?"ascending":"descending":"ascending";var e=g(b.target.innerHTML);f(a,e,d,c)}$(document).on("click",".tHeader",b)}function i(a,b){if(a.templateID=a.tableDiv+"_template",h(a),b)var c=b;else var c=a.data;a.tableDiv.slice(1);a.pagination||n(c,{tableDiv:"#"+a.targetDiv});var e=c.length,f=Math.ceil(e/a.pagination),g=1,i=g*a.pagination-a.pagination,j=g*a.pagination,k=c.slice(i,j);n(k,a),a.data.length>a.pagination&&l(a.tableDiv,g,g,f,c,a.pagination)}function j(a,b,c,d,e){$(".pagination-pre-"+b).addClass("no-pag"),$(document).on("click",".pagination-next-"+b,function(){if(!$(this).hasClass("no-pag")){c+=1;currentStart=c*d-d,currentEnd=c*d,c>=e?(currentRows=a.slice(currentStart,currentEnd),n(currentRows,{tableDiv:"#"+b}),k("#"+b,c,c,e),$(".pagination-next-"+b).addClass("no-pag"),$(".pagination-next-"+b)):(currentRows=a.slice(currentStart,currentEnd),n(currentRows,{tableDiv:"#"+b}),k("#"+b,c,c,e))}}),$(document).on("click",".pagination-pre-"+b,function(){if(c>1&&$(this).removeClass("no-pag"),!$(this).hasClass("no-pag")){c-=1;currentStart=c*d-d,currentEnd=c*d,1===c?(currentRows=a.slice(currentStart,currentEnd),n(currentRows,{tableDiv:"#"+b}),k("#"+b,c,c,e),$(".pagination-pre-"+b).addClass("no-pag")):(currentRows=a.slice(currentStart,currentEnd),n(currentRows,{
tableDiv:"#"+b}),k("#"+b,c,c,e))}})}function k(a,b,b,c,d,e){var f=a.slice(1);$(a).append("<div id='Pagination' pageno='"+b+"'class='table-pagination'>Showing page "+b+" of "+c+" <a class='pagination-pre-"+f+"'>Previous</a> <a class='pagination-next-"+f+"'>Next</a></p></div>")}function l(a,b,b,c,d,e){var f=a.slice(1);$(a).append("<div id='Pagination' pageno='"+b+"'class='table-pagination'>Showing page "+b+" of "+c+" <a class='pagination-pre-"+f+"'>Previous</a> <a class='pagination-next-"+f+"'>Next</a></p></div>"),j(d,f,b,e,c)}function m(){$(".table-pagination").attr("display","none")}function n(a,b){var c="";c=b.templateID?b.templateID.replace("#",""):b.tableDiv.replace("#","")+"_template";var f=($(c),d[c]({rows:a}));$(b.tableDiv).html(f)}var d=a("icanhaz");b.exports.initiateTableFilter=function(a){$(".clear").on("click",function(){$(this.id+".noMatches").css("visibility","hidden"),$(this.id+a.filterDiv).val(""),i(a)}),$(a.filterDiv).keyup(function(b){var c=$(b.target).val();e(a,c)})},b.exports.searchTable=e,b.exports.sortThings=f,b.exports.resolveDataTitle=g,b.exports.initiateTableSorter=h,b.exports.makeTable=i,b.exports.setPagClicks=j,b.exports.setPreNext=k,b.exports.writePreNext=l,b.exports.clearPreNext=m,b.exports.table=n},{icanhaz:2}]},{},[1]);